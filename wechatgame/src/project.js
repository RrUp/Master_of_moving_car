window.__require=function e(t,n,i){function o(c,s){if(!n[c]){if(!t[c]){var r=c.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+c+"'")}}var g=n[c]={exports:{}};t[c][0].call(g.exports,function(e){return o(t[c][1][e]||e)},g,g.exports,e,t,n,i)}return n[c].exports}for(var a="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({AdsManagerJS:[function(e,t,n){"use strict";cc._RF.push(t,"d2cf11tt4lP56l+62Foi1w7","AdsManagerJS");var i=e("define"),o=e("GameDataManagerJS"),a=null,c=null,s=cc.Class({extends:cc.Component,properties:{preloadedInterstitial:null,preloadedRewardedVideo:null},start:function(){},statics:{_instance:null,getInstance:function(){return null===s._instance&&(this._instance=new s),s._instance}},ctor:function(){this.init()},init:function(){return this.preloadInterstitial(),this.preloadRewarded(),this.preloadBannerAD(),this.closeRewardedAD(),10},preloadInterstitial:function(){if("undefined"!=typeof FBInstant){var e=FBInstant.getSupportedAPIs();e.includes("getInterstitialAdAsync")&&e.includes("getRewardedVideoAsync")?FBInstant.getInterstitialAdAsync(faceBookInterstitialId).then(function(e){return o.getInstance().setDebugInfo(" preloadedInterstitial.loadAsync(); "),(a=e).loadAsync()}).then(function(){console.log("Interstitial preloaded"),o.getInstance().setDebugInfo("Interstitial preloaded  => "+a)}).catch(function(e){console.error("Interstitial failed to preload: "+e.message),o.getInstance().setDebugInfo("Interstitial failed to preload: "+e.message)}):(console.log("Ads not supported in this session"),o.getInstance().setDebugInfo("Ads not supported in this session"))}},showInterstitial:function(){1==i.DEBUG_NO_ADS?(console.log("Interstitial ad finished successfully"),o.getInstance().setDebugInfo("Interstitial ad finished successfully"),this.rewardedInterstitialAdsCallback()):"undefined"!=typeof FBInstant&&(null!=a?(a.showAsync().then(function(){console.log("Interstitial ad finished successfully"),o.getInstance().setDebugInfo("Interstitial ad finished successfully"),s.getInstance().rewardedInterstitialAdsCallback()}).catch(function(e){console.error(e.message),o.getInstance().setDebugInfo(e.message)}),s.getInstance().scheduleOnce(function(){o.getInstance().setDebugInfo(" scheduleOnce => preloadInterstitial "),s.getInstance().preloadInterstitial()},2)):o.getInstance().setDebugInfo(" error  g_preloadedInterstitial => "+a))},rewardedInterstitialAdsCallback:function(){o.getInstance().setDebugInfo("Reward    InterstitialAds"),console.log("Reward    InterstitialAds")},preloadRewarded:function(){if("undefined"!=typeof FBInstant){var e=FBInstant.getSupportedAPIs();e.includes("getInterstitialAdAsync")&&e.includes("getRewardedVideoAsync")&&FBInstant.getRewardedVideoAsync(faceBookRewardedVideoId).then(function(e){return c=e,o.getInstance().setDebugInfo(" preloadedRewardedVideo.loadAsync(); "),c.loadAsync()}).then(function(){console.log("Rewarded video preloaded"),o.getInstance().setDebugInfo("Rewarded video preloaded => "+c)}).catch(function(e){console.error("Rewarded video failed to preload: "+e.message),o.getInstance().setDebugInfo("Rewarded video failed to preload: "+e.message)})}else wx.createRewardedVideoAd&&(this.rewardedAD=wx.createRewardedVideoAd({adUnitId:"adunit-a437428aa8ee8909"}),console.log("   preloadRewarded  Rewarded "),this.rewardedAD.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e)}))},showRewardedVideo:function(){var e=this;1==i.DEBUG_NO_ADS?(console.log("Rewarded video watched successfully"),this.rewardedVideoAdsCallback()):"undefined"!=typeof FBInstant?null!=c?(c.showAsync().then(function(){console.log("Rewarded video watched successfully"),o.getInstance().setDebugInfo("Rewarded video watched successfully"),s.getInstance().rewardedVideoAdsCallback()}).catch(function(e){console.error(e.message),o.getInstance().setDebugInfo(e.message)}),s.getInstance().scheduleOnce(function(){o.getInstance().setDebugInfo(" scheduleOnce => preloadRewarded "),s.getInstance().preloadRewarded()},2)):o.getInstance().setDebugInfo(" error  g_preloadedRewardedVideo =>  "+c):null!=this.rewardedAD?this.rewardedAD.show().catch(function(t){e.rewardedAD.load().then(function(){return e.rewardedAD.show()}),s.getInstance().onShareGame("sharePic")}):(console.log("Rewarded \u4e3a  null"),wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u89c6\u9891\u5e7f\u544a\u5956\u52b1\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"}))},showRewardedGold:function(){var e=this;1==i.DEBUG_NO_ADS?(console.log("Rewarded video watched successfully"),this.rewardedVideoAdsCallback()):"undefined"!=typeof FBInstant?null!=c?(c.showAsync().then(function(){console.log("Rewarded video watched successfully"),o.getInstance().setDebugInfo("Rewarded video watched successfully"),s.getInstance().rewardedGoldAdsCallback()}).catch(function(e){console.error(e.message),o.getInstance().setDebugInfo(e.message)}),s.getInstance().scheduleOnce(function(){o.getInstance().setDebugInfo(" scheduleOnce => preloadRewarded "),s.getInstance().preloadRewarded()},2)):o.getInstance().setDebugInfo(" error  g_preloadedRewardedVideo =>  "+c):null!=this.rewardedAD?this.rewardedAD.show().catch(function(t){e.rewardedAD.load().then(function(){return e.rewardedAD.show()}),s.getInstance().onShareGame("sharePic")}):(console.log("Rewarded \u4e3a  null"),wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u89c6\u9891\u5e7f\u544a\u5956\u52b1\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"}))},showmainRewardedGold:function(){var e=this;1==i.DEBUG_NO_ADS?(console.log("Rewarded video watched successfully"),this.rewardedVideoAdsCallback()):"undefined"!=typeof FBInstant?null!=c?(c.showAsync().then(function(){console.log("Rewarded video watched successfully"),o.getInstance().setDebugInfo("Rewarded video watched successfully"),s.getInstance().rewardedmainGoldAdsCallback()}).catch(function(e){console.error(e.message),o.getInstance().setDebugInfo(e.message)}),s.getInstance().scheduleOnce(function(){o.getInstance().setDebugInfo(" scheduleOnce => preloadRewarded "),s.getInstance().preloadRewarded()},2)):o.getInstance().setDebugInfo(" error  g_preloadedRewardedVideo =>  "+c):null!=this.rewardedAD?this.rewardedAD.show().catch(function(t){e.rewardedAD.load().then(function(){return e.rewardedAD.show()}),s.getInstance().onShareGame("sharePic")}):(console.log("Rewarded \u4e3a  null"),wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u89c6\u9891\u5e7f\u544a\u5956\u52b1\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"}))},closeRewardedAD:function(){wx.createRewardedVideoAd&&this.rewardedAD.onClose(function(e){return e&&e.isEnded||void 0===e?(console.log("\u6b63\u5e38\u7ed3\u675f"),s.getInstance().rewardedVideoAdsCallback(),!0):(console.log("\u4e2d\u9014\u9000\u51fa"),!1)})},rewardedVideoAdsCallback:function(){console.log("Reward    rewardedVideoAds"),o.getInstance().setDebugInfo("Reward    rewardedVideoAds"),cc.find("Canvas/game").getComponent("gameplay").videohint_btnCallback()},rewardedGoldAdsCallback:function(){console.log("Reward    rewardedVideoAds"),o.getInstance().setDebugInfo("Reward    rewardedVideoAds"),cc.find("Canvas/game").getComponent("gameplay").gold_btnCallback()},rewardedmainGoldAdsCallback:function(){console.log("Reward    rewardedVideoAds"),o.getInstance().setDebugInfo("Reward    rewardedVideoAds"),cc.find("Canvas").getComponent("main").gold_btnCallback()},preloadBannerAD:function(){var e=this;"undefined"!=typeof FBInstant||(console.log("wx.getSystemInfoSync().SDKVersion  "+wx.getSystemInfoSync().SDKVersion),wx.createBannerAd?(this.bannerAD=wx.createBannerAd({adUnitId:"adunit-8ef60975845f4302",style:{left:0,top:0,width:wx.getSystemInfoSync().windowWidth}}),this.bannerAD.onResize(function(t){e.bannerAD.style.top=wx.getSystemInfoSync().windowHeight-e.bannerAD.style.realHeight,e.bannerAD.style.left=(wx.getSystemInfoSync().windowWidth-e.bannerAD.style.realWidth)/2}),this.bannerAD.onError(function(e){console.log("banner \u52a0\u8f7d\u5931\u8d25"+e)})):console.log("preloadBannerAD SDKVersion \u4e0d\u652f\u6301  banner"))},showBannerAD:function(){"undefined"!=typeof FBInstant||(null!=this.bannerAD?this.bannerAD.show():console.log("bannerAD \u4e3a  null"))},hideBannerAD:function(){"undefined"!=typeof FBInstant||(null!=this.bannerAD?this.bannerAD.hide():console.log("bannerAD \u4e3a  null"))}});t.exports=s,cc._RF.pop()},{GameDataManagerJS:"GameDataManagerJS",define:"define"}],AudioSourceControl:[function(e,t,n){"use strict";cc._RF.push(t,"51fa6kgHXJL3ohx/zOq793u","AudioSourceControl");var i=e("define"),o=cc.Class({extends:cc.Component,properties:{audio:{type:cc.AudioSource,default:null},audioClick:{type:cc.AudioSource,default:null},audioMove:{type:cc.AudioSource,default:null},audioComplete:{type:cc.AudioSource,default:null},data:0},statics:{_instance:null,getInstance:function(){return null===o._instance&&(this._instance=new o,console.log("AudioSourceControl _instance=this  !")),o._instance}},onLoad:function(){cc.game.addPersistRootNode(this.node),console.log("AudioSourceControl onLoad  ")},start:function(){},playAudio:function(){this.audio&&1==i.music&&this.audio.play()},playClick:function(){this.audioClick&&1==i.music&&this.audioClick.play()},playMove:function(){this.audioMove&&1==i.music&&this.audioMove.play()},playComplete:function(){this.audioComplete&&1==i.music&&this.audioComplete.play()}});t.exports=o,cc._RF.pop()},{define:"define"}],BlockJS:[function(e,t,n){"use strict";var i;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}cc._RF.push(t,"edda1k89ARESIC4buXE4b7v","BlockJS");var a=e("define"),c=e("MyLayoutManagerJS"),s=[["car0_0-","car0_1-","car1","car0_2-","car0_3-"],["car1_0-","car1_1-","car2","car1_2-","car1_3-"],["car2_0-","car2_1-","car3","car2_2-","car2_3-"],["car3_0-","car3_1-","car4","car3_2-","car3_3-"],["car2_0-","car2_1-","car5","car2_2-","car2_3-"],["car2_0-","car2_1-","car6","car2_2-","car2_3-"],["car0_0-","car0_1-","car7","car0_2-","car0_3-"],["car1_0-","car1_1-","car8","car1_2-","car1_3-"],["car2_0-","car2_1-","car9","car2_2-","car2_3-"],["car3_0-","car3_1-","car10","car3_2-","car3_3-"],["car2_0-","car2_1-","car11","car2_2-","car2_3-"],["car2_0-","car2_1-","car12","car2_2-","car2_3-"]],r=cc.Class({extends:cc.Component,properties:(i={m_Tile:0,m_Orientation:0,m_Length:2,m_Id:0},o(i,"m_Orientation",0),o(i,"m_TouchBeganPos",cc.Vec2),o(i,"m_TouchBeganGPos",cc.Vec2),o(i,"m_GPosition",cc.Vec2),o(i,"m_LastGPosition",cc.Vec2),o(i,"m_Scale",cc.Vec2),o(i,"m_State",a.kBlockState_Ungrabbed),i),statics:{s_CurrentTouchedBlock:null,getCurrentTouchedBlock:function(){return this.s_CurrentTouchedBlock},clearCurrentTouchedBlock:function(){this.s_CurrentTouchedBlock=null}},ctor:function(){this.m_GPosition=new cc.Vec2(-1,-1)},getGPosition:function(){return new cc.Vec2(this.m_GPosition)},getLastGPosition:function(){return new cc.Vec2(this.m_LastGPosition)},getTouchBeganGPosition:function(){return new cc.Vec2(this.m_TouchBeganGPos)},getTouchBeganPosition:function(){return new cc.Vec2(this.m_TouchBeganPos)},getOrientation:function(){return this.m_Orientation},getLength:function(){return this.m_Length},init:function(e){this.m_GPosition=new cc.Vec2(-1,-1),this.initWithOrientationAndLength(e.orientation,e.length,e.panda)},initWithOrientationAndLength:function(e,t,n){var i;if(e==a.kOrientation_Horizontal?this.m_Tile=2==t?n?2:0:3==t?3:-1:this.m_Tile=2==t?n?-1:1:3==t?4:-1,i=2==this.m_Tile?s[a.getcarskin()-1][this.m_Tile]+"":s[0][this.m_Tile]+"0",this.m_Tile>=0){var o=cc.url.raw("resources/"+i),r=this.getComponent(cc.Sprite);cc.log("***sp",r);var l=this;o=i,cc.loader.loadRes(o,cc.SpriteFrame,function(e,t){l.getComponent(cc.Sprite).spriteFrame=t}),this.m_Orientation=e,this.m_Length=t;var g=new cc.Vec2(0,0);r.node.setAnchorPoint(g);c.getInstance().getGridSize().width;return this.m_Scale=new cc.Vec2(c.getInstance().getGridSize().width/91,c.getInstance().getGridSize().height/91),r.node.setScale(this.m_Scale),!0}return!1},getPosition:function(){new cc.Vec2;return this.getComponent(cc.Sprite).node.getPosition()},getAbsolutePosition:function(){var e=new cc.Vec2;e=this.getComponent(cc.Sprite).node.getPosition();var t=cc.view.getVisibleSize(),n=cc.view.getVisibleOrigin(),i=cc.find("Canvas/gameplay/gameCenterNode"),o=new cc.Vec2(i.getPosition()),a=new cc.Vec2;a.x=o.x+(t.width+n.x)/2,a.y=o.y+(t.height+n.y)/2;var c=new cc.Vec2;return c.x=a.x+e.x,c.y=a.y+e.y,c},setPosition:function(e){var t=cc.view.getVisibleSize(),n=cc.view.getVisibleOrigin(),i=new cc.Vec2,o=cc.find("Canvas/gameplay/gameCenterNode"),c=new cc.Vec2(o.getPosition());i.x=c.x+(t.width+n.x)/2,i.y=c.y+(t.height+n.y)/2,i.x=e.x-i.x,i.y=e.y-i.y,this.getComponent(cc.Sprite).node.setPosition(i),a.DEBUG_MODE&&a.DEBUG_SHOW_POS&&console.log("car setPosition= "+e+",\u76f8\u5bf9Pos="+i)},setGPosition:function(e){this.m_LastGPosition=this.m_GPosition,this.m_GPosition=e},getContentSize:function(){return this.getComponent(cc.Sprite).node.getContentSize()},getScaleY:function(){return this.m_Scale.y},getScaleX:function(){return this.m_Scale.x},setId:function(e){this.m_Id=e},getId:function(){return this.m_Id},onLoad:function(){this.add_touch_listeners()},start:function(){},setOnBlockListener:function(e){this.m_OnBlockListener=e},add_touch_listeners:function(){var e=this.getComponent(cc.Sprite).node;e.on(cc.Node.EventType.TOUCH_START,function(e){if(r.s_CurrentTouchedBlock)return!1;var t=this.getComponent("BlockJS");if(t.m_State!=a.kBlockState_Ungrabbed)return!1;if(r.s_CurrentTouchedBlock=t,t.m_OnBlockListener){if(t.m_OnBlockListener.onDragged(t,e)&&(t.m_State=a.kBlockState_Grabbed,t.m_TouchBeganPos=t.getAbsolutePosition(),t.m_TouchBeganGPos=t.m_LastGPosition,a.DEBUG_MODE&&a.DEBUG_SHOW_POS)){var n=t.getAbsolutePosition();console.log("  car "+t.getId()+" AbsolutePosition="+parseInt(n.x)+","+parseInt(n.y))}}else if(t.m_State=a.kBlockState_Grabbed,t.m_TouchBeganPos=t.getAbsolutePosition(),a.DEBUG_MODE&&a.DEBUG_SHOW_POS){n=t.getAbsolutePosition();console.log("  car "+t.getId()+" AbsolutePosition="+parseInt(n.x)+","+parseInt(n.y))}},this.node),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=this.getComponent("BlockJS");r.s_CurrentTouchedBlock==t&&t.m_State==a.kBlockState_Grabbed&&t.m_OnBlockListener&&t.m_OnBlockListener.onMove(t,e)},this.node),e.on(cc.Node.EventType.TOUCH_END,function(e){var t=this.getComponent("BlockJS");r.s_CurrentTouchedBlock==t&&(t.m_State==a.kBlockState_Grabbed&&(t.m_State=a.kBlockState_Ungrabbed,t.m_OnBlockListener&&t.m_OnBlockListener.onDrop(t,e)),r.s_CurrentTouchedBlock=null)},this.node),e.on(cc.Node.EventType.TOUCH_CANCEL,function(e){var t=this.getComponent("BlockJS");r.s_CurrentTouchedBlock==t&&(t.m_State==a.kBlockState_Grabbed&&(t.m_State=a.kBlockState_Ungrabbed,t.m_OnBlockListener&&t.m_OnBlockListener.onDrop(t,e)),r.s_CurrentTouchedBlock=null)},this.node)}});t.exports=r,cc._RF.pop()},{MyLayoutManagerJS:"MyLayoutManagerJS",define:"define"}],ChooseStageJS:[function(e,t,n){"use strict";cc._RF.push(t,"096f3G0octBYZyrE6NnAuNL","ChooseStageJS");var i=e("GameDataManagerJS"),o=e("define");cc.Class({extends:cc.Component,properties:{m_MaxUnlockedStageIdx:0,m_StageCount:0,m_PageCount:0,m_Package:0,m_PageStageCount:o.MaxCustomsPass,subStagePrefab:{default:null,type:cc.Prefab},subPackgePrefab:{default:null,type:cc.Prefab},contextScrollView:{default:null,type:cc.ScrollView},audioControl:{default:null}},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1),e.alignWithScreen(),this.init(),this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl")},init:function(){this.m_Package=i.getInstance().getLatestPackage(),this.m_MaxUnlockedStageIdx=i.getInstance().getMaxUnlockedStage(this.m_Package),this.m_StageCount=i.getInstance().getStageCount(this.m_Package),this.m_PageCount=this.m_StageCount/this.m_PageStageCount,this.addStageBtn()},start:function(){},addStageBtn:function(){for(var e={stageId:0,startNum:0},t=0;t<this.m_StageCount;++t){e.stageId=t,e.startNum=i.getInstance().getCompleteStars(this.m_Package,t),this.m_MaxUnlockedStageIdx==t&&(e.startNum=0);var n=cc.instantiate(this.subStagePrefab);this.contextScrollView.content.addChild(n),n.getComponent("subStarTemplateJS").init(e);var o=new cc.Component.EventHandler;o.target=this.node,o.component="ChooseStageJS",o.handler="enterGameSceneCallback",o.customEventData=e.stageId,n.getComponent(cc.Button).clickEvents.push(o)}this.contextScrollView.scrollToPercentVertical(1,.1)},enterGameSceneCallback:function(e,t){this.playClick();e.target.getComponent(cc.Button);var n=t;n<=this.m_MaxUnlockedStageIdx?(console.log(" enterGameSceneCallback  unlcok =",n),this.playClick(),i.getInstance().setGameCurLevelNum(n),cc.director.loadScene("game")):console.log(" enterGameSceneCallback lock =",n)},saveScrollPos:function(){var e=this.contextScrollView.getContentPosition();i.getInstance().setStagePageScollPos(e)},_createPage:function(){},addSubPage:function(){},playClick:function(){this.audioControl&&this.audioControl.playClick()}}),cc._RF.pop()},{GameDataManagerJS:"GameDataManagerJS",define:"define"}],DialogGamePassJS:[function(e,t,n){"use strict";cc._RF.push(t,"63446rBEehM2Lvvji3ngkvb","DialogGamePassJS");var i=e("GameDataManagerJS"),o=e("define"),a=e("ShareManagerJS");e("AdsManagerJS");cc.Class({extends:cc.Component,properties:{m_dialog:cc.Node,m_dialog_bg:cc.Sprite,m_light_star:[cc.Sprite],m_next_btn:cc.Button,m_retry_btn:cc.Button,audioControl:{default:null}},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1),e.alignWithScreen(),this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl")},start:function(){},submitScoreButtonFunc:function(e){window.wx.postMessage({messageType:3,MAIN_MENU_NUM:o.RankKey,score:e})},showDialog:function(e){this.m_dialog.active=!0;for(var t=0;t<e;t++)this.m_light_star[t].node.opacity=255},clickNextBtn:function(){var e=i.getInstance().getGameCurLevelNum()+1,t=i.getInstance().getLatestPackage();this.playClick(),e<i.getInstance().getStageCount(t)?(i.getInstance().setGameCurLevelNum(e),cc.director.loadScene("game")):cc.director.loadScene("ChooseStageScene")},clickRetryBtn:function(){this.playClick(),cc.director.loadScene("game")},clickShareBtn:function(){this.playClick(),a.getInstance().onShareGame("sharePic")},playClick:function(){this.audioControl&&this.audioControl.playClick()}}),cc._RF.pop()},{AdsManagerJS:"AdsManagerJS",GameDataManagerJS:"GameDataManagerJS",ShareManagerJS:"ShareManagerJS",define:"define"}],GameDataManagerJS:[function(e,t,n){"use strict";cc._RF.push(t,"cc009A7UO1I/KIPK7iuUZ1i","GameDataManagerJS");var i=["dataA0","dataB0","dataC0","dataD0"],o=["\u7b80\u5355","\u4e2d\u7b49","\u56f0\u96be","\u4e13\u5bb6"],a=[{ch:"\u4e2d\u6587",en:"English"},{ch:"\u8f7d\u5165\u8fdb\u5ea6",en:"Loading"},{ch:"\u8fc7\u5173",en:"GOAL"},{ch:"\u63a7\u5236",en:"CONTROL"},{ch:"\u7eb5\u5411\u7684\u6c7d\u8f66",en:"VERTICAL CARS"},{ch:"\u6a2a\u5411\u7684\u6c7d\u8f66",en:"HORIZONTAL CARS"},{ch:"\u5173\u5361",en:"PUZZLE"},{ch:"\u7b80\u5355",en:"EASY"},{ch:"\u4e2d\u7b49",en:"MEDIUM"},{ch:"\u56f0\u96be",en:"HARD"},{ch:"\u4e13\u5bb6",en:"EXPERT"},{ch:"\u6c42\u52a9 \u9047\u5230\u56f0\u96be\u4e86 \u5feb\u6765\u5e2e\u5e2e\u6211",en:"asking for help"},{ch:" \u5173\u5361 ",en:" LEVEL "},{ch:"\u63d0\u793a  x",en:"HINT  x"},{ch:"\u64a4\u56de",en:"UNDO"},{ch:"\u91cd\u8bd5",en:"RETRY"},{ch:"\u6682\u505c",en:"PAUSE"},{ch:"\u548c\u597d\u53cb\u4e00\u8d77\u95ef\u5173\u5427",en:"play with friends "},{ch:"\u63d0\u793a",en:"HINT"}],c=e("LevelDataJS"),s=e("subBlockStatusDataJS"),r=e("define"),l=cc.Class({properties:{m_subPackageDatas:[c]}}),g=cc.Class({properties:{icon_url:"",appid:""}}),d=cc.Class({extends:cc.Component,properties:{gameName:"unBlock_",PACAKGE_COUNT:4,MaxCustomsPass:r.MaxCustomsPass,m_curLevelNum:0,curDate:0,gamePlayScene_isReload:!1,gameBox_pos:0,debugInfo:"debuginfo",m_PackageStageCount:[cc.Integer],m_PackageDatas:[l],m_gameBoxInfoList:[g]},ctor:function(){for(var e=0;e<this.getPackageCount();++e)this.m_PackageStageCount[e]=0,this.m_PackageDatas[e]=new l;this.curDate=new Date},statics:{_instance:null,getInstance:function(){return null===d._instance&&(this._instance=new d),d._instance}},start:function(){},adapt:function(e){var t=cc.view.getVisibleSize().height,n=cc.view.getVisibleSize().width;t/n>1.9?(e.scale=.8,e.alignWithScreen()):t/n<1.4&&(e.scale=1.05,e.alignWithScreen())},getPackageCount:function(){return this.PACAKGE_COUNT},getStageCount:function(e){if(e>=0&&e<this.getPackageCount()){var t=this.m_PackageDatas[e].m_subPackageDatas.length;return t<=0&&this.initPackageData(e),t>this.MaxCustomsPass?this.MaxCustomsPass:t}return 0},getMaxUnlockedStage:function(e){for(var t=0,n=this.getStageCount(e),i=0;i<n;i++)if(!this.isCompleted(e,i)&&++t==r.Default_Open)return i;return n-0},addCompletedStageCount:function(e){var t=this.getCompletedStageCount(e);if(t<this.getStageCount(e)){t++;var n=this.gameName+"package_"+e.toString();cc.sys.localStorage.setItem(n,t)}return t},getCompletedStageCount:function(e){var t=this.gameName+"package_"+e.toString(),n=cc.sys.localStorage.getItem(t);return null!=n&&0!=n.length||(n=0),parseInt(n)},getStageData:function(e,t){if((e>10&&(e-=10),e>=0&&e<this.getPackageCount())&&(0==this.m_PackageDatas[e].m_subPackageDatas.length&&this.initPackageData(e),t>=0&&t<this.m_PackageStageCount[e]))return this.m_PackageDatas[e].m_subPackageDatas[t];return null},saveGameState:function(e,t,n){this.isCompleted(e,t)||this.addCompletedStageCount(e);var i=this.gameName+"package"+e+"stage"+t;cc.sys.localStorage.setItem(i,n)},getGameState:function(e,t){var n=this.gameName+"package"+e+"stage"+t,i=cc.sys.localStorage.getItem(n);return null!=i&&0!=i.length||(i=-1),parseInt(i)},addGoals:function(){var e=this.getGoals()+1;r.goal=e;var t=this.gameName+"goals2";cc.sys.localStorage.setItem(t,e)},getGoals:function(){var e=this.gameName+"goals2",t=cc.sys.localStorage.getItem(e);return null!=t&&0!=t.length||(t=0),parseInt(t)},savegold:function(e){cc.sys.localStorage.setItem("gold",e),console.log("\u5f53\u524d\u91d1\u5e01",e)},getgold:function(){var e=cc.sys.localStorage.getItem("gold");return parseInt(e)},saveskinlock:function(e,t){var n="skin"+e;cc.sys.localStorage.setItem(n,t)},getskinlock:function(e){var t="skin"+e,n=cc.sys.localStorage.getItem(t);return parseInt(n)},savecarskin:function(e){cc.sys.localStorage.setItem("carskin",e)},getcarskin:function(){var e=cc.sys.localStorage.getItem("carskin");return parseInt(e)},isCompleted:function(e,t){return e>=0&&e<this.getPackageCount()&&t>=0&&t<this.m_PackageStageCount[e]&&this.getGameState(e,t)>0},getCompleteStars:function(e,t){return e>=0&&e<this.getPackageCount()&&t>=0&&t<this.m_PackageStageCount[e]?this.getGameState(e,t):0},getPackagesCompleteStars:function(e){for(var t=0,n=0,i=0;i<this.m_PackageStageCount[e];++i)(n=this.getCompleteStars(e,i))>0&&(t+=n);return t},getGameCompleteStars:function(){for(var e=this.getPackageCount(),t=0,n=0,i=0;i<e;++i)(n=this.getPackagesCompleteStars(i))>0&&(t+=n);return t},saveLatestPackage:function(e){var t=this.gameName+"latestPackage";cc.sys.localStorage.setItem(t,e.toString())},getLatestPackage:function(){var e=this.gameName+"latestPackage",t=cc.sys.localStorage.getItem(e);return null!=t&&0!=t.length||(t=0),parseInt(t)},initPackageData:function(e){var t="stageData/"+i[e],n=cc.RawAsset;cc.loader.loadRes(t,n,function(e,t){e?console.log(" err="+e):d.getInstance().parePackageData(t.json)}),this.m_PackageStageCount[e]=this.MaxCustomsPass},parePackageData:function(e){for(var t=e.StageId,n=0;n<e.StageData.length;++n){e.StageData[n].level;this.m_PackageDatas[t].m_subPackageDatas[n]=new c,this.m_PackageDatas[t].m_subPackageDatas[n].minmove=e.StageData[n].minmove,this.m_PackageDatas[t].m_subPackageDatas[n].count=e.StageData[n].count;for(var i=0;i<e.StageData[n].count;++i)this.m_PackageDatas[t].m_subPackageDatas[n].m_BlockData[i]=new s,this.m_PackageDatas[t].m_subPackageDatas[n].m_BlockData[i].coordinate=e.StageData[n].subBlockStatusData[i].coordinate,this.m_PackageDatas[t].m_subPackageDatas[n].m_BlockData[i].state=e.StageData[n].subBlockStatusData[i].state}console.log(t+", level.count="+e.StageData.length)},getPackgeStr:function(e){return e>=0&&e<o.length?o[e]:0},setGameCurLevelNum:function(e){this.m_curLevelNum=e},getGameCurLevelNum:function(){return this.m_curLevelNum},saveSelectLevelPos:function(e){var t=this.gameName+"SelectLevelPos";cc.sys.localStorage.setItem(t,e.toString())},getSelectLevelPos:function(){var e=this.gameName+"SelectLevelPos",t=cc.sys.localStorage.getItem(e);return null!=t&&0!=t.length||(t=0),parseInt(t)},setStagePageScollPos:function(e){var t=this.getLatestPackage(),n=this.gameName+"stagePageScollPosX"+t.toString();cc.sys.localStorage.setItem(n,e.x.toString()),n=this.gameName+"stagePageScollPosY"+t.toString(),cc.sys.localStorage.setItem(n,e.y.toString())},getStagePageScollPos:function(){var e=this.getLatestPackage(),t=this.gameName+"stagePageScollPosX"+e.toString(),n=cc.sys.localStorage.getItem(t);null!=n&&0!=n.length||(n=0),t=this.gameName+"stagePageScollPosY"+e.toString();var i=cc.sys.localStorage.getItem(t);return null!=i&&0!=i.length||(i=0),new cc.Vec2(parseInt(n),parseInt(i))},preLoadingdata:function(){for(var e=this.getPackageCount(),t=0;t<e;t++)this.getCompletedStageCount(t),this.getMaxUnlockedStage(t)},getIsFistPlay:function(){return!(d.getInstance().getGoals()>0)},getResName:function(e){var t="";return r.CUR_LANGUAGE_TYPE==r.LANGUAGE_CH?t="ch/":r.CUR_LANGUAGE_TYPE==r.LANGUAGE_EN&&(t="en/"),t+e},getTextById:function(e){if(e>=0&&e<a.length){var t="";return r.CUR_LANGUAGE_TYPE==r.LANGUAGE_CH?t=a[e].ch:r.CUR_LANGUAGE_TYPE==r.LANGUAGE_EN&&(t=a[e].en),t}},setGamePlaySceneReload:function(e){this.gamePlayScene_isReload=e},getGamePlaySceneReload:function(){return this.gamePlayScene_isReload},loadGameBoxWXInfo:function(){1},pushSubGameInfoToGameBoxList:function(e){this.m_gameBoxInfoList.push(e)},clearAllGameInfoToGameBoxList:function(e){this.m_gameBoxInfoList=[]},randGetGameInfoByGameBoxList:function(){if(!(this.m_gameBoxInfoList.length<=0))return++this.gameBox_pos,this.gameBox_pos=this.gameBox_pos%(this.m_gameBoxInfoList.length+1),this.m_gameBoxInfoList[this.gameBox_pos].appid==r.APP_ID&&(++this.gameBox_pos,this.gameBox_pos=this.gameBox_pos%(this.m_gameBoxInfoList.length+1)),console.log(" return pos = "+this.gameBox_pos),this.m_gameBoxInfoList[this.gameBox_pos];this.loadGameBoxWXInfo()},LoadGameInfoByDataJson:function(e){var t=JSON.parse(e),n=t.data.length;this.clearAllGameInfoToGameBoxList();for(var i=0;i<n;++i){var o=new g;o.icon_url=t.data[i].navigatorIcon,o.appid=t.data[i].appid,o.icon_url&&o.appid&&this.m_gameBoxInfoList.push(o)}console.log(" LoadGamesListDataJson size ="+this.m_gameBoxInfoList.length)},setDebugInfo:function(e){this.debugInfo=e},getDebugInfo:function(){return this.debugInfo},GetSendErrorMsgRequestStr:function(e){var t={gameName:this.gameName,msg:e,time:String(this.GetUtcStamp())};return JSON.stringify(t)},sendErrorMsg:function(e){var t;t="https://www.7cgames.cn:8070/sendErrorMsg";var n=this.GetSendErrorMsgRequestStr(e);wx.request({url:t,data:n,header:{"content-type":"application/json"},method:"POST",success:function(e){console.log(e)},fail:function(e){console.log(e.data)}})}});t.exports=d,cc._RF.pop()},{LevelDataJS:"LevelDataJS",define:"define",subBlockStatusDataJS:"subBlockStatusDataJS"}],GuessYouLike:[function(e,t,n){"use strict";cc._RF.push(t,"a7aceVLf3hIZLsGc+KfVpes","GuessYouLike");cc.Class({extends:cc.Component,properties:{iconImageArray:{default:[],type:cc.SpriteFrame},currentMiniGameList:[],nextIndex:0,moreGameList:[],settimeout:null,childIndex:-1},start:function(){this.initData(),this.initYouLike()},initData:function(){this.miniGameList=["wxd5a257d6ee2b8f91","wx515f44394eab5985","wxf49b0a26d9405058","wxea245f85c9673414","wx08beeb18dc512c2f","wxc4e628aa7caa2c07","wxd9589cd7117d0873","wx0af703a36035c60c","wx6616ae605010e605"];var e=cc.sys.localStorage.getItem("localMiniGameList_test15");if(e){var t=JSON.parse(e);this.currentMiniGameList=t}else this.currentMiniGameList=[0,1,2,3];var n=cc.sys.localStorage.getItem("localNextIndex_test15");this.nextIndex=n?parseInt(n):4},initYouLike:function(){for(var e=this,t=0;t<this.node.childrenCount;t++){var n=this.node.children[t];n.getComponent(cc.Sprite).spriteFrame=this.iconImageArray[this.currentMiniGameList[t]],n.hasEventListener("touchstart")||n.on("touchstart",function(){e.childIndex=this.getSiblingIndex(),e.settimeout&&clearTimeout(e.settimeout),e.settimeout=setTimeout(e.setTimeoutFun.bind(e),2e3),wx.navigateToMiniProgram&&wx.navigateToMiniProgram({appId:e.miniGameList[e.currentMiniGameList[e.childIndex]],path:""})},n)}},setTimeoutFun:function(){this.currentIndex=this.nextIndex%this.miniGameList.length;for(var e=0;e<this.currentMiniGameList.length;e++)this.currentMiniGameList.indexOf(this.currentIndex)>=0&&(this.nextIndex++,this.currentIndex=this.nextIndex%this.miniGameList.length);this.currentMiniGameList[this.childIndex]=this.currentIndex,this.initYouLike(),cc.sys.localStorage.setItem("localMiniGameList_test15",JSON.stringify(this.currentMiniGameList)),cc.sys.localStorage.setItem("localNextIndex_test15",this.nextIndex.toString())}}),cc._RF.pop()},{}],LevelDataJS:[function(e,t,n){"use strict";cc._RF.push(t,"ed25e5tecxETY4DUaQy2I9i","LevelDataJS");var i=e("subBlockStatusDataJS"),o=cc.Class({properties:{minmove:0,count:0,m_BlockData:[i]}});t.exports=o,cc._RF.pop()},{subBlockStatusDataJS:"subBlockStatusDataJS"}],LikeView:[function(e,t,n){"use strict";cc._RF.push(t,"977e6lKtxRNQY2Wi6Wlk6UQ","LikeView"),cc.Class({extends:cc.Component,properties:{idxList:{set:function(e){this.setIdxList(e)},get:function(){return this.getIdxList()}}},onLoad:function(){this.icons=this.node.children[0].children,this.len=Math.min(G.WECHAT.appIdList.length,G.WECHAT.moreGameIconList.length)},start:function(){},onClick:function(e){var t=this,n=e.target,i=this.idxList,o=n.getSiblingIndex(),a=i[o],c=G.WECHAT.appIdList[a%this.len];G.WECHAT.navigateToMiniProgram(c);var s=n.getComponent(cc.Button);s.interactable=!1;var r=this.getNextIdx(a),l=G.WECHAT.moreGameIconList[r%this.len];i[o]=r,cc.log("idxList:",i," lastIdx:",a," nextIdx:",r),this.idxList=i,this.scheduleOnce(function(){t.icons[o].getComponent(cc.Sprite).spriteFrame=l,s.interactable=!0},2)},getNextIdx:function(e){for(;this.idxList.indexOf(e)>-1;)e++,e%=this.len;return e},setIdxList:function(e){this._idxList=e,cc.sys.localStorage.setItem("idxList",JSON.stringify(e))},getIdxList:function(){if(this._idxList instanceof Array)return this._idxList;var e=JSON.parse(cc.sys.localStorage.getItem("idxList"));if(e)this._idxList=e;else{this._idxList=[];for(var t=0,n=this.icons.length;t<n;t++)this._idxList.push(t)}return this._idxList}}),cc._RF.pop()},{}],LoadingSceneJS:[function(e,t,n){"use strict";cc._RF.push(t,"237daPWmClBtJ5NwTNcz49u","LoadingSceneJS");var i=e("GameDataManagerJS"),o=e("define"),a=0,c=!1,s=!1;cc.Class({extends:cc.Component,properties:{wxlog_btn:cc.Node,loadingBar:{type:cc.ProgressBar,default:null},loadinglab:cc.Sprite,loadingpercent:cc.Label,titlebg:cc.Sprite,audioControl:{default:null}},onLoad:function(){var e=this,t=cc.find("Canvas").getComponent(cc.Canvas);if(cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(t.fitHeight=!1,t.fitWidth=!0):(t.fitHeight=!0,t.fitWidth=!1),t.alignWithScreen(),cc.game.on("impower",function(t){t&&(console.log("\u6388\u6743\u6210\u529f\uff01"),s=!0,e.wxlog_btn.active=!1,e.loadingBar.node.active=!0,e.loadinglab.node.active=!0,e.loadingpercent.node.active=!0,i.getInstance().preLoadingdata(),o.getgold()||(i.getInstance().savegold(o.money),cc.log("\u9996\u6b21\u52a0\u8f7d\u6e38\u620f\u83b7\u53d6\u5230\u5f53\u524d\u91d1\u5e01(\u5e94\u4e3a100)",i.getInstance().getgold())),o.getcarskin()||(cc.log("\u7b2c\u4e00\u6b21\u4fdd\u5b58\u76ae\u80a4"),i.getInstance().savecarskin(o.carskin)))}),this.getInfo(),this.loadingBar.progress=0,this.loadingBar.node.active=!1,this.loadinglab.node.active=!1,this.loadingpercent.node.active=!1,cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE){console.log("***iPhoneX**");var n=cc.view.getFrameSize();if(2436==n.width&&1125==n.height||1125==n.width&&2436==n.height){var a=this.node.getComponent(cc.Canvas);a.fitHeight=!0,a.fitWidth=!0}}},getInfo:function(){return new Promise(function(e,t){wx.getSetting({success:function(n){if(n.authSetting["scope.userInfo"])wx.getUserInfo({success:function(t){console.log("res",t),o.nickName=t.userInfo.nickName,o.avatarUrl=t.userInfo.avatarUrl,cc.game.emit("impower",!0),e()},fail:function(e){t()}});else if(wx.createUserInfoButton){var i=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:5e3,height:5e3,lineHeight:40,backgroundColor:"",color:"",textAlign:"center",fontSize:40,borderRadius:10}});i.onTap(function(){wx.getUserInfo({success:function(t){i.hide(),o.nickName=t.userInfo.nickName,o.avatarUrl=t.userInfo.avatarUrl,cc.game.emit("impower",!0),e()},fail:function(e){console.log(e),cc.game.emit("impower",!1),t()}})})}else wx.authorize({scope:"scope.userInfo",success:function(){wx.getUserInfo({success:function(t){o.nickName=t.userInfo.nickName,o.avatarUrl=t.userInfo.avatarUrl,e()},fail:function(e){t()}})}})}})})},start:function(){cc.director.preloadScene("main",cc.log("\u9884\u52a0\u8f7dmain")),console.log("    cc.winSize ="+cc.winSize),console.log("    cc.view.getVisibleSize() ="+cc.view.getVisibleSize()),console.log("    cc.view.getFrameSize() ="+cc.view.getFrameSize()),console.log("    cc.view.getDesignResolutionSize() ="+cc.view.getDesignResolutionSize());var e=cc.view.getDesignResolutionSize(),t=cc.winSize,n=t.width/e.width,i=t.height/e.height;console.log("    nodeX=   "+n+"  nodeY="+i)},update:function(e){this.updateload(e)},updateload:function(e){s&&(this.loadingBar.progress>=1&&0==c&&(c=!0,this.onLoadComplete()),a+=e,this.loadingBar.progress=a/3>1?1:a/3,this.loadingpercent.string=Math.floor(100*this.loadingBar.progress)+"%")},onLoadComplete:function(){cc.director.loadScene("main")}}),cc._RF.pop()},{GameDataManagerJS:"GameDataManagerJS",define:"define"}],MoreGameBtnView:[function(e,t,n){"use strict";cc._RF.push(t,"e34d3ql+gdNx6ohZ+1yfRFf","MoreGameBtnView"),cc.Class({extends:cc.Component,properties:{moreGameSprite:cc.Sprite},onLoad:function(){this.timer=0,this.count=0,this.len=G.WECHAT.appIdList.length},start:function(){this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.9,15),cc.rotateTo(.9,-15)))),this.moreGameSprite.spriteFrame=G.WECHAT.moreGameIconList[this.count%this.len]},update:function(e){0!==this.len&&(this.timer+=e,this.timer>3&&(this.timer=0,this.count++,this.moreGameSprite.spriteFrame=G.WECHAT.moreGameIconList[this.count%this.len]))},toMore:function(){G.AudioManager.play_btn();var e=G.WECHAT.appIdList[this.count%this.len];G.WECHAT.navigateToMiniProgram(e)}}),cc._RF.pop()},{}],MyLayoutManagerJS:[function(e,t,n){"use strict";cc._RF.push(t,"58470Q+/xhLFZTZh2B22tRW","MyLayoutManagerJS");var i=e("define"),o=cc.Class({extends:cc.Component,properties:{m_VisibleRect:cc.Rect,m_GridironSize:cc.Size,m_GridSize:cc.Size,m_AdMobHeight:0,m_GridironHPadding:0},start:function(){},statics:{_instance:null,getInstance:function(){return null===o._instance&&(this._instance=new o),o._instance}},ctor:function(){var e=cc.view.getVisibleSize(),t=cc.view.getVisibleOrigin();cc.log(e),this.m_AdMobHeight=0,this.m_GridironHPadding=8,this.m_VisibleRect=new cc.Rect(t.x,t.y,e.width,e.height),this.m_GridironSize=new cc.Size(i.GRIDIRON_WIDTH,i.GRIDIRON_WIDTH)},getVisibleRect:function(){return this.m_VisibleRect},getGridironSize:function(){return this.m_GridironSize},getGridSize:function(){return this.m_GridSize},setGridSize:function(e){this.m_GridSize=e},getAdMobHeight:function(){return this.m_AdMobHeight},getHorizontalGridironPadding:function(){return this.m_GridironHPadding}});t.exports=o,cc._RF.pop()},{define:"define"}],RankJS:[function(e,t,n){"use strict";cc._RF.push(t,"28568izkI1BUKVTJHdhwRxx","RankJS");var i=e("define");e("AdsManagerJS"),e("GameDataManagerJS");cc.Class({extends:cc.Component,name:"RankJS",properties:{rankingScrollView:cc.Sprite,mainNode:cc.Node},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);if(cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1),e.alignWithScreen(),cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE){var t=cc.view.getFrameSize();if(2436==t.width&&1125==t.height||1125==t.width&&2436==t.height){var n=this.node.getComponent(cc.Canvas);n.fitHeight=!0,n.fitWidth=!0}}},start:function(){},friendButtonFunc:function(e){window.wx.postMessage({messageType:1,MAIN_MENU_NUM:i.RankKey})},update:function(e){this._updateSubDomainCanvas()},_updateSubDomainCanvas:function(){if(this.tex&&void 0!=window.sharedCanvas&&wx.getOpenDataContext){var e=wx.getOpenDataContext().canvas;this.tex.initWithElement(e),this.tex.handleLoadedTexture(),this.rankingScrollView.spriteFrame=new cc.SpriteFrame(this.tex)}}}),cc._RF.pop()},{AdsManagerJS:"AdsManagerJS",GameDataManagerJS:"GameDataManagerJS",define:"define"}],RollingImage:[function(e,t,n){"use strict";cc._RF.push(t,"349ddDm12BHZr/ke3RAJ5Xv","RollingImage"),cc.Class({extends:cc.Component,properties:{iconImageArray:{default:[],type:cc.SpriteFrame},gameBox:cc.Node},onLoad:function(){this.initIconArray()},initIconArray:function(){var e=this;this.iconArray=[],["wxd5a257d6ee2b8f91","wx515f44394eab5985","wxf49b0a26d9405058","wxea245f85c9673414","wx08beeb18dc512c2f","wxc4e628aa7caa2c07","wxd9589cd7117d0873","wx0af703a36035c60c","wx6616ae605010e605"].forEach(function(t,n){var i={appid:t,spriteFrame:e.iconImageArray[n]};e.iconArray.push(i)})},start:function(){this.startID=0,this.target=this.node.getComponent("cc.Sprite");var e=cc.spawn(cc.scaleTo(1.5,1.1),cc.rotateTo(1.5,-30)),t=cc.spawn(cc.scaleTo(1.5,.9),cc.rotateTo(1.5,30)),n=cc.sequence(e,t,cc.callFunc(function(){this.iconArray.length>0&&(this.startID++,this.startID=this.startID%this.iconArray.length,this.target.spriteFrame=this.iconArray[this.startID].spriteFrame)},this));this.node.runAction(cc.repeatForever(n))},btn:function(){if(this.iconArray.length>0){var e=this.iconArray[this.startID].appid;console.log("zdk"+e),this.gameBox?this.gameBox.getComponent("exported-GameBoxInterface").show(e):(console.log("zdk"),wx.navigateToMiniProgram({appId:e,path:"",success:function(e){console.log("\u6253\u5f00\u6210\u529f")}}))}}}),cc._RF.pop()},{}],SelectDifficultSceneJS:[function(e,t,n){"use strict";cc._RF.push(t,"f56477rpwxOVo+9OeOgtTSL","SelectDifficultSceneJS");var i=e("GameDataManagerJS");cc.Class({extends:cc.Component,properties:{pageNum:0,stageDataArr:[],curPos:cc.Vec2,choosestage:cc.Node,count:{default:[],type:[cc.Node]},select:{default:[],type:[cc.Node]}},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1),e.alignWithScreen(),this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl"),this.content=cc.find("Canvas/DifficultPageView/view/content"),console.log("\u627e\u5230\u4e86",this.content),this.initStageData();for(var t=0;t<4;t++){var n=new cc.Component.EventHandler;if(n.target=this.node,n.component="SelectDifficultSceneJS",n.handler="enterGameStageCallback",n.customEventData=t,this.select[t].getComponent(cc.Button).clickEvents.push(n),cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE){var i=cc.view.getFrameSize();if(2436==i.width&&1125==i.height||1125==i.width&&2436==i.height){var o=this.node.getComponent(cc.Canvas);o.fitHeight=!0,o.fitWidth=!0}}}},initStageData:function(){for(var e=i.getInstance().getPackageCount(),t=0;t<e;t++){var n=i.getInstance().getMaxUnlockedStage(t),o=i.getInstance().getStageCount(t),a={passCount:0,stageCount:0};a.passCount=n,a.stageCount=o,this.stageDataArr[t]=a,this.count[t].getComponent(cc.Label).string=a.passCount+"/"+a.stageCount}},addSubPage:function(){this.contextPageView.addPage(this._createPage())},_createPage:function(){var e=cc.instantiate(this.pageTeample);e.position=new cc.v2(0,0);var t=this.pageNum,n={imageViewPath:"",CompletionLabel:"",id:0};n.imageViewPath=i.getInstance().getResName(["package_easy","package_medium","package_hard","package_expert"][t]),n.CompletionLabel=this.stageDataArr[t].passCount+"/"+this.stageDataArr[t].stageCount;var o=new cc.Component.EventHandler;return o.target=this.node,o.component="SelectDifficultSceneJS",o.handler="enterGameStageCallback",o.customEventData=this.pageNum,e.getComponentInChildren(cc.Button).clickEvents.push(o),e.getComponent("subDifficultTemplateJS").init(n),++this.pageNum,e},start:function(){},enterGameStageCallback:function(e,t){i.getInstance().saveLatestPackage(t),cc.find("Canvas/choosestage/stageScrollView/view/content").removeAllChildren(),this.playClick();e.target.getComponent(cc.Button);this.playClick(),this.choosestage.active=!0,cc.find("Canvas/choosestage").getComponent("ChooseStageJS").init()},savePageviewPos:function(){i.getInstance().saveSelectLevelPos(this.curPos.x)},back_btnClick:function(){this.playClick(),this.savePageviewPos(),cc.director.loadScene("main")},playClick:function(){this.audioControl&&this.audioControl.playClick()}}),cc._RF.pop()},{GameDataManagerJS:"GameDataManagerJS"}],ShareManagerJS:[function(e,t,n){"use strict";cc._RF.push(t,"3f924EIaoBK8rzYEMo+JCpt","ShareManagerJS");var i=cc.Class({extends:cc.Component,properties:{head_url:"",nick_name:"",id:0,info:""},statics:{_instance:null,show_count:0,getInstance:function(){return null===i._instance&&(this._instance=new i),i._instance}},ctor:function(){this.init()},start:function(){},init:function(){if("undefined"!=typeof FBInstant){this.nick_name=FBInstant.player.getName(),this.id=FBInstant.player.getID(),this.head_url=FBInstant.player.getPhoto();var e={contextID:FBInstant.context.getID(),contextType:FBInstant.context.getType(),locale:FBInstant.getLocale(),platform:FBInstant.getPlatform(),sdkVersion:FBInstant.getSDKVersion()};this.info="Context ID: "+e.contextID+"\nContext Type: "+e.contextType+"\nLocale: "+e.locale+"\nPlatform: "+e.platform+"\nSDKVersion: "+e.sdkVersion}else 1},onShareGame:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n="resources/share/sharePic4.png";if("undefined"!=typeof FBInstant)e=t.length>1?t:this.nick_name+" is asking for your help!",FBInstant.shareAsync({intent:"SHARE",image:this.getImgBase64(),text:e,data:{myReplayData:"..."}}).then(function(){console.log("continue with the game.")});else{for(var o=[],a=0;a<4;++a)o.push("sharePic"+(a+1)+".png");var c=[];c.push("\u6765\u4e0d\u53ca\u89e3\u91ca\u4e86\uff0c\u4e0d\u60f3\u8d76\u7d27\u4e0a\u8f66\u5417\uff1f"),c.push("\u6bd4\u6bd4\u770b\u8c01\u624d\u662f\u771f\u6b63\u7684\u8001\u53f8\u673a"),c.push("\u8001\u53f8\u673a\u5e26\u4f60\u5728\u8f66\u8f86\u4e2d\u7a7f\u68ad"),c.push("\u518d\u4e0d\u6765\u4f60\u7684\u6c7d\u8f66\u8981\u957f\u8349\u4e86"),c.push("\u901f\u5ea6\u4e0e\u6fc0\u60c59\u5373\u5c06\u6765\u88ad"),c.push("\u8981\u6bd4\u6bd4\u770b\u8c01\u6bd4\u8f83\u5feb\u5417\uff1f"),c.push("\u770b\u5230\u4ed6\u4eec\u9a7e\u8f66\u6280\u672f\u90a3\u4e48\u719f\u7ec3\uff0c\u6211\u4e5f\u5fcd\u4e0d\u4f4f\u60f3\u8bd5\u4e00\u628a"),c.push("\u53f8\u673a\u5f00\u4e0d\u597d\u8f66\u7adf\u7136\u662f\u5728\u73a9\u8fd9\u4e2a"),c.push("\u679c\u7136\u6ca1\u6709\u4eba\u80fd\u62e6\u4f4f\u6211\u7684\u8f66\uff01"),c.push("\u5c45\u7136\u6709\u8fd9\u6837\u4e00\u6b3e\u80fd\u591f\u8ba9\u4f60\u771f\u6b63\u4f53\u9a8c\u9a7e\u9a76\u4e50\u8da3\u7684\u6e38\u620f"),++i.show_count,t.length>1?t.indexOf("sharePic")>=0?(e=c[i.show_count%c.length],n="resources/share/"+o[i.show_count%o.length],console.log(" ShareManager.show_count "+i.show_count),console.log(" ShareManager.  "+e+" ,"+n)):(e=t,n="resources/share/sharePic4.png"):e="\u6c42\u52a9 \u9047\u5230\u56f0\u96be\u4e86 \u5feb\u6765\u5e2e\u5e2e\u6211",wx.shareAppMessage({title:e,imageUrl:wxDownloader.REMOTE_SERVER_ROOT+cc.url.raw(n),success:function(e){console.log("shareAppMessage\u6210\u529f")},fail:function(e){console.log("shareAppMessage\u5931\u8d25")}})}},getImgBase64:function(){if("undefined"!=typeof FBInstant){var e=cc.find("Canvas/sharePicSprite"),t=new cc.RenderTexture(800,400);t.begin(),e._sgNode.visit(),t.end();var n=document.createElement("canvas"),i=n.getContext("2d");if(n.width=800,n.height=400,cc._renderType===cc.game.RENDER_TYPE_CANVAS){var o=t.getSprite().getTexture().getHtmlElementObj();i.drawImage(o,0,0)}else if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var a=gl.createFramebuffer();gl.bindFramebuffer(gl.FRAMEBUFFER,a);var c=t.getSprite().getTexture()._glID;gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,c,0);var s=new Uint8Array(128e4);gl.readPixels(0,0,800,400,gl.RGBA,gl.UNSIGNED_BYTE,s),gl.bindFramebuffer(gl.FRAMEBUFFER,null);for(var r=0;r<400;r++){var l=399-r,g=new Uint8ClampedArray(s.buffer,800*l*4,3200),d=new ImageData(g,800,1);i.putImageData(d,0,r)}}return n.toDataURL("image/png")}},NavigateTo7cGameBox:function(){console.log("onBtnMoreGameClicked"),wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:"wxf9cf79aee55f7650",path:"",success:function(e){console.log("MoreGame \u6253\u5f00\u6210\u529f")}}):wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u8df3\u8f6c\u5c0f\u7a0b\u5e8f\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"})}});t.exports=i,cc._RF.pop()},{}],SkinJS:[function(e,t,n){"use strict";cc._RF.push(t,"dedc1s1nolJEbqRHS60Q3UZ","SkinJS");var i=e("define"),o=e("GameDataManagerJS");cc.Class({extends:cc.Component,properties:{freeButtondefault:cc.Node,bottombutton:cc.Node,conditionLabel:cc.Label,lockbtnLabel:cc.Label,goldunlockButton:cc.Node,toggle1:cc.Node,toggle2:cc.Node,toggle3:cc.Node,toggle4:cc.Node,toggle5:cc.Node,toggle6:cc.Node,toggle7:cc.Node,toggle8:cc.Node,toggle9:cc.Node,toggle10:cc.Node,toggle11:cc.Node,toggle12:cc.Node,car:{default:[],type:[cc.Node]},frame:{default:[],type:[cc.Node]},carSprite:cc.Node},onLoad:function(){var e=cc.find("Canvas").getComponent(cc.Canvas);cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(e.fitHeight=!1,e.fitWidth=!0):(e.fitHeight=!0,e.fitWidth=!1),e.alignWithScreen(),this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl");var t=o.getInstance().getcarskin();i.carskin=t;for(var n=0;n<12;n++){var a=o.getInstance().getskinlock(n);i.flag[n]=a}for(n=0;n<12;n++)void 0==i.flag[n]&&(cc.log("undefined"),i.flag[n]=0,o.getInstance().saveskinlock(n,i.flag[n])),cc.log("flag",n,i.flag[n]);if(this.updateskin(),this.togglecheck(),cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE){var c=cc.view.getFrameSize();if(2436==c.width&&1125==c.height||1125==c.width&&2436==c.height){var s=this.node.getComponent(cc.Canvas);s.fitHeight=!0,s.fitWidth=!0}}},updateskin:function(){var e=this;if(1==i.flag[1]){var t="car2";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[1].getComponent(cc.Sprite).spriteFrame=n,cc.log("2\u5df2\u89e3\u9501")})}if(1==!i.flag[1]){t="uncar2";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[1].getComponent(cc.Sprite).spriteFrame=n,cc.log("2\u672a\u89e3\u9501")})}if(1==i.flag[2]){t="car3";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[2].getComponent(cc.Sprite).spriteFrame=n,cc.log("3\u5df2\u89e3\u9501")})}if(1==!i.flag[2]){t="uncar3";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[2].getComponent(cc.Sprite).spriteFrame=n,cc.log("3\u672a\u89e3\u9501")})}if(1==i.flag[3]){t="car4";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[3].getComponent(cc.Sprite).spriteFrame=n,cc.log("4\u5df2\u89e3\u9501")})}if(1==!i.flag[3]){t="uncar4";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[3].getComponent(cc.Sprite).spriteFrame=n,cc.log("4\u672a\u89e3\u9501")})}if(1==i.flag[4]){t="car5";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[4].getComponent(cc.Sprite).spriteFrame=n,cc.log("5\u5df2\u89e3\u9501")})}if(1==!i.flag[4]){t="uncar5";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[4].getComponent(cc.Sprite).spriteFrame=n,cc.log("5\u672a\u89e3\u9501")})}if(1==i.flag[5]){t="car6";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[5].getComponent(cc.Sprite).spriteFrame=n,cc.log("6\u5df2\u89e3\u9501")})}if(1==!i.flag[5]){t="uncar6";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[5].getComponent(cc.Sprite).spriteFrame=n,cc.log("6\u672a\u89e3\u9501")})}if(1==i.flag[6]){t="car7";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[6].getComponent(cc.Sprite).spriteFrame=n,cc.log("7\u5df2\u89e3\u9501")})}if(1==!i.flag[6]){t="uncar7";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[6].getComponent(cc.Sprite).spriteFrame=n,cc.log("7\u672a\u89e3\u9501")})}if(1==i.flag[7]){t="car8";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[7].getComponent(cc.Sprite).spriteFrame=n,cc.log("8\u5df2\u89e3\u9501")})}if(1==!i.flag[7]){t="uncar8";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[7].getComponent(cc.Sprite).spriteFrame=n,cc.log("8\u672a\u89e3\u9501")})}if(1==i.flag[8]){t="car9";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[8].getComponent(cc.Sprite).spriteFrame=n,cc.log("9\u5df2\u89e3\u9501")})}if(1==!i.flag[8]){t="uncar9";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[8].getComponent(cc.Sprite).spriteFrame=n,cc.log("9\u672a\u89e3\u9501")})}if(1==i.flag[9]){t="car10";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[9].getComponent(cc.Sprite).spriteFrame=n,cc.log("10\u5df2\u89e3\u9501")})}if(1==!i.flag[9]){t="uncar10";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[9].getComponent(cc.Sprite).spriteFrame=n,cc.log("10\u672a\u89e3\u9501")})}if(1==i.flag[10]){t="car11";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[10].getComponent(cc.Sprite).spriteFrame=n,cc.log("11\u5df2\u89e3\u9501")})}if(1==!i.flag[10]){t="uncar11";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[10].getComponent(cc.Sprite).spriteFrame=n,cc.log("11\u672a\u89e3\u9501")})}if(1==i.flag[11]){t="car12";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[11].getComponent(cc.Sprite).spriteFrame=n,cc.log("12\u5df2\u89e3\u9501")})}if(1==!i.flag[11]){t="uncar12";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.car[11].getComponent(cc.Sprite).spriteFrame=n,cc.log("12\u672a\u89e3\u9501")})}},start:function(){var e=this;this.node.on("updatskin",function(){e.updateskin()})},update:function(e){},goldunlockButton_Click:function(e){if(this.playClick(),o.getInstance().getgold()<200)cc.log("money not enough!");else{if(this.toggle2.getComponent(cc.Toggle).isChecked){i.money-=200,o.getInstance().savegold(i.money);e=1;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle3.getComponent(cc.Toggle).isChecked){i.money-=200,o.getInstance().savegold(i.money);e=2;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle4.getComponent(cc.Toggle).isChecked){i.money-=300,o.getInstance().savegold(i.money);e=3;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle5.getComponent(cc.Toggle).isChecked){i.money-=300,o.getInstance().savegold(i.money);e=4;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle6.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=5;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle7.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=6;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle8.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=7;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle9.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=8;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle10.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=9;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle11.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=10;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}if(this.toggle12.getComponent(cc.Toggle).isChecked){i.money-=500,o.getInstance().savegold(i.money);e=11;i.flag[e]=1,o.getInstance().saveskinlock(e,i.flag[e]),this.node.emit("updateskin"),cc.log("=======falg",e,"=",o.getInstance().getskinlock(e))}}},togglecheck:function(){var e=this;if(this.toggle1.getComponent(cc.Toggle).isChecked){this.toggle7.getComponent(cc.Toggle).isChecked=!1,this.toggle2.getComponent(cc.Toggle).isChecked=!1,this.freeButtondefault.active=!0,this.bottombutton.active=!1,this.conditionLabel.string="\u9ed8\u8ba4\u76ae\u80a4",i.carskin=1,o.getInstance().savecarskin(i.carskin);var t="car1";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n})}else if(this.toggle2.getComponent(cc.Toggle).isChecked){t="car2";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a200\u91d1\u5e01",this.lockbtnLabel.string="200\uffe5\u89e3\u9501",1==i.flag[1]&&(i.carskin=2,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[1].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle3.getComponent(cc.Toggle).isChecked){t="car3";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a200\u91d1\u5e01",this.lockbtnLabel.string="200\uffe5\u89e3\u9501",1==i.flag[2]&&(i.carskin=3,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[2].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle4.getComponent(cc.Toggle).isChecked){t="car4";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a300\u91d1\u5e01",this.lockbtnLabel.string="300\uffe5\u89e3\u9501",1==i.flag[3]&&(i.carskin=4,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[3].getComponent(cc.Sprite).spriteFrame=n}))}else if(this.toggle5.getComponent(cc.Toggle).isChecked){t="car5";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a300\u91d1\u5e01",this.lockbtnLabel.string="300\uffe5\u89e3\u9501",1==i.flag[4]&&(i.carskin=5,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[4].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle6.getComponent(cc.Toggle).isChecked){t="car6";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[5]&&(i.carskin=6,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[5].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle7.getComponent(cc.Toggle).isChecked){t="car7";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[6]&&(i.carskin=7,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[6].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle8.getComponent(cc.Toggle).isChecked){t="car8";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[7]&&(i.carskin=8,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[7].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle9.getComponent(cc.Toggle).isChecked){t="car9";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[8]&&(i.carskin=9,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[8].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle10.getComponent(cc.Toggle).isChecked){t="car10";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[9]&&(i.carskin=10,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[9].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle11.getComponent(cc.Toggle).isChecked){t="car11";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[10]&&(i.carskin=11,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[10].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}else if(this.toggle12.getComponent(cc.Toggle).isChecked){t="car12";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.carSprite.getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!1,this.bottombutton.active=!0,this.conditionLabel.string="\u89e3\u9501\u6761\u4ef6\uff1a500\u91d1\u5e01",this.lockbtnLabel.string="500\uffe5\u89e3\u9501",1==i.flag[11]&&(i.carskin=12,o.getInstance().savecarskin(i.carskin),cc.loader.loadRes("frame",cc.SpriteFrame,function(t,n){e.frame[11].getComponent(cc.Sprite).spriteFrame=n}),this.freeButtondefault.active=!0,this.bottombutton.active=!1)}},playClick:function(){this.audioControl&&this.audioControl.playClick()}}),cc._RF.pop()},{GameDataManagerJS:"GameDataManagerJS",define:"define"}],WeChatFileSystemManager:[function(e,t,n){"use strict";cc._RF.push(t,"b6c79S98MJAU6hn1MQuW4II","WeChatFileSystemManager"),t.exports={init:function(e,t){this.fileSystemManager=wx.getFileSystemManager(),this.rootPath=""+wx.env.USER_DATA_PATH,this.urlRoot=e,this.gameName=t,console.log(this.gameName)},getFileName:function(e){for(var t=e.substring(e.indexOf(this.urlRoot),e.length);-1!=t.indexOf("/");){var n=t.indexOf("/");t=t.substring(0,n)+"-"+t.substring(n+1,t.length)}return t},getFile:function(e){var t=this.getFileName(e.url),n=this.rootPath+"/"+t,i=this;this.fileSystemManager.stat({path:n,success:function(i){i.stats.isDirectory(),i.stats.isFile()&&(console.log("\u8fd9\u662f\u6587\u4ef6\uff1a "+t),e.success(n))},fail:function(o){console.log(t+"\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u4e0b\u8f7d"),console.log(e.url+"?"+i.gameName),wx.downloadFile({url:e.url+"?"+i.gameName,success:function(t){console.log("\u4e0b\u8f7d\u6210\u529f"),wx.saveFile({tempFilePath:t.tempFilePath,filePath:n,success:function(t){console.log("\u4fdd\u5b58\u5230\u672c\u5730"),e.success(n)},fail:function(t){console.log(t),e.fail()}})},fail:function(t){console.log(t),e.fail()}})}})},removeFile:function(e){var t=this.getFileName(e.url),n=this.rootPath+"/"+t,i=this;this.fileSystemManager.stat({path:n,success:function(t){i.fileSystemManager.unlink({filePath:n,success:function(){e.success()},fail:function(e){console.log(e)}})},fail:function(t){console.log("\u672c\u5730\u4e0d\u5b58\u5728"),e.success()}})},showFile:function(){this.fileSystemManager.readdir({dirPath:""+wx.env.USER_DATA_PATH,success:function(e){console.log(e)},fail:function(){}})}},cc._RF.pop()},{}],define:[function(e,t,n){"use strict";cc._RF.push(t,"8387b/efCRElZuHF6/rLnFY","define"),t.exports={avatarUrl:"",nickName:"xx",AvatarUrl:"",kVersion_number:"1.0.6",APP_ID:"   ",goal:0,money:100,flag:[0],carskin:1,kOrientation_Horizontal:0,kOrientation_Vertical:1,kBlockState_Grabbed:2,kBlockState_Ungrabbed:3,GRIDIRON_WIDTH:6,Default_Hints:3,Default_Open:1,MaxCustomsPass:100,RankKey:"gameRank",kDirection_Left:1,kDirection_Down:2,kDirection_Right:3,kDirection_Up:4,GameMode_Relax:10,kChangeOtherIconTime:5,designSize:new cc.Vec2(750,1334),kMoveActionTag:3233828913,kBlinkActionTag:3233820753,DEBUG_MODE:!1,DEBUG_SCROLL_POS:!1,DEBUG_SHOW_POS:!1,DEBUG_SHOW_MAP:!1,DEBUG_HINTS:!1,DEBUG_NO_ADS:!1,DEBUG_TEST_ADS:!1,LANGUAGE_EN:1,LANGUAGE_CH:0,CUR_LANGUAGE_TYPE:0,music:!0,getgold:function(){var e=cc.sys.localStorage.getItem("gold");return parseInt(e)},getcarskin:function(){var e=cc.sys.localStorage.getItem("carskin");return parseInt(e)}},cc._RF.pop()},{}],"exported-Button":[function(e,t,n){"use strict";cc._RF.push(t,"446c5DPpLdLbJ0wUMc4V1MY","exported-Button"),cc.Class({extends:cc.Component,properties:{image:cc.Node,all:cc.Node},init:function(e){this.manager=e,this.all.active=!1},change:function(){switch(this.callback=null,this.manager.state){case"open":this.image.scaleX=-1,this.all.active=!0;break;case"close":this.image.scaleX=1,this.all.active=!1}},event:function(){var e=this;switch(this.manager.state){case"open":this.manager.hide({callback:function(){e.change()}});break;case"close":this.manager.show({callback:function(){e.change()}})}}}),cc._RF.pop()},{}],"exported-GameBoxInterface":[function(e,t,n){"use strict";cc._RF.push(t,"a5acfW+rHRCb7tV9nSpgqZ9","exported-GameBoxInterface"),cc.Class({extends:cc.Component,properties:{manage:cc.Node,gameName:""},onLoad:function(){this.manage.getComponent("exported-GameBox").init(this.gameName),cc.director.on("gameBoxShow",function(e){console.log(e),this.manage.getComponent("exported-GameBox").show({appid:e.appid,callback:function(){console.log("\u6709 appid \u7684\u6253\u5f00")}})}.bind(this))},show:function(e){this.manage.getComponent("exported-GameBox").show({appid:e,callback:function(){console.log("\u6253\u5f00\u5b8c\u6210")}})},hide:function(){this.manage.getComponent("exported-GameBox").hide({callback:function(){console.log("\u9690\u85cf\u5b8c\u6bd5")}})}}),cc._RF.pop()},{}],"exported-GameBox":[function(e,t,n){"use strict";cc._RF.push(t,"2bf219N2uZMd75HGUxO/tqf","exported-GameBox");var i=e("WeChatFileSystemManager"),o="NewGameBox";cc.Class({extends:cc.Component,properties:{itemBox:cc.Node,gamePrefab:cc.Prefab,gamePrefabScript:"",canvas:cc.Node,waiting:cc.Node,layer:cc.Node,version:cc.Label,btn:cc.Node},init:function(e){this.miniGameList={},this.miniGameList.wxd5a257d6ee2b8f91=!0,this.miniGameList.wx515f44394eab5985=!0,this.miniGameList.wxf49b0a26d9405058=!0,this.miniGameList.wxea245f85c9673414=!0,this.miniGameList.wx08beeb18dc512c2f=!0,this.miniGameList.wxc4e628aa7caa2c07=!0,this.miniGameList.wxd9589cd7117d0873=!0,this.miniGameList.wx0af703a36035c60c=!0,this.miniGameList.wx6616ae605010e605=!0,this.miniGameList.wxac5820bc06a3a893=!0;var t=cc.sys.localStorage.getItem(o);null!=t&&0!=t.length||cc.sys.localStorage.setItem(o,JSON.stringify({})),i.init("NewGameBox",e),this.startP=cc.v2(.5*-cc.winSize.width-220,50),this.endP=cc.v2(.5*this.canvas.width-.5*cc.winSize.width,50),this.canvas.position=this.startP,this.version.string="V 1.0.1",this.state="close",this.btn=this.btn.getComponent("exported-Button"),this.btn.init(this),this.initItemBox(),this.initJson(e)},initItemBox:function(){var e=cc.winSize;e.width/e.height>=2.1&&(console.log("x"),this.itemBox.getComponent("cc.Widget").left=120)},initJson:function(e){var t=this,n="https://www.7cgames.cn/transfer.php?url=https://www.7cgames.cn/GameRes/7CGamesBoxWX/NewGameBox/7cgamesBoxData.json?"+e;cc.loader.load(n,function(e,n){e?console.log(e):t.addList(n)})},addList:function(e){this.serverString=e,this.loadString=cc.sys.localStorage.getItem(o),this.newlist={},this.initList(),this.UpdateLocal()},UpdateLocal:function(){var e=this;console.log("\u6574\u4f53\u66f4\u65b0\u672c\u5730");var t=JSON.parse(this.serverString),n=JSON.parse(cc.sys.localStorage.getItem(o)),a=Object.keys(n);console.log("\u672c\u5730\u4e2a\u6570\uff1a",a.length),console.log("\u670d\u52a1\u5668\u4e2a\u6570\uff1a",t.data.length),a.forEach(function(t){e.newlist[t]?(e.newlist[t].logo!=n[t].logo&&i.removeFile({url:n[t].logo,success:function(){console.log("\u5220\u9664\u6210\u529f")}}),e.newlist[t].qrcode!=n[t].qrcode&&i.removeFile({url:n[t].qrcode,success:function(){console.log("\u5220\u9664\u6210\u529f")}})):(console.log("\u4e0d\u5b58\u5728"),console.log("\u5220\u9664\u65e7\u7684"+n[t].title+"\u672c\u5730\u6587\u4ef6"),i.removeFile({url:n[t].logo,success:function(){console.log("\u5220\u9664\u6210\u529f")}}),i.removeFile({url:n[t].qrcode,success:function(){console.log("\u5220\u9664\u6210\u529f")}}))}),console.log("\u6574\u4f53\u66f4\u65b0\u5b8c\u6210"),cc.sys.localStorage.setItem(o,JSON.stringify(this.newlist))},initList:function(){var e=this,t=this,n=JSON.parse(this.serverString).data,o=n.length,a=!1;wx.getSystemInfo({success:function(e){var t=e.platform;"ios"==t?(console.log("ios"),a=!0):"android"==t?console.log("android"):"devtools"==t?console.log("devtools"):"web"==t&&console.log("web")}});for(var c=function(o){var c=n[o];if(a&&!e.miniGameList[c.appid])return"continue";var s=cc.instantiate(t.gamePrefab);s.getComponent(t.gamePrefabScript).init({width:.2*cc.winSize.width,name:c.title,appid:c.appid,spriteFrame:null,style:c.style,qrcode:c.qrcode,btnCallback:t.btnCallback.bind(t)}),s.parent=t.itemBox,i.getFile({url:c.logo,success:function(e){cc.loader.load(e,function(e,n){var i=new cc.SpriteFrame(n);s.getComponent(t.gamePrefabScript).setSpriteFrame(i)})},fail:function(){console.log("\u52a0\u8f7d\u56fe\u7247\u5931\u8d25")}}),e.newlist[c.appid]={desc:c.desc,title:c.title,logo:c.logo,qrcode:c.qrcode}},s=0;s<o;s++)c(s)},btnCallback:function(e){console.log(e);var t=e.appid,n=e.qrcode,i=this;wx.navigateToMiniProgram?wx.navigateToMiniProgram({appId:t,path:"",success:function(){console.log("\u6253\u5f00\u6210\u529f")},fail:function(e){console.log(e),-1==e.errMsg.indexOf("fail cancel")&&i.showQR({qrcode:n})}}):(console.log("navigateToMiniProgram \u4f4e\u7248\u672c\u9002\u914d"),i.showQR({qrcode:n}))},showQR:function(e){i.getFile({url:e.qrcode,success:function(e){wx.previewImage({urls:[e],success:function(){console.log("wei xin previewImage success....")}})},fail:function(){console.log("\u52a0\u8f7d\u56fe\u7247\u5931\u8d25")}})},show:function(e){var t=this,n=cc.callFunc(function(){t.state="move"},this),o=cc.moveTo(.3,t.endP),a=cc.callFunc(function(){t.state="open",e.callback&&e.callback(),e.appid&&(t.newlist[e.appid]?(this.layer.getComponent("exported-Layer").init({appid:e.appid,title:t.newlist[e.appid].title,desc:t.newlist[e.appid].desc,qrcode:t.newlist[e.appid].qrcode,callback:t.btnCallback.bind(t)}),i.getFile({url:t.newlist[e.appid].logo,success:function(e){cc.loader.load(e,function(e,n){var i=new cc.SpriteFrame(n);t.layer.getComponent("exported-Layer").setGameLogo(i)})},fail:function(){console.log("\u52a0\u8f7d\u56fe\u7247\u5931\u8d25")}}),this.layer.active=!0):console.log("\u4e0d\u5b58\u5728"))},this),c=cc.sequence(n,o,a);"close"==this.state&&this.canvas.runAction(c)},hide:function(e){var t=cc.callFunc(function(){this.state="move"},this),n=cc.moveTo(.3,this.startP),i=cc.callFunc(function(){this.state="close",e.callback&&e.callback()},this),o=cc.sequence(t,n,i);"open"==this.state&&this.canvas.runAction(o)},readBtn:function(){i.showFile()},clearLocsl:function(){cc.sys.localStorage.setItem(o,JSON.stringify({}))},removeAllFile:function(){var e=cc.sys.localStorage.getItem(o),t=JSON.parse(e),n=Object.keys(t);console.log(n),n.forEach(function(e){i.removeFile({url:t[e].logo,success:function(){console.log("\u5220\u9664\u6210\u529f")}}),i.removeFile({url:t[e].qrcode,success:function(){console.log("\u5220\u9664\u6210\u529f")}})}),cc.sys.localStorage.setItem(o,JSON.stringify({}))}}),cc._RF.pop()},{WeChatFileSystemManager:"WeChatFileSystemManager"}],"exported-Icon":[function(e,t,n){"use strict";cc._RF.push(t,"819fbr06gVKhLHHm4zuCnkw","exported-Icon"),cc.Class({extends:cc.Component,properties:{gameName:cc.Label,gameSprite:cc.Sprite},init:function(e){this.appid=e.appid,this.gameName.string=e.name,this.gameSprite.spriteFrame=e.spriteFrame,this.qrcode=e.qrcode,this.btnCallback=e.btnCallback},setSpriteFrame:function(e){this.gameSprite.spriteFrame=e},btn:function(){this.btnCallback&&this.btnCallback({name:this.gameName.string,appid:this.appid,qrcode:this.qrcode})}}),cc._RF.pop()},{}],gameplay:[function(e,t,n){"use strict";cc._RF.push(t,"c1711O4rDFFybsuHfFH1G2N","gameplay");var i=e("define"),o=e("BlockJS"),a=e("GameDataManagerJS"),c=e("MyLayoutManagerJS"),s=(e("ShareManagerJS"),e("AdsManagerJS"),cc.Class({properties:{position:0,move:0,prev:0,index:0},statics:{count:0},ctor:function(e,t,n){this.position=e,this.move=t,this.prev=n,this.index=s.count++}}));cc.Class({extends:cc.Component,properties:{m_Gridiron:[0],m_pPanda:cc.Node,m_pBlocks:[cc.Node],m_History:[0],m_GridironSize:0,m_GameScaleY:1,m_GridSize:cc.Size,curDate:0,m_MinSteps:1,m_Package:0,m_stage:0,m_HintBlockDestCoordinate:0,m_CurrentHintIndex:-1,m_lastHints:0,m_HintMode:!1,m_SolutionMoves:[0],m_pHintBlock:{default:null,type:cc.Block},bg_sprite:cc.Sprite,menu_btn:cc.Button,back_menu_btn:cc.Button,stage_btn:cc.Button,main_btn:cc.Button,sub_gameTitle:cc.Sprite,stageIdLab:cc.Label,stageTitleLab:cc.Label,gold_btn:cc.Button,time:cc.node,timeLab:cc.Label,gamepass:cc.Node,gameCenter:cc.Node,gameBtnNode:cc.Node,m_pHint:cc.Button,m_pVideoHint:cc.Button,m_pRetry:cc.Button,m_pGuideHintDest:cc.Sprite,m_pGuideHintPointer:cc.Sprite,audio:{type:cc.AudioSource,default:null},audioClick:{type:cc.AudioSource,default:null},audioMove:{type:cc.AudioSource,default:null},audioComplete:{type:cc.AudioSource,default:null},audioControl:{default:null},m_kOffsetScale:1,m_DraggedMinX:0,m_DraggedMaxX:0,m_DraggedMinY:0,m_DraggedMaxY:0,gold_lab:cc.Label},onLoad:function(){var e=this;a.getInstance().adapt(this.node),this.curDate=new Date,this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl"),this.init(),this.node.on("updatemoney",function(){e.updatemoney()})},init:function(){for(var e=0;e<8;++e)this.m_Gridiron[e]=0;this.gold_lab.string=i.money,this.m_Package=a.getInstance().getLatestPackage(),this.m_stage=a.getInstance().getGameCurLevelNum(),this.stageIdLab.string=a.getInstance().getTextById(12)+(this.m_stage+1),this.m_GridironSize=c.getInstance().getGridironSize();var t=c.getInstance().getVisibleRect(),n=(t.origin,t.size,t.size.width,t.size.height,t.size.height,t.size.width,t.size.height,t.size.width-2*c.getInstance().getHorizontalGridironPadding()),o=n;this.m_GridironSize.width=this.m_GridironSize.height=i.GRIDIRON_WIDTH,this.m_GridSize.width=n/this.m_GridironSize.width,this.m_GridSize.height=o/this.m_GridironSize.height,c.getInstance().setGridSize(this.m_GridSize);var s=t.origin.x+.5*t.size.width+this.gameCenter.getPosition().x-.5*n,r=t.origin.y+.5*t.size.height+this.gameCenter.getPosition().y-.5*o-10;this.m_GameRect=new cc.Rect(s,r,n,o);var l=a.getInstance().getStageData(this.m_Package,this.m_stage);this.m_MinSteps=l.minmove;for(e=0;e<l.m_BlockData.length;e++){var g=l.m_BlockData[e].coordinate,d=l.m_BlockData[e].state;this.addBlock((240&g)>>4,15&g,32&d?i.kOrientation_Horizontal:i.kOrientation_Vertical,15&d,0!=(16&d))}if(cc.sys.isNative&&cc.sys.platform==cc.sys.IPHONE){var u=cc.view.getFrameSize();if(2436==u.width&&1125==u.height||1125==u.width&&2436==u.height){var h=this.node.getComponent(cc.Canvas);h.fitHeight=!0,h.fitWidth=!0}}},addBlock:function(e,t,n,o,a){var c=0;n==i.kOrientation_Horizontal?t=this.m_GridironSize.height-1-t:n==i.kOrientation_Vertical&&(t=this.m_GridironSize.height-o-t),c<=0&&(c=this.m_pBlocks.length+1);var s=new cc.Node("Sprite");s.addComponent(cc.Sprite),cc.find("Canvas/gameplay/gameCenterNode").addChild(s);var r=s.addComponent("BlockJS"),l={orientation:0,length:0,panda:!0};l.orientation=n,l.length=o,l.panda=a,s.getComponent("BlockJS").init(l),s.getComponent("BlockJS").setId(c);var g=new cc.Vec2(e,t);return!this.isOccupiedBlock(r,g)&&(this.m_pBlocks.push(s),s.getComponent("BlockJS").setOnBlockListener(this),s.getComponent("BlockJS").setPosition(this.getPosition(g)),s.getComponent("BlockJS").setGPosition(g),this.updateGridiron(),a&&(this.m_pPanda=s.getComponent("BlockJS")),!0)},isOccupiedPos:function(e,t){return!(e>=0&&t>=0&&e<this.m_GridironSize.width&&t<this.m_GridironSize.height)||0!=(this.m_Gridiron[t]&1<<e)},isOccupiedGpos:function(e){return this.isOccupiedPos(e.x,e.y)},isOccupiedBlock:function(e,t){var n=e.getOrientation();if(n==i.kOrientation_Horizontal){for(var o=new cc.Vec2(t.x,t.y),a=0;a<e.getLength();a++,o.x++)if(this.isOccupiedGpos(o))return!0}else if(n==i.kOrientation_Vertical)for(o=new cc.Vec2(t.x,t.y),a=0;a<e.getLength();a++,o.y++)if(this.isOccupiedGpos(o))return!0;return!1},updateGridiron:function(){for(var e=0;e<this.m_Gridiron.length;e++)this.m_Gridiron[e]=0;for(e=0;e<this.m_pBlocks.length;e++){var t=this.m_pBlocks[e].getComponent("BlockJS"),n=t.getOrientation(),o=t.getGPosition();if(o.x>=0&&o.y>=0)if(n==i.kOrientation_Horizontal)for(var a=0;a<t.getLength();a++)this.m_Gridiron[parseInt(o.y)]|=1<<parseInt(o.x+a);else if(n==i.kOrientation_Vertical)for(a=0;a<t.getLength();a++)this.m_Gridiron[parseInt(o.y+a)]|=1<<parseInt(o.x)}if(i.DEBUG_MODE&&i.DEBUG_SHOW_MAP){console.log("*************begin to print*************\n");var c=new Array;for(e=this.m_GridironSize.height-1;e>=0;e--){for(a=0;a<this.m_GridironSize.width;a++)c[a]=this.m_Gridiron[e]&1<<a?"x":".";c[parseInt(this.m_GridironSize.width)]=0;var s=new Array;for(a=0;a<this.m_GridironSize.width;a++)s+=c[a];console.log(e+" "+s)}console.log("*************end print*************\n")}},getPosition:function(e){return new cc.Vec2(this.m_GameRect.origin.x+e.x*this.m_GridSize.width,this.m_GameRect.origin.y+e.y*this.m_GridSize.height)},getGPosition:function(e){var t=(e.x-this.m_GameRect.origin.x)/this.m_GridSize.width;t=parseInt(t+(t>0?.5:-.5)),t=Math.min(Math.max(0,t),this.m_GridironSize.width-1);var n=(e.y-this.m_GameRect.origin.y)/this.m_GridSize.height;return n=parseInt(n+(n>0?.5:-.5)),n=Math.min(Math.max(0,n),this.m_GridironSize.height-1),new cc.Vec2(t,n)},onDragged:function(e,t){if(this.m_pHintBlock&&this.m_pHintBlock!=e)return!1;var n=e.getGPosition(),o=e.getOrientation();if(o==i.kOrientation_Horizontal){for(var a=n.x,c=n.x;!this.isOccupiedPos(a-1,n.y);)a--;for(;!this.isOccupiedPos(c+e.getLength(),n.y);)c++;this.m_DraggedMinX=this.m_GameRect.origin.x+a*this.m_GridSize.width,this.m_DraggedMaxX=this.m_GameRect.origin.x+c*this.m_GridSize.width,this.m_DraggedMinY=this.m_DraggedMaxY=e.getAbsolutePosition().y}else if(o==i.kOrientation_Vertical){for(var s=n.y,r=n.y;!this.isOccupiedPos(n.x,s-1);)s--;for(;!this.isOccupiedPos(n.x,r+e.getLength());)r++;this.m_DraggedMinX=this.m_DraggedMaxX=e.getAbsolutePosition().x,this.m_DraggedMinY=this.m_GameRect.origin.y+s*this.m_GridSize.height,this.m_DraggedMaxY=this.m_GameRect.origin.y+r*this.m_GridSize.height}var l=new cc.Vec2(-1,-1);if(e.setGPosition(l),this.updateGridiron(),i.DEBUG_MODE&&i.DEBUG_SHOW_POS){var g=t.getTouches()[0].getLocation();console.log("  car "+e.getId()+" start="+g.x+","+g.y),console.log(" game onDragged =")}return!0},onMove:function(e,t){var n=t.getTouches(),a=n[0],c=n[0].getLocation(),s=new cc.Vec2,r=new cc.Vec2;if(r.x=e.getTouchBeganPosition().x+a.getLocation().x-a.getStartLocation().x,r.y=e.getTouchBeganPosition().y+a.getLocation().y-a.getStartLocation().y,s=new cc.Vec2(Math.min(Math.max(this.m_DraggedMinX,r.x),this.m_DraggedMaxX),Math.min(Math.max(this.m_DraggedMinY,r.y),this.m_DraggedMaxY)),e.setPosition(s),i.DEBUG_MODE&&i.DEBUG_SHOW_POS&&(console.log(" game onMove ="),console.log("  car "+e.getId()+" move="+c.x+","+c.y)),c.x>e.getAbsolutePosition().x&&c.x<e.getAbsolutePosition().x+1.3*e.getContentSize().width&&c.y>e.getAbsolutePosition().y&&c.y<e.getAbsolutePosition().y+1.3*e.getContentSize().height);else{if(console.log("  \u8d85\u51fa\u77e9\u5f62\u8303\u56f4  "+c.x+" \uff0c"+c.y),o.s_CurrentTouchedBlock!=e)return;e.m_State==i.kBlockState_Grabbed&&(e.m_State=i.kBlockState_Ungrabbed,e.m_OnBlockListener&&this.onDrop(e,t)),o.s_CurrentTouchedBlock=null}},onDrop:function(e,t){this.setBlockPosition(e,e.getAbsolutePosition());var n=new cc.Vec2;if(n.x=e.getGPosition().x-e.getTouchBeganGPosition().x,n.y=e.getGPosition().y-e.getTouchBeganGPosition().y,n.x||n.y){var o=e.getId()<<24|(e.getOrientation()==i.kOrientation_Horizontal?parseInt(n.x+10):parseInt(n.y+10))<<16|this.m_CurrentHintIndex+1;this.m_History.unshift(o);this.m_History.length;if(i.DEBUG_MODE&&(console.log(" getId=  "+e.getId()+" x= "+n.x+" y= "+n.y+" m_CurrentHintIndex="+this.m_CurrentHintIndex),console.log(" temp=  "+o)),this.m_pHintBlock&&this.m_pHintBlock==e)(this.m_pHintBlock.getOrientation()==i.kOrientation_Horizontal?this.m_pHintBlock.getGPosition().x:this.m_pHintBlock.getGPosition().y)==this.m_HintBlockDestCoordinate?this.showHint(this.m_CurrentHintIndex+1):this.updateHint()}if(this.playMove(),this.m_pPanda&&e==this.m_pPanda&&this.checkComplete()&&(this.playComplete(),this.onGameComplete()),i.DEBUG_MODE&&i.DEBUG_SHOW_POS){console.log(" game onDrop =");var a=t.getTouches()[0].getLocation();console.log("  car "+e.getId()+" end="+a.x+","+a.y)}},setBlockPosition:function(e,t){i.DEBUG_MODE&&i.DEBUG_SHOW_POS&&console.log("  setBlockPosition= "+parseInt(t.x)+","+parseInt(t.y));var n=this.getGPosition(t);this.isOccupiedBlock(e,n)?e.setPosition(this.getPosition(e.getLastGPosition())):(e.setPosition(this.getPosition(n)),e.setGPosition(n),this.updateGridiron())},checkComplete:function(){return!(!this.m_pPanda||this.m_pPanda.getGPosition().x+this.m_pPanda.getLength()!=this.m_GridironSize.width)},onGameComplete:function(){this.m_HintMode&&(this.m_pGuideHintPointer.node.stopActionByTag(i.kMoveActionTag),this.m_pGuideHintDest.node.stopAllActions(),this.m_pGuideHintDest.node.active=!1,this.m_pGuideHintPointer.node.active=!1,this.m_HintMode=!1),i.money+=5,a.getInstance().savegold(i.money),this.node.emit("updatemoney");var e=a.getInstance().getGameState(this.m_Package,this.m_stage),t=this.m_History.length;if(i.GameMode_Relax==i.GameMode_Relax){var n=t<=this.m_MinSteps+3?3:t<=this.m_MinSteps+10?2:1,o=e;i.DEBUG_MODE&&console.log("winStarNum = "+n),n>o&&a.getInstance().saveGameState(this.m_Package,this.m_stage,n)}this.showCompleteView(n),a.getInstance().addGoals(),i.DEBUG_MODE&&console.log("play counts = "+i.goals)},showCompleteView:function(e){this.playComplete(),cc.find("Canvas/DialogGamePass").getComponent("DialogGamePassJS").showDialog(e),console.log("popGamePassDialog ")},start:function(){1==a.getInstance().getIsFistPlay()&&(cc.log("\u7b2c\u4e00\u6b21\u73a9"),0==a.getInstance().getGamePlaySceneReload()?(a.getInstance().setGamePlaySceneReload(!0),cc.director.loadScene("game")):this.scheduleOnce(function(){this.startFindSolution()},.5))},startFindSolution:function(){var e=new Array,t=new Set;this.m_SolutionMoves=new Array;for(var n=this.m_GridironSize.width,o=this.m_GridironSize.height,a=0,c=0,r=this.m_pBlocks.length,l=0,g=1,d=!1,u=0;u<r;u++,g*=n){l+=((S=this.m_pBlocks[u].getComponent("BlockJS")).getOrientation()==i.kOrientation_Horizontal?parseInt(S.getGPosition().x):parseInt(S.getGPosition().y))*g}var h=new s(l,0,null);e.push(h),t.add(l);for(var m=new Array;a<e.length;){for(var f=(D=e[a++]).move>0?D.move/1e3:-1,p=0;p<n*o;p++)m[p]=0;g=1;for(u=0;u<r;u++,g*=n){var S=this.m_pBlocks[u].getComponent("BlockJS"),_=parseInt(D.position%(g*n)/g);if(S.getOrientation()==i.kOrientation_Horizontal)for(var v=S.getGPosition().y*n,k=_;k<=_+S.getLength()-1;k++)m[v+k]=S.getId();else for(k=_;k<=_+S.getLength()-1;k++)m[parseInt(S.getGPosition().x+k*n)]=S.getId()}g=1;for(u=0;u<r;u++,g*=n){var C,I;if((S=this.m_pBlocks[u].getComponent("BlockJS")).getId()!=f)if(S.getOrientation()==i.kOrientation_Horizontal?(C=parseInt(D.position%(g*n)/g),I=parseInt(S.getGPosition().y)):(C=parseInt(S.getGPosition().x),I=parseInt(D.position%(g*n)/g)),S.getOrientation()==i.kOrientation_Horizontal){v=I*n+C;for(var w=0,b=1;C+b+S.getLength()-1<n&&0==m[v+b+S.getLength()-1];b++){S.getLength(),m[v+b+S.getLength()-1];var y=D.position+g*b;if(0==t.has(y)){var x=new s(y,this.encodeMove(S.getId(),i.kDirection_Right,C+b),D);e.push(x),t.add(y),w=b}}if(this.m_pPanda&&S==this.m_pPanda&&C+w+S.getLength()==n){c=e.length-1,d=!0;break}for(b=-1;C+b>=0&&0==m[v+b];b--){y=D.position+g*b;if(0==t.has(y)){x=new s(y,this.encodeMove(S.getId(),i.kDirection_Left,C+b),D);e.push(x),t.add(y)}}}else{for(v=I*n+C,b=1;I+b+S.getLength()-1<o&&0==m[v+(b+S.getLength()-1)*n];b++){y=D.position+g*b;if(0==t.has(y)){x=new s(y,this.encodeMove(S.getId(),i.kDirection_Up,I+b),D);e.push(x),t.add(y)}}for(b=-1;I+b>=0&&0==m[v+b*n];b--){y=D.position+g*b;if(0==t.has(y)){x=new s(y,this.encodeMove(S.getId(),i.kDirection_Down,I+b),D);e.push(x),t.add(y)}}}}if(1==d)break}var G=new Array;if(c>=0){for(var D=e[c];D;)0!=D.move&&(G.push(D.move),this.m_SolutionMoves.unshift(D.move)),D=D.prev;G.length;for(p=0;p<this.m_SolutionMoves.length;++p);this.m_SolutionMoves.length>0&&this.scheduleOnce(function(){this.startShowHints()},0)}},encodeMove:function(e,t,n){return 1e3*e+100*t+n},updatemoney:function(){this.gold_lab.string=i.money},startShowHints:function(e){this.showHint(0)},showHint:function(e){if(e<0)return this.m_HintMode=!1,this.m_pGuideHintDest&&(this.m_pGuideHintDest.node.active=!1,this.m_pGuideHintPointer=null),this.m_pGuideHintPointer&&(this.m_pGuideHintPointer.node.active=!1,this.m_pGuideHintPointer=null),this.m_SolutionMoves.clear(),this.m_HintBlockDestCoordinate=0,void(this.m_CurrentHintIndex=e);if(this.m_HintMode=!0,e<parseInt(this.m_SolutionMoves.length))for(var t=this.m_SolutionMoves[e],n=parseInt(t/1e3),o=parseInt(t%100),a=0;a<this.m_pBlocks.length;a++){var s=this.m_pBlocks[a].getComponent("BlockJS");if(s.getId()==n){if(this.m_pHintBlock=s,this.m_HintBlockDestCoordinate=o,this.m_CurrentHintIndex=e,this.m_pGuideHintPointer.node.active=!0,this.m_pGuideHintDest.node.active=!0,null==this.m_pGuideHintPointer.spriteFrame){var r=new cc.blink(1,1);r.setTag(i.kBlinkActionTag),this.m_pGuideHintDest.node.runAction(new cc.repeatForever(r)),this.m_pGuideHintPointer.node.setScale(1,c.getInstance().getVisibleRect().size.height/i.designSize.height);var l=this;cc.loader.loadRes("playGamePic/hint_pointer",cc.SpriteFrame,function(e,t){l.m_pGuideHintPointer.spriteFrame=t})}this.updateHint();break}}},getHintDestFrameName:function(e,t){return e==i.kOrientation_Horizontal?2==t?"bk_hint_dest2h":"bk_hint_dest3h":2==t?"bk_hint_dest2v":"bk_hint_dest3v"},updateHint:function(){var e=parseInt(this.m_pHintBlock.getOrientation()==i.kOrientation_Horizontal?this.m_HintBlockDestCoordinate-this.m_pHintBlock.getGPosition().x:this.m_HintBlockDestCoordinate-this.m_pHintBlock.getGPosition().y),t=this.m_pHintBlock.getGPosition(),n=0;this.m_pHintBlock.getOrientation()==i.kOrientation_Horizontal?(t.x+=e,n=e>0?0:180):(t.y+=e,n=e>0?270:90);var o=cc.view.getVisibleSize();this.m_pGuideHintDest.node.stopActionByTag(i.kBlinkActionTag);var a=cc.hide();this.m_pGuideHintDest.node.runAction(a);var s=this.getPosition(t),r=new cc.Vec2(this.m_pHintBlock.getContentSize().width*this.m_pHintBlock.getScaleX()/2,this.m_pHintBlock.getContentSize().height*this.m_pHintBlock.getScaleY()/2),l="playGamePic/"+this.getHintDestFrameName(this.m_pHintBlock.getOrientation(),this.m_pHintBlock.getLength()),g=this;cc.loader.loadRes(l,cc.SpriteFrame,function(e,t){g.m_pGuideHintDest.spriteFrame=t});var d=new cc.Vec2(c.getInstance().getGridSize().width/95,c.getInstance().getGridSize().height/95);this.m_pGuideHintDest.node.setScale(d),this.m_pGuideHintDest.node.setPosition(new cc.Vec2(s.x+r.x-.5*o.width,s.y+r.y-.5*o.height));var u=cc.show();this.m_pGuideHintDest.node.runAction(u);var h=new cc.blink(1,1);h.setTag(i.kBlinkActionTag),this.m_pGuideHintDest.node.runAction(new cc.repeatForever(h));var m=new cc.Vec2(this.m_pHintBlock.getAbsolutePosition().x+r.x-.5*o.width,this.m_pHintBlock.getAbsolutePosition().y+r.y-.5*o.height);this.m_pGuideHintPointer.node.runAction(u.clone()),this.m_pGuideHintPointer.node.setPosition(m),this.m_pGuideHintPointer.node.setRotation(n),this.m_pGuideHintPointer.node.stopActionByTag(i.kMoveActionTag),this.m_pGuideHintPointer.node.opacity=255;var f=new cc.moveTo(.7,this.m_pGuideHintDest.node.getPosition()),p=new cc.fadeOut(.5),S=new cc.fadeIn(0),_=new cc.moveTo(0,this.m_pGuideHintPointer.node.getPosition()),v=new cc.repeatForever(cc.sequence(f,p,S,_));v.setTag(i.kMoveActionTag),this.m_pGuideHintPointer.node.runAction(v)},getHintCallback:function(){this.playClick(),o.getCurrentTouchedBlock()||this.m_HintMode||!a.getInstance().getgold()>0||(this.scheduleOnce(function(){this.startFindSolution()},0),i.money-=50,a.getInstance().savegold(i.money),this.node.emit("updatemoney"))},gold_btnClick:function(){this.playClick(),i.money+=50,a.getInstance().savegold(i.money),this.node.emit("updatemoney")},gold_btnCallback:function(){i.money+=50,a.getInstance().savegold(i.money),this.node.emit("updatemoney")},videohint_btnClick:function(){this.playClick(),this.scheduleOnce(function(){this.startFindSolution()},0)},videohint_btnCallback:function(){this.scheduleOnce(function(){this.startFindSolution()},0)},add_touch_listeners:function(){var e=cc.find("Canvas");e.on(cc.Node.EventType.TOUCH_START,function(e){var t=e.getTouches()[0].getLocation();console.log("  touch  start="+t.x+","+t.y)},this.node),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=e.getTouches()[0].getLocation();console.log("  touch  move="+t.x+","+t.y)},this.node),e.on(cc.Node.EventType.TOUCH_END,function(e){var t=e.getTouches()[0].getLocation();console.log("  touch  end="+t.x+","+t.y)},this.node)},update:function(e){var t=parseInt(this.getPassTime()),n=0,i=0;t<60?(t=t>9?t:"0"+t,this.timeLab.getComponent(cc.Label).string="00:"+t):t>=60&t<3600?(n=parseInt(t/60),t=(t=parseInt(t%60))>9?t:"0"+t,n=n>9?n:"0"+n,this.timeLab.getComponent(cc.Label).string=n+":"+t):t>=3600&&(i=parseInt(t/3600),n=parseInt(t%3600/60),t=(t=parseInt(t%3600%60))>9?t:"0"+t,n=n>9?n:"0"+n,i=i>9?i:"0"+i,this.timeLab.getComponent(cc.Label).string=i+":"+n+":"+t)},getNowTime:function(){var e=new Date;return cc.log(e),e.getTime()},getPassTime:function(){return(new Date-this.curDate)/1e3},menu_btnClick:function(){this.playClick(),this.menu_btn.node.active=!1,this.back_menu_btn.node.active=!0,this.main_btn.node.active=!0,this.stage_btn.node.active=!0,this.sub_gameTitle.node.active=!1},back_menu_btnClick:function(){this.playClick(),this.menu_btn.node.active=!0,this.sub_gameTitle.node.active=!0,this.back_menu_btn.node.active=!1,this.main_btn.node.active=!1,this.stage_btn.node.active=!1},stage_btnClick:function(){this.playClick(),cc.director.loadScene("ChooseStageScene")},main_btnClick:function(){this.playClick(),cc.director.loadScene("main")},retryCallback:function(){this.playClick(),cc.director.loadScene("game")},playClick:function(){this.audioControl&&this.audioControl.playClick()},playMove:function(){this.audioControl&&this.audioControl.playMove()},playComplete:function(){this.audioControl&&this.audioControl.playComplete()}}),cc._RF.pop()},{AdsManagerJS:"AdsManagerJS",BlockJS:"BlockJS",GameDataManagerJS:"GameDataManagerJS",MyLayoutManagerJS:"MyLayoutManagerJS",ShareManagerJS:"ShareManagerJS",define:"define"}],main:[function(e,t,n){"use strict";cc._RF.push(t,"eacc3/Mc21Pf70wEEVJgFxk","main");var i=e("define"),o=(e("AdsManagerJS"),e("ShareManagerJS")),a=e("GameDataManagerJS");cc.Class({extends:cc.Component,properties:{background:cc.Sprite,title_bg:cc.Sprite,gold_btn:cc.Button,audio_btn:cc.Button,share_btn:cc.Button,moregame_btn:cc.Button,begin_btn:cc.Button,rank_btn:cc.Button,skin_btn:cc.Button,rankNode:cc.Node,skinNode:cc.Node,gold_lab:cc.Label,gameBox:cc.Node},onLoad:function(){var e=this,t=cc.find("Canvas").getComponent(cc.Canvas);cc.winSize.width/cc.winSize.height<=(750/1334).designScreen?(t.fitHeight=!1,t.fitWidth=!0):(t.fitHeight=!0,t.fitWidth=!1),t.alignWithScreen();var n=cc.view.getDesignResolutionSize(),o=cc.director.getWinSize(),c=(o.width,n.width,o.height,n.height,cc.view.getVisibleSize()),s=c.width/c.height,r=s-750/1334;if(console.log("  k= "+750/1334+" kWH= "+s),r>0);else{var l=this.begin_btn.node.getPosition();l.y-=400*-r,this.begin_btn.node.setPosition(l),console.log("begin_btn - "+400*-r)}if(cc.sys.platform==cc.sys.IPHONE){var g=cc.view.getFrameSize();if(2436==g.width&&1125==g.height||1125==g.width&&2436==g.height){var d=this.node.getComponent(cc.Canvas);d.fitHeight=!0,d.fitWidth=!0}}this.audioControl=cc.find("AudioControlNode").getComponent("AudioSourceControl"),this.mute=cc.find("AudioControlNode/AudioRes/audio").getComponent(cc.AudioSource);var u=a.getInstance().getcarskin();i.carskin=u;var h=a.getInstance().getgold();i.money=h,this.gold_lab.string=i.money,this.node.on("updatemoney",function(){e.updatemoney()})},updatemoney:function(){this.gold_lab.string=i.money},start:function(){this.rankNode.active=!1,this.skinNode.active=!1,this.playAudio();var e=a.getInstance().getGameCompleteStars();this.submitScoreButtonFunc(e)},submitScoreButtonFunc:function(e){console.log(" main  \u63d0\u4ea4 : "+e+" key= "+i.RankKey),window.wx.postMessage({messageType:3,MAIN_MENU_NUM:i.RankKey,score:e})},update:function(e){},gold_btnClick:function(){this.playClick(),i.money+=50,a.getInstance().savegold(i.money),this.node.emit("updatemoney")},gold_btnCallback:function(){i.money+=50,a.getInstance().savegold(i.money),this.node.emit("updatemoney")},audio_btnClick:function(){if(this.playClick(),1==i.music){i.music=!1,this.mute.volume=0;var e=this,t="mute";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){e.audio_btn.normalSprite=n,e.audio_btn.pressedSprite=n,e.audio_btn.hoverSprite=n})}else{i.music=!0,this.mute.volume=1;e=this,t="music";cc.loader.loadRes(t,cc.SpriteFrame,function(t,n){t?cc.log("Completed with "+t.length+" errors"):(e.audio_btn.normalSprite=n,e.audio_btn.pressedSprite=n,e.audio_btn.hoverSprite=n)})}},other_btnClick:function(){this.playClick()},moregame_btnClick:function(){this.playClick()},begin_btnClick:function(){this.playClick(),cc.director.loadScene("ChooseStageScene")},share_btnClick:function(){this.playClick(),this.main=cc.find("Canvas/main");a.getInstance().getTextById(17);o.getInstance().onShareGame("sharePic")},rank_btnClick:function(){this.playClick(),this.main=cc.find("Canvas/main"),this.main.active=!1,this.rank=cc.find("Canvas/rankNode"),this.rank.active=!0},skin_btnClick:function(){this.main=cc.find("Canvas/main"),this.main.active=!1,this.skin=cc.find("Canvas/skinNode"),this.skin.active=!0,this.playClick()},back_btnClick:function(){cc.director.loadScene("main"),this.playClick()},playClick:function(){this.audioControl&&this.audioControl.playClick()},playAudio:function(){this.audioControl&&this.audioControl.playAudio()}}),cc._RF.pop()},{AdsManagerJS:"AdsManagerJS",GameDataManagerJS:"GameDataManagerJS",ShareManagerJS:"ShareManagerJS",define:"define"}],subBlockStatusDataJS:[function(e,t,n){"use strict";cc._RF.push(t,"30a0706qahIOoSd2OBQG5xk","subBlockStatusDataJS");var i=cc.Class({properties:{coordinate:"",state:""}});t.exports=i,cc._RF.pop()},{}],subDifficultTemplateJS:[function(e,t,n){"use strict";cc._RF.push(t,"9ef08nt9xNPkpRu06lynxwu","subDifficultTemplateJS"),cc.Class({extends:cc.Component,properties:{id:0,imageViewBtn:cc.Button,CompletionLabel:cc.Label},start:function(){},init:function(e){var t;this.id=e.id,this.CompletionLabel.string=e.CompletionLabel;var n=this;t=e.imageViewPath,cc.loader.loadRes(t,cc.SpriteFrame,function(e,t){e?cc.log("Completed with "+e.length+" errors"):(console.log(" \u52a0\u8f7d\u5b8c\u6210\uff01"+t._name+"  "),n.imageViewBtn.normalSprite=t,n.imageViewBtn.pressedSprite=t,n.imageViewBtn.hoverSprite=t)})}}),cc._RF.pop()},{}],subStarTemplateJS:[function(e,t,n){"use strict";cc._RF.push(t,"0d83fDxMppIjJItpjk7cFKa","subStarTemplateJS"),cc.Class({extends:cc.Component,properties:{stageId:0,startNum:0,stageBtn:cc.Button,stageIdLab:cc.Label,stars:[cc.Sprite]},start:function(){},init:function(e){var t=e.stageId+1,n=this,i=e.startNum;if(e.startNum>=0){this.stageIdLab.string=t<10?"0"+t:t;var o="star";cc.loader.loadRes(o,cc.SpriteFrame,function(e,t){if(e)cc.log("\u6ce8\u610ferr:"+e.length+"errors");else for(var o=0;o<i;o++)n.stars[o].spriteFrame=t}),o=e.startNum>0?"btn_stagePlayed":"btn_stagePlaying",cc.loader.loadRes(o,cc.SpriteFrame,function(e,t){e?cc.log("Completed with"+e.length+"errors"):(n.stageBtn.normalSprite=t,n.stageBtn.pressedSprite=t,n.stageBtn.hoverSprite=t)})}else{o="btn_stageLock";cc.loader.loadRes(o,cc.SpriteFrame,function(e,t){e?cc.log("Completed with"+e.length+"errors"):(n.stageBtn.normalSprite=t,n.stageBtn.pressedSprite=t,n.stageBtn.hoverSprite=t)});for(var a=0;a<3;++a)this.stars[a].enabled=!1}}}),cc._RF.pop()},{}],wechatgame:[function(t,n,i){"use strict";cc._RF.push(n,"d452fpujWFM7qldugP7LcGy","wechatgame");var o="https://www.7cgames.cn:8070/",a={shareTitleList:["\u4e24\u53ea\u732a\u7684\u7231\u60c5\u6545\u4e8b\uff0c\u770b\u5b8c\u540e\u6cea\u6d41\u6ee1\u9762","\u5feb\u6eda\uff0c\u5feb\u6eda\uff01","\u7231\u4e0d\u7231\u6211\u6211\u90fd\u53ea\u662f\u4e2a\u7403\u7403","\u8fd9\u4e5f\u592a\u751c\u4e86\u5427\uff01","\u5176\u5b9e\u6211\u60f3\u8ba9\u4f60\u5b66\u4e60\u4e00\u4e0b\u901a\u5173\u604b\u7231\u7403\u7403\u7684\u79d8\u8bc0"],shareImgDir:"resources/share/",shareImgType:".jpg",moreGameIconDir:"more",appIdList:["wxd5a257d6ee2b8f91","wx515f44394eab5985","wx08beeb18dc512c2f","wxea245f85c9673414","wxc4e628aa7caa2c07","wx0af703a36035c60c","wxf49b0a26d9405058","wxac5820bc06a3a893","wxd9589cd7117d0873"]};function c(e){return 0===e?-1:Math.floor(Math.random()*e)}function s(){var e=this;e.isAndroid=cc.sys.os===cc.sys.OS_ANDROID,wx.updateShareMenu({withShareTicket:!0}),wx.showShareMenu(),wx.onShareAppMessage(function(){var e=c(a.shareTitleList.length),t=a.shareTitleList[e];return{title:t,imageUrl:wxDownloader.REMOTE_SERVER_ROOT+"/"+cc.url.raw(a.shareImgDir+t+a.shareImgType)}}),e.onShow(),e.onHide(),e.getUserInfo().then(function(){return e.getOpenId()}).catch(function(e){return console.log(e)}),e.launchOptions=wx.getLaunchOptionsSync(),console.log(e.launchOptions),e.bannerAdisLoad=!1,e.videoAdisLoad=!1,e.videoAdCallback=null,e.createBannerAd(),e.createVideoAd(),e.appIdList=a.appIdList,e.moreGameQRCodeIdx=0,e.moreGameIconList=[],e.moreGameQRCodeList=[],e.initMoreGame()}var r=s.prototype;r.onShow=function(){var e=this;wx.onShow(function(t){console.log(t),e.shareTicket=t.shareTicket,e.query=t.query})},r.onHide=function(){var e=this;wx.onHide(function(){e.lastOffLineTime=(new Date).getTime(),e.onHideCallback instanceof Function?e.onHideCallback():console.warn("onHideCallback not a function")})},r.login=function(){return new Promise(function(e,t){wx.login({success:function(t){e(t)},fail:function(){t({errcode:"LOGIN_FAIL",message:"login\u5931\u8d25"})}})})},r.getOpenId=function(){var e=this;return new Promise(function(t,n){e.openId&&t(),e.login().then(function(i){i.code||n({errcode:"CODE_PARAM_ERROR",message:"code\u4e3anull\u6216undefined"}),wx.request({url:o+"getOpenId",data:{gameName:"ball2",appid:"wx0a909849d3a53f25",secret:"1ad92b8df595f9ecd405ee122f7afe07",js_code:i.code,grant_type:"authorization_code"},header:{"Content-Type":"application/json"},method:"POST",success:function(i){i.data.openid?(e.openId=i.data.openid,t()):n({errcode:"OPENID_PARAM_ERROR",message:"openId\u4e3anull\u6216undefined"})},fail:function(){n({errcode:"GET_OPENID_FAIL",message:"\u8bf7\u6c42getOpenId\u5931\u8d25"})}})})})},r.getShareInfo=function(){var e=this;return new Promise(function(t,n){e.shareTicket||n({errcode:"SHARETICKET_PARAM_ERROR",message:"shareTicket\u4e3anull\u6216undefined"}),e.openId||n({errcode:"OPENID_PARAM_ERROR",message:"openId\u4e3anull\u6216undefined"}),wx.getShareInfo({shareTicket:e.shareTicket,success:function(e){t(e)},fail:function(){n({errcode:"GET_SHARE_INFO_FAIL",message:"getShareInfo\u5931\u8d25"})}})})},r.getDecryptedData=function(e){var t=this;return e=e||{},new Promise(function(n,i){t.openId||i({errcode:"OPENID_PARAM_ERROR",message:"openId\u4e3anull\u6216undefined"}),e.encryptedData||i({errcode:"SHARE_INFO_PARAM_ERROR",message:"encryptedData\u4e3anull\u6216undefined"}),e.iv||i({errcode:"SHARE_INFO_PARAM_ERROR",message:"iv\u4e3anull\u6216undefined"}),wx.request({url:o+"getDecryptedData",data:{openId:t.openId,encryptedData:e.encryptedData,iv:e.iv},header:{"Content-Type":"application/json"},method:"POST",success:function(e){n(e)},fail:function(){i({errcode:"GET_DECRYPTED_DATA_FAIL",message:"\u8bf7\u6c42getDecryptedData\u5931\u8d25"})}})})},r.getOpenGid=function(){var e=this;return new Promise(function(t,n){e.getOpenId().then(function(){return e.getShareInfo()}).then(function(t){return e.getDecryptedData({openId:e.openId,encryptedData:t.encryptedData,iv:t.iv})}).then(function(e){return t(e)})})},r.getUserInfo=function(){var e=this;return new Promise(function(t,n){e.userInfo&&t(),wx.getSetting({success:function(i){if(!i.authSetting["scope.userInfo"]&&wx.createUserInfoButton){var o=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:5e3,height:5e3,lineHeight:40,backgroundColor:"",color:"",textAlign:"center",fontSize:16,borderRadius:4}});o.onTap(function(n){o.hide(),e.userInfo=n.userInfo,t()})}else wx.getUserInfo({success:function(n){e.userInfo=n.userInfo,t()},fail:function(){n({errcode:"GET_USER_INFO_FAIL",message:"\u83b7\u53d6userInfo\u5931\u8d25"})}})},fail:function(){n({errcode:"GET_SETTING_FAIL",message:"\u83b7\u53d6Setting\u5931\u8d25"})}})})},r.getServerUtc=function(){return new Promise(function(e,t){wx.request({url:o+"getServerUtc",method:"POST",success:function(t){e(t)},fail:function(){t({errcode:"GET_OPENID_FAIL",message:"\u8bf7\u6c42getServerUtc\u5931\u8d25"})}})})},r.shareAppMessage=function(t){return t=t||{},new Promise(function(n,i){var o=!1,s=c(a.shareTitleList.length),r=t.str?t.str:a.shareTitleList[s],l=t.url?t.url:wxDownloader.REMOTE_SERVER_ROOT+"/"+cc.url.raw(a.shareImgDir+r+a.shareImgType),g=t.query?t.query:"";wx.shareAppMessage({title:r,imageUrl:l,query:g,success:function(e){console.log("success",e),n()},fail:function(e){console.log("fail",e),i()},complete:function(){console.log("complete",e),o=!0}}),setTimeout(function(){o||n()},2e3)})},r.createBannerAd=function(){if(wx.createRewardedVideoAd){var e=this;if(!e.bannerAd){var t=wx.getSystemInfoSync().windowWidth,n=wx.getSystemInfoSync().windowHeight;e.bannerAd=wx.createBannerAd({adUnitId:"adunit-a605a4125f3075f5",style:{left:0,top:n-130,height:130}}),e.bannerAd.onLoad(function(){e.bannerAdisLoad=!0}),e.bannerAd.onResize(function(i){e.bannerAd.style.left=(t-e.bannerAd.style.realWidth)/2,e.bannerAd.style.top=n-e.bannerAd.style.realHeight}),e.bannerAd.onError(function(e){console.log(e)})}}},r.showBannerAd=function(){wx.createRewardedVideoAd&&(this.bannerAd||this.createBannerAd(),this.bannerAd.show())},r.hideBannerAd=function(){wx.createRewardedVideoAd&&(this.bannerAd||this.createBannerAd(),this.bannerAd.hide())},r.createVideoAd=function(){if(wx.createRewardedVideoAd){var e=this;e.videoAd||(e.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-46ffe4d65d261222"}),e.videoAd.onLoad(function(){e.videoAdisLoad=!0,console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.videoAd.onError(function(e){console.log(e.errMsg)}),e.videoAd.onClose(function(t){e.videoAdisLoad=!1,(t&&t.isEnded||void 0===t)&&(e.videoAdCallback instanceof Function?e.videoAdCallback():console.err("videoAdCallback is not a function"))}))}},r.showVideoAd=function(){var e=this;wx.createRewardedVideoAd&&(e.videoAd||e.createVideoAd(),e.videoAd.show().catch(function(t){console.log(t),e.videoAd.load().then(function(){return e.videoAd.show()})}))},r.submitScore=function(e){isNaN(e)||wx.postMessage({messageType:3,MAIN_MENU_NUM:"qr2",score:e})},r.updateFriendRank=function(){wx.postMessage({messageType:1,MAIN_MENU_NUM:"qr2"})},r.initMoreGame=function(){var e=this;0===e.moreGameQRCodeList.length&&e.getMoreGameQRCodeData().then(function(t){return e.moreGameQRCodeList=t.data.data}),0===e.moreGameIconList.length&&cc.loader.loadResDir(a.moreGameIconDir,cc.SpriteFrame,function(t,n,i){if(t)return console.log(t);e.moreGameIconList=n.sort(function(e,t){return parseInt(e.name)-parseInt(t.name)})})},r.getMoreGameQRCodeData=function(){return new Promise(function(e,t){wx.request({url:"https://www.7cgames.cn/GameRes/fangyipengDir/7CGamesBoxWX/QRCode/WXGamesCode.json",headers:{"Content-Type":"application/json"},success:function(t){e(t)},fail:function(e){t(e)}})})},r.navigateToMiniProgram=function(e){var t=!e;e=t?"wx361c9e49bd9033ca":e,!wx.navigateToMiniProgram||!this.isAndroid&&t?wx.previewImage&&this.previewImage():wx.navigateToMiniProgram({appId:e,path:"",success:function(e){console.log("\u6253\u5f00\u6210\u529f")}})},r.previewImage=function(){var e=this;if(0===e.moreGameQRCodeList.length)e.getMoreGameQRCodeData().then(function(t){e.moreGameQRCodeList=t.data.data,e.previewImage()});else{e.moreGameQRCodeIdx++;var t=e.moreGameQRCodeIdx%e.moreGameQRCodeList.length;wx.previewImage({urls:[e.moreGameQRCodeList[t].QRCode]})}},n.exports=s,cc._RF.pop()},{}]},{},["AdsManagerJS","AudioSourceControl","BlockJS","ChooseStageJS","DialogGamePassJS","GameDataManagerJS","GuessYouLike","LevelDataJS","LoadingSceneJS","MyLayoutManagerJS","RankJS","SelectDifficultSceneJS","ShareManagerJS","SkinJS","define","gameplay","main","subBlockStatusDataJS","subDifficultTemplateJS","subStarTemplateJS","LikeView","MoreGameBtnView","wechatgame","exported-Icon","WeChatFileSystemManager","exported-Button","exported-GameBox","exported-GameBoxInterface","RollingImage"]);