{"version":3,"sources":["AdsManagerJS.js"],"names":["define","require","GameDataManager","wxBANNER_ID","wxREWARDED_ID","g_preloadedInterstitial","g_preloadedRewardedVideo","g_wx_rewardedAD","AdsManager","cc","Class","extends","Component","properties","preloadedInterstitial","preloadedRewardedVideo","start","statics","_instance","getInstance","ctor","init","preloadInterstitial","preloadRewarded","preloadBannerAD","closeRewardedAD","FBInstant","supportedAPIs","getSupportedAPIs","includes","getInterstitialAdAsync","faceBookInterstitialId","then","interstitial","setDebugInfo","loadAsync","console","log","catch","err","error","message","showInterstitial","DEBUG_NO_ADS","rewardedInterstitialAdsCallback","showAsync","e","scheduleOnce","getRewardedVideoAsync","faceBookRewardedVideoId","rewarded","CC_WECHATGAME","wx","createRewardedVideoAd","rewardedAD","adUnitId","onError","showRewardedVideo","rewardedVideoAdsCallback","show","load","onShareGame","showModal","title","content","showRewardedGold","rewardedGoldAdsCallback","showmainRewardedGold","rewardedmainGoldAdsCallback","onClose","res","isEnded","undefined","video","find","getComponent","videohint_btnCallback","gold","gold_btnCallback","getSystemInfoSync","SDKVersion","createBannerAd","bannerAD","style","left","top","width","windowWidth","onResize","windowHeight","realHeight","realWidth","showBannerAD","hideBannerAD","hide","module","exports"],"mappings":"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","file":"AdsManagerJS.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["\n\n\nvar define = require(\"define\");\n\nvar GameDataManager = require(\"GameDataManagerJS\");\n\n// let faceBookRewardedVideoId = \"432416873919592_433351250492821\"\n// let faceBookInterstitialId = \"432416873919592_433348743826405\"\n\nconst wxBANNER_ID = \"adunit-8ef60975845f4302\";\nconst wxREWARDED_ID = \"adunit-a437428aa8ee8909\";\n\n\nvar g_preloadedInterstitial = null;\nvar g_preloadedRewardedVideo = null;\n\nvar g_wx_rewardedAD = null;\n\nlet AdsManager = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n        preloadedInterstitial: null,\n        preloadedRewardedVideo: null,\n\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n    // onLoad () {},\n\n    start() {\n\n    },\n\n    // update (dt) {},\n\n    statics: {\n        _instance: null,\n        //rewardedAD: null,\n        getInstance: function () {\n            if (AdsManager._instance === null) {\n                this._instance = new AdsManager();\n                //    console.log('_instance  null , _instance=this  !');\n            }\n            return AdsManager._instance;\n        }\n    },\n    ctor: function () {\n        this.init()\n        // console.log('ctor     GameDataManager ');\n    },\n\n    init: function () {\n        this.preloadInterstitial();\n        this.preloadRewarded();\n\n        this.preloadBannerAD();\n\n        this.closeRewardedAD();\n\n        return 10;\n    },\n\n\n    preloadInterstitial: function () {\n\n        if (typeof FBInstant != 'undefined') {\n            var supportedAPIs = FBInstant.getSupportedAPIs();\n            if (supportedAPIs.includes('getInterstitialAdAsync') && supportedAPIs.includes('getRewardedVideoAsync')) {\n                //\n                // Preload Interstitial\n                //\n                FBInstant.getInterstitialAdAsync(\n                    faceBookInterstitialId, // Your Ad Placement Id\n                ).then(function (interstitial) {\n                    // Load the Ad asynchronously\n                    GameDataManager.getInstance().setDebugInfo(' preloadedInterstitial.loadAsync(); ');\n                    // this.preloadedInterstitial = interstitial;\n                    // return this.preloadedInterstitial.loadAsync();\n\n                    g_preloadedInterstitial = interstitial;\n                    return g_preloadedInterstitial.loadAsync();\n                }).then(function () {\n                    console.log('Interstitial preloaded')\n                    //GameDataManager.getInstance().setDebugInfo('Interstitial preloaded  => ' + this.preloadedInterstitial);\n                    GameDataManager.getInstance().setDebugInfo('Interstitial preloaded  => ' + g_preloadedInterstitial);\n\n                }).catch(function (err) {\n                    console.error('Interstitial failed to preload: ' + err.message);\n                    GameDataManager.getInstance().setDebugInfo('Interstitial failed to preload: ' + err.message);\n                });\n\n\n            } else {\n                console.log('Ads not supported in this session');\n                GameDataManager.getInstance().setDebugInfo('Ads not supported in this session');\n            }\n        }\n    },\n\n    showInterstitial: function () {\n\n        if (define.DEBUG_NO_ADS == true) {\n\n            console.log('Interstitial ad finished successfully');\n            GameDataManager.getInstance().setDebugInfo('Interstitial ad finished successfully');\n            this.rewardedInterstitialAdsCallback()\n        } else {\n\n            if (typeof FBInstant != 'undefined') {\n                //var self = _instance\n                if (g_preloadedInterstitial != null) {\n\n                    g_preloadedInterstitial.showAsync()\n                        .then(function () {\n                            // Perform post-ad success operation\n                            console.log('Interstitial ad finished successfully');\n                            GameDataManager.getInstance().setDebugInfo('Interstitial ad finished successfully');\n\n                            AdsManager.getInstance().rewardedInterstitialAdsCallback();\n\n                        })\n                        .catch(function (e) {\n                            console.error(e.message);\n                            GameDataManager.getInstance().setDebugInfo(e.message);\n                        });\n\n                    AdsManager.getInstance().scheduleOnce(function () {\n\n                        GameDataManager.getInstance().setDebugInfo(' scheduleOnce => preloadInterstitial ');\n                        AdsManager.getInstance().preloadInterstitial();\n\n                    }, 2);\n\n                } else {\n                    GameDataManager.getInstance().setDebugInfo(' error  g_preloadedInterstitial => ' + g_preloadedInterstitial);\n                }\n            }\n        }\n\n\n    },\n\n    rewardedInterstitialAdsCallback: function () {\n        GameDataManager.getInstance().setDebugInfo('Reward    InterstitialAds');\n        console.log('Reward    InterstitialAds');\n    },\n\n    preloadRewarded: function () {\n\n        if (typeof FBInstant != 'undefined') {\n            var supportedAPIs = FBInstant.getSupportedAPIs();\n            if (supportedAPIs.includes('getInterstitialAdAsync') && supportedAPIs.includes('getRewardedVideoAsync')) {\n                //\n                // Preload Rewarded\n                //\n                FBInstant.getRewardedVideoAsync(\n                    faceBookRewardedVideoId, // Your Ad Placement Id\n                ).then(function (rewarded) {\n                    // Load the Ad asynchronously\n\n                    g_preloadedRewardedVideo = rewarded;\n                    GameDataManager.getInstance().setDebugInfo(' preloadedRewardedVideo.loadAsync(); ');\n                    return g_preloadedRewardedVideo.loadAsync();\n\n                }).then(function () {\n                    console.log('Rewarded video preloaded')\n                    GameDataManager.getInstance().setDebugInfo('Rewarded video preloaded => ' + g_preloadedRewardedVideo);\n\n\n                }).catch(function (err) {\n                    console.error('Rewarded video failed to preload: ' + err.message);\n                    GameDataManager.getInstance().setDebugInfo('Rewarded video failed to preload: ' + err.message);\n                });\n            }\n        } else if (CC_WECHATGAME) {\n            if (wx.createRewardedVideoAd) {\n                this.rewardedAD = wx.createRewardedVideoAd({ adUnitId: wxREWARDED_ID });\n                console.log('   preloadRewarded  Rewarded ');\n                this.rewardedAD.onError(err => {\n                    console.log(\"Rewarded 加载失败\" + err);\n                });\n            }\n\n        } else {\n            console.log('Ads not supported in this session');\n            GameDataManager.getInstance().setDebugInfo('Ads not supported in this session');\n        }\n\n    },\n\n    showRewardedVideo: function () {\n\n        if (define.DEBUG_NO_ADS == true) {\n            console.log('Rewarded video watched successfully');\n            this.rewardedVideoAdsCallback()\n        } else {\n\n            if (typeof FBInstant != 'undefined') {\n                //var self = _instance\n                if (g_preloadedRewardedVideo != null) {\n                    g_preloadedRewardedVideo.showAsync()\n                        .then(function () {\n                            // Perform post-ad success operation\n                            console.log('Rewarded video watched successfully');\n                            GameDataManager.getInstance().setDebugInfo('Rewarded video watched successfully');\n\n                            AdsManager.getInstance().rewardedVideoAdsCallback();\n\n                        })\n                        .catch(function (e) {\n                            console.error(e.message);\n                            GameDataManager.getInstance().setDebugInfo(e.message);\n                        });\n\n\n                    AdsManager.getInstance().scheduleOnce(function () {\n\n                        GameDataManager.getInstance().setDebugInfo(' scheduleOnce => preloadRewarded ');\n\n                        AdsManager.getInstance().preloadRewarded();\n\n                    }, 2);\n                } else {\n                    GameDataManager.getInstance().setDebugInfo(' error  g_preloadedRewardedVideo =>  ' + g_preloadedRewardedVideo);\n                }\n            } else if (CC_WECHATGAME) {\n\n                if (this.rewardedAD != null) {\n                    this.rewardedAD.show().catch(err => {\n                        this.rewardedAD.load().then(() => this.rewardedAD.show())\n                        AdsManager.getInstance().onShareGame('sharePic')\n\n                    });\n\n                } else {\n                    console.log(\"Rewarded 为  null\");\n                    wx.showModal({\n                        title: '提示',\n                        content: '当前微信版本过低，视频广告奖励，无法使用该功能，请升级到最新微信版本后重试。'\n                    });\n                }\n            } else {\n                console.log('Ads not supported in this session');\n            }\n        }\n    },\n    showRewardedGold: function () {\n\n        if (define.DEBUG_NO_ADS == true) {\n            console.log('Rewarded video watched successfully');\n            this.rewardedVideoAdsCallback()\n        } else {\n\n            if (typeof FBInstant != 'undefined') {\n                //var self = _instance\n                if (g_preloadedRewardedVideo != null) {\n                    g_preloadedRewardedVideo.showAsync()\n                        .then(function () {\n                            // Perform post-ad success operation\n                            console.log('Rewarded video watched successfully');\n                            GameDataManager.getInstance().setDebugInfo('Rewarded video watched successfully');\n\n                            AdsManager.getInstance().rewardedGoldAdsCallback();\n\n                        })\n                        .catch(function (e) {\n                            console.error(e.message);\n                            GameDataManager.getInstance().setDebugInfo(e.message);\n                        });\n\n\n                    AdsManager.getInstance().scheduleOnce(function () {\n\n                        GameDataManager.getInstance().setDebugInfo(' scheduleOnce => preloadRewarded ');\n\n                        AdsManager.getInstance().preloadRewarded();\n\n                    }, 2);\n                } else {\n                    GameDataManager.getInstance().setDebugInfo(' error  g_preloadedRewardedVideo =>  ' + g_preloadedRewardedVideo);\n                }\n            } else if (CC_WECHATGAME) {\n\n                if (this.rewardedAD != null) {\n                    this.rewardedAD.show().catch(err => {\n                        this.rewardedAD.load().then(() => this.rewardedAD.show())\n                        AdsManager.getInstance().onShareGame('sharePic')\n\n                    });\n\n                } else {\n                    console.log(\"Rewarded 为  null\");\n                    wx.showModal({\n                        title: '提示',\n                        content: '当前微信版本过低，视频广告奖励，无法使用该功能，请升级到最新微信版本后重试。'\n                    });\n                }\n            } else {\n                console.log('Ads not supported in this session');\n            }\n        }\n    },\n    showmainRewardedGold: function () {\n\n        if (define.DEBUG_NO_ADS == true) {\n            console.log('Rewarded video watched successfully');\n            this.rewardedVideoAdsCallback()\n        } else {\n\n            if (typeof FBInstant != 'undefined') {\n                //var self = _instance\n                if (g_preloadedRewardedVideo != null) {\n                    g_preloadedRewardedVideo.showAsync()\n                        .then(function () {\n                            // Perform post-ad success operation\n                            console.log('Rewarded video watched successfully');\n                            GameDataManager.getInstance().setDebugInfo('Rewarded video watched successfully');\n\n                            AdsManager.getInstance().rewardedmainGoldAdsCallback();\n\n                        })\n                        .catch(function (e) {\n                            console.error(e.message);\n                            GameDataManager.getInstance().setDebugInfo(e.message);\n                        });\n\n\n                    AdsManager.getInstance().scheduleOnce(function () {\n\n                        GameDataManager.getInstance().setDebugInfo(' scheduleOnce => preloadRewarded ');\n\n                        AdsManager.getInstance().preloadRewarded();\n\n                    }, 2);\n                } else {\n                    GameDataManager.getInstance().setDebugInfo(' error  g_preloadedRewardedVideo =>  ' + g_preloadedRewardedVideo);\n                }\n            } else if (CC_WECHATGAME) {\n\n                if (this.rewardedAD != null) {\n                    this.rewardedAD.show().catch(err => {\n                        this.rewardedAD.load().then(() => this.rewardedAD.show())\n                        AdsManager.getInstance().onShareGame('sharePic')\n\n                    });\n\n                } else {\n                    console.log(\"Rewarded 为  null\");\n                    wx.showModal({\n                        title: '提示',\n                        content: '当前微信版本过低，视频广告奖励，无法使用该功能，请升级到最新微信版本后重试。'\n                    });\n                }\n            } else {\n                console.log('Ads not supported in this session');\n            }\n        }\n    },\n    closeRewardedAD: function () {\n        if (CC_WECHATGAME) {\n            if (wx.createRewardedVideoAd) {\n                this.rewardedAD.onClose(res => {\n                    // 用户点击了【关闭广告】按钮\n                    // 小于 2.1.0 的基础库版本，res 是一个 undefined\n                    if (res && res.isEnded || res === undefined) {\n\n                        // 正常播放结束，可以下发游戏奖励\n                        console.log(\"正常结束\");\n\n                        AdsManager.getInstance().rewardedVideoAdsCallback();\n                        // if(this.ccClassSelf){\n                        //     this.eventCallBack(this.ccClassSelf);\n                        // }else{\n                        //     console.log(\"ccClassSelf 没有找到\");\n                        // }\n\n                        return true;\n                    }\n                    else {\n                        // 播放中途退出，不下发游戏奖励\n                        console.log(\"中途退出\");\n\n                        return false;\n                    }\n                });\n            }\n        } else {\n            cc.log(\"关闭 Rewarded 的回调函数\");\n        }\n    },\n\n    rewardedVideoAdsCallback: function () {\n\n        console.log('Reward    rewardedVideoAds');\n        GameDataManager.getInstance().setDebugInfo('Reward    rewardedVideoAds');\n        // GameDataManager.getInstance().addHints();\n\n        var video = cc.find('Canvas/game').getComponent('gameplay')\n        video.videohint_btnCallback();\n    },\n    rewardedGoldAdsCallback() {\n        console.log('Reward    rewardedVideoAds');\n        GameDataManager.getInstance().setDebugInfo('Reward    rewardedVideoAds');\n\n        var gold = cc.find('Canvas/game').getComponent('gameplay')\n        gold.gold_btnCallback();\n    },\n    rewardedmainGoldAdsCallback() {\n        console.log('Reward    rewardedVideoAds');\n        GameDataManager.getInstance().setDebugInfo('Reward    rewardedVideoAds');\n        var gold = cc.find('Canvas').getComponent('main')\n        gold.gold_btnCallback();\n    },\n\n    //banner代码\n    preloadBannerAD: function () {\n\n        if (typeof FBInstant != 'undefined') {\n\n        } else if (CC_WECHATGAME) {\n            console.log(\"wx.getSystemInfoSync().SDKVersion  \" + wx.getSystemInfoSync().SDKVersion);\n            if (wx.createBannerAd) {\n                this.bannerAD = wx.createBannerAd({\n                    adUnitId: wxBANNER_ID,\n                    style: {\n                        left: 0,\n                        top: 0,\n                        width: wx.getSystemInfoSync().windowWidth\n                    }\n                });\n                this.bannerAD.onResize(res => {\n                    this.bannerAD.style.top = wx.getSystemInfoSync().windowHeight - this.bannerAD.style.realHeight;\n                    this.bannerAD.style.left = (wx.getSystemInfoSync().windowWidth - this.bannerAD.style.realWidth) / 2;\n                });\n\n                this.bannerAD.onError(err => {\n                    console.log(\"banner 加载失败\" + err);\n                });\n            } else {\n                console.log(\"preloadBannerAD SDKVersion 不支持  banner\");\n            }\n        } else {\n            console.log(\"preloadBannerAD 不支持平台 banner\");\n        }\n    },\n\n    showBannerAD: function () {\n        if (typeof FBInstant != 'undefined') {\n\n        } else if (CC_WECHATGAME) {\n            if (this.bannerAD != null) {\n                this.bannerAD.show();\n            } else {\n                console.log(\"bannerAD 为  null\");\n            }\n\n        } else {\n            console.log(\"showBannerAD 不支持平台 banner\");\n        }\n\n    },\n\n    hideBannerAD: function () {\n        if (typeof FBInstant != 'undefined') {\n\n        } else if (CC_WECHATGAME) {\n            if (this.bannerAD != null) {\n                this.bannerAD.hide();\n            } else {\n                console.log(\"bannerAD 为  null\");\n            }\n\n        } else {\n            console.log(\"hideBannerAD 不支持平台 banner\");\n        }\n    },\n    // if (typeof FBInstant != 'undefined') {\n    //     PreloadInterstitial();\n    //     showInterstitial();\n    // }\n    // getShare: function () {\n    //     let self = this;\n    //     if (CC_WECHATGAME) {\n    //         wx.shareAppMessage({\n    //             imageUrl: \"res/raw-assets/Texture/main/w.png\",\n    //             success: function (res) {\n    //                 console.log(\"成功\");\n    //                 //console.log(self.isokhit);\n    //                 self.hint();\n    //             },\n    //             fail: function (res) {\n    //                 console.log(\"失败\");\n    //             }\n    //         })\n    //     } else if (typeof FBInstant != 'undefined') {\n    //         PreloadRewarded();\n    //         showRewardedVideo();\n    //     } else {\n    //         self.hint();\n    //     }\n    // },\n\n});\nmodule.exports = AdsManager;"]}