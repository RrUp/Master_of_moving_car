{"version":3,"sources":["DialogGamePassJS.js"],"names":["GameDataManager","require","define","ShareManager","AdsManager","cc","Class","extends","Component","properties","m_dialog","Node","m_dialog_bg","Sprite","m_light_star","m_next_btn","Button","m_retry_btn","audioControl","default","onLoad","find","getComponent","start","submitScoreButtonFunc","score","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","RankKey","log","showDialog","winStarts","active","i","node","opacity","clickNextBtn","stageId","getInstance","getGameCurLevelNum","packages","getLatestPackage","playClick","getStageCount","setGameCurLevelNum","director","loadScene","clickRetryBtn","clickShareBtn","onShareGame"],"mappings":";;;;;;AAAA,IAAIA,kBAAkBC,QAAQ,mBAAR,CAAtB;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,eAAeF,QAAQ,gBAAR,CAAnB;AACA,IAAIG,aAAaH,QAAQ,cAAR,CAAjB;;AAEAI,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,kBAAUL,GAAGM,IADL;AAERC,qBAAaP,GAAGQ,MAFR;AAGRC,sBAAc,CAACT,GAAGQ,MAAJ,CAHN;AAIRE,oBAAYV,GAAGW,MAJP;AAKRC,qBAAaZ,GAAGW,MALR;AAMRE,sBACA;AACIC,qBAAS;AADb;;AAPQ,KAHP;;AAgBL;;AAEAC,UAlBK,oBAkBI;AACL,aAAKF,YAAL,GAAoBb,GAAGgB,IAAH,CAAQ,kBAAR,EAA4BC,YAA5B,CAAyC,oBAAzC,CAApB;AACH,KApBI;AAsBLC,SAtBK,mBAsBG,CACP,CAvBI;;;AAyBL;AACAC,yBA1BK,iCA0BiBC,KA1BjB,EA0BwB;AACzB,YAAIC,aAAJ,EAAmB;AACfC,mBAAOC,EAAP,CAAUC,WAAV,CAAsB;AAClBC,6BAAa,CADK;AAElBC,+BAAe7B,OAAO8B,OAFJ;AAGlBP,uBAAOA;AAHW,aAAtB;AAKH,SAND,MAMO;AACHpB,eAAG4B,GAAH,CAAO,iBAAiBR,KAAxB;AACH;AACJ,KApCI;;AAqCLS,gBAAY,oBAAUC,SAAV,EAAqB;AAC7B,aAAKzB,QAAL,CAAc0B,MAAd,GAAuB,IAAvB;AACA;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,SAApB,EAA+BE,GAA/B,EAAoC;AAChC,iBAAKvB,YAAL,CAAkBuB,CAAlB,EAAqBC,IAArB,CAA0BC,OAA1B,GAAoC,GAApC;AACH;AACJ,KA3CI;AA4CLC,kBAAc,wBAAY;AACtB,YAAIC,UAAUzC,gBAAgB0C,WAAhB,GAA8BC,kBAA9B,KAAqD,CAAnE;AACA,YAAIC,WAAW5C,gBAAgB0C,WAAhB,GAA8BG,gBAA9B,EAAf;AACA,aAAKC,SAAL;AACA,YAAIL,UAAUzC,gBAAgB0C,WAAhB,GAA8BK,aAA9B,CAA4CH,QAA5C,CAAd,EAAqE;AACjE5C,4BAAgB0C,WAAhB,GAA8BM,kBAA9B,CAAiDP,OAAjD;AACApC,eAAG4C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,SAHD,MAGO;AACH7C,eAAG4C,QAAH,CAAYC,SAAZ,CAAsB,kBAAtB;AACH;AACJ,KAtDI;AAuDL;AACAC,mBAAe,yBAAY;AACvB,aAAKL,SAAL;AACAzC,WAAG4C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACH,KA3DI;AA4DL;AACAE,mBAAe,yBAAY;AACvB,aAAKN,SAAL;AACA3C,qBAAauC,WAAb,GAA2BW,WAA3B,CAAuC,UAAvC;AACH,KAhEI;AAiELP,eAAW,qBAAY;AACnB,YAAI,KAAK5B,YAAT,EAAuB;AACnB,iBAAKA,YAAL,CAAkB4B,SAAlB;AACH;AACJ;AArEI,CAAT","file":"DialogGamePassJS.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var GameDataManager = require(\"GameDataManagerJS\");\nvar define = require(\"define\");\nvar ShareManager = require(\"ShareManagerJS\");\nvar AdsManager = require(\"AdsManagerJS\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        m_dialog: cc.Node,\n        m_dialog_bg: cc.Sprite,\n        m_light_star: [cc.Sprite],\n        m_next_btn: cc.Button,\n        m_retry_btn: cc.Button,\n        audioControl:\n        {\n            default: null,\n        }\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.audioControl = cc.find('AudioControlNode').getComponent('AudioSourceControl');\n    },\n\n    start() {\n    },\n\n    // update (dt) {},\n    submitScoreButtonFunc(score) {\n        if (CC_WECHATGAME) {\n            window.wx.postMessage({\n                messageType: 3,\n                MAIN_MENU_NUM: define.RankKey,\n                score: score,\n            });\n        } else {\n            cc.log(\"fail 提交得分 : \" + score)\n        }\n    },\n    showDialog: function (winStarts) {\n        this.m_dialog.active = true;\n        // AdsManager.getInstance().showBannerAD();\n        for (var i = 0; i < winStarts; i++) {\n            this.m_light_star[i].node.opacity = 255;\n        }\n    },\n    clickNextBtn: function () {\n        var stageId = GameDataManager.getInstance().getGameCurLevelNum() + 1;\n        var packages = GameDataManager.getInstance().getLatestPackage();\n        this.playClick();\n        if (stageId < GameDataManager.getInstance().getStageCount(packages)) {\n            GameDataManager.getInstance().setGameCurLevelNum(stageId);\n            cc.director.loadScene(\"game\");\n        } else {\n            cc.director.loadScene(\"ChooseStageScene\");\n        }\n    },\n    //重玩\n    clickRetryBtn: function () {\n        this.playClick();\n        cc.director.loadScene(\"game\");\n    },\n    //炫耀一下\n    clickShareBtn: function () {\n        this.playClick();\n        ShareManager.getInstance().onShareGame(\"sharePic\");\n    },\n    playClick: function () {\n        if (this.audioControl) {\n            this.audioControl.playClick();\n        }\n    },\n});\n"]}