{"version":3,"sources":["main.js"],"names":["define","require","AdsManager","ShareManager","GameDataManager","cc","Class","extends","Component","properties","background","Sprite","title_bg","gold_btn","Button","audio_btn","share_btn","moregame_btn","begin_btn","rank_btn","skin_btn","rankNode","Node","skinNode","gold_lab","Label","gameBox","onLoad","audioControl","find","getComponent","mute","AudioSource","coin","getInstance","getgold","money","console","log","string","node","on","updatemoney","start","active","playAudio","playerStart","getGameCompleteStars","submitScoreButtonFunc","score","RankKey","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","update","dt","gold_btnClick","playClick","gold_btnCallback","savegold","emit","audio_btnClick","music","volume","self","urlPath","loader","loadRes","SpriteFrame","err","spriteFrame","normalSprite","pressedSprite","hoverSprite","length","_name","other_btnClick","moregame_btnClick","NavigateTo7cGameBox","runAction","moveBy","v2","box","show","begin_btnClick","director","loadScene","share_btnClick","main","text","getTextById","onShareGame","rank_btnClick","rank","skin_btnClick","skin","back_btnClick"],"mappings":"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","file":"main.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar AdsManager = require(\"AdsManagerJS\");\nvar ShareManager = require(\"ShareManagerJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    background: cc.Sprite,\n    title_bg: cc.Sprite,\n    gold_btn: cc.Button,\n    audio_btn: cc.Button,\n    share_btn: cc.Button,\n    moregame_btn: cc.Button,\n    begin_btn: cc.Button,\n    // turntable_btn: cc.Button,\n    // checkin_btn: cc.Button,\n    rank_btn: cc.Button,\n    skin_btn: cc.Button,\n    rankNode: cc.Node,\n    skinNode: cc.Node,\n    // turntable:cc.Node,\n    // audioControl:\n    // {\n    //   default: null,\n    // },\n    gold_lab: cc.Label,\n    gameBox:cc.Node,\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n\n    // //首次加载游戏\n    // if(cc.sys.localStorage.getItem(\"first_in\") == undefined){\n    //   cc.sys.localStorage.setItem(\"first_in\", 100);\n    //   // 游戏首次加载需要初始化的操作\n\n    // }\n    // AdsManager.getInstance();\n    // ShareManager.getInstance();\n\n    // define.money = this.gold;\n    this.audioControl = cc.find('AudioControlNode').getComponent('AudioSourceControl');\n    // // (\" 常驻节点 赋值 \")\n    // cc.audioEngine.playMusic(this.audio,true);\n   \n    this.mute = cc.find('AudioControlNode/AudioRes/audio').getComponent(cc.AudioSource);\n    // this.money= \n    let coin = GameDataManager.getInstance().getgold();\n    define.money = coin;\n    console.log(\"----------------->>\", coin);\n    this.gold_lab.string = define.money;\n    // cc.log(\"===jinbi=\", GameDataManager.getInstance().getgold());\n    // cc.log(\"====\", this.gold)\n    this.node.on(\"updatemoney\", () => {\n      this.updatemoney();\n  });\n   \n\n    // cc.game.on(\"updatemoney\",()=>{\n    //   this.updatemoney();\n    // });\n  },\n  updatemoney(){\n    this.gold_lab.string = define.money;\n  },\n  start() {\n    this.rankNode.active = false;\n    this.skinNode.active = false;\n     this.playAudio();\n    var playerStart = GameDataManager.getInstance().getGameCompleteStars();\n    console.log(\"playerStart = \" + playerStart)\n    this.submitScoreButtonFunc(playerStart);//提交分数\n  },\n  // updatemoney(){\n  //   this.gold_lab.string = define.money;\n  // },\n  //提交分数 \n  submitScoreButtonFunc(score) {\n    console.log(\" main  提交 : \" + score + \" key= \" + define.RankKey)\n\n    if (CC_WECHATGAME) {\n      window.wx.postMessage({\n        messageType: 3,\n        MAIN_MENU_NUM: define.RankKey,\n        score: score,\n      });\n    } else {\n      console.log(\"不支持 提交得分 : \" + score)\n    }\n  },\n  update(dt) {\n    // this.gold_lab.string = define.money;\n  },\n  gold_btnClick() {\n    this.playClick();\n    //去看视频\n    // AdsManager.getInstance().showmainRewardedGold();\n  },\n  gold_btnCallback(){\n define.money+=50;\n    GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n  },\n  audio_btnClick() {\n    this.playClick();\n\n    if (define.music == true) {\n\n      define.music = false;\n      this.mute.volume = 0;\n      var self = this;\n      var urlPath = (\"mute\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n        self.audio_btn.normalSprite = spriteFrame;//传图\n          self.audio_btn.pressedSprite = spriteFrame;//\n          self.audio_btn.hoverSprite = spriteFrame;//\n\n       \n      });\n    } else {\n      define.music = true;\n      this.mute.volume = 1;\n      var self = this;\n      var urlPath = (\"music\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n\n  \n        if (err)\n          cc.log('Completed with ' + err.length + ' errors');\n        else {\n          console.log('换图声音完成！' + spriteFrame._name + '  ');\n          self.audio_btn.normalSprite = spriteFrame;//传图\n          self.audio_btn.pressedSprite = spriteFrame;//\n          self.audio_btn.hoverSprite = spriteFrame;//\n\n        }\n      });\n\n    }\n  },\n  other_btnClick() {\n    this.playClick();\n  },\n  moregame_btnClick() {\n     this.playClick();\n    ShareManager.getInstance().NavigateTo7cGameBox();\n    this.gameBox.runAction(cc.moveBy(0.5,cc.v2(0,0)));\n    this.box=cc.find(\"Canvas/gameBox\").getComponent(\"exported-GameBoxInterface\");\n    cc.log(\"this.box\",this.box)\n    this.box.show();\n    cc.log(\"gamebox\")\n  },\n  begin_btnClick() {\n    this.playClick();\n    cc.director.loadScene('SelectDifficultScene');\n  },\n  share_btnClick() {\n    this.playClick();  \n    cc.log(\"share\");\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    var text = GameDataManager.getInstance().getTextById(17)\n    ShareManager.getInstance().onShareGame(\"sharePic\");\n  \n  },\n\n  rank_btnClick() {\n    this.playClick();\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.rank = cc.find('Canvas/rankNode');\n    this.rank.active = true;\n  },\n  skin_btnClick() {\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.skin = cc.find('Canvas/skinNode');\n    this.skin.active = true;\n    this.playClick();\n  },\n  back_btnClick() {\n    cc.director.loadScene('main')\n    this.playClick();\n  },\n  playClick: function () {\n    if (this.audioControl) {\n      this.audioControl.playClick();\n    }\n    // AdsManager.getInstance().hideBannerAD();\n  },\n  playAudio: function () {\n    if (this.audioControl) {\n      this.audioControl.playAudio();\n    }\n  },\n\n\n});\n"]}