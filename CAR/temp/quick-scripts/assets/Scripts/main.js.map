{"version":3,"sources":["main.js"],"names":["define","require","AdsManager","ShareManager","GameDataManager","cc","Class","extends","Component","properties","background","Sprite","title_bg","gold_btn","Button","audio_btn","share_btn","moregame_btn","begin_btn","rank_btn","skin_btn","rankNode","Node","skinNode","gold_lab","Label","gameBox","onLoad","log","getInstance","getGameCompleteStars","audioControl","find","getComponent","mute","AudioSource","coin","getgold","money","string","node","on","updatemoney","start","active","playAudio","playerStart","submitScoreButtonFunc","score","console","RankKey","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","update","dt","gold_btnClick","playClick","savegold","emit","gold_btnCallback","audio_btnClick","music","volume","self","urlPath","loader","loadRes","SpriteFrame","err","spriteFrame","normalSprite","pressedSprite","hoverSprite","length","other_btnClick","moregame_btnClick","begin_btnClick","director","loadScene","share_btnClick","main","text","getTextById","onShareGame","rank_btnClick","rank","skin_btnClick","skin","back_btnClick"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,aAAaD,QAAQ,cAAR,CAAjB;AACA,IAAIE,eAAeF,QAAQ,gBAAR,CAAnB;AACA,IAAIG,kBAAkBH,QAAQ,mBAAR,CAAtB;;AAEAI,GAAGC,KAAH,CAAS;AACPC,WAASF,GAAGG,SADL;;AAGPC,cAAY;AACVC,gBAAYL,GAAGM,MADL;AAEVC,cAAUP,GAAGM,MAFH;AAGVE,cAAUR,GAAGS,MAHH;AAIVC,eAAWV,GAAGS,MAJJ;AAKVE,eAAWX,GAAGS,MALJ;AAMVG,kBAAcZ,GAAGS,MANP;AAOVI,eAAWb,GAAGS,MAPJ;AAQVK,cAAUd,GAAGS,MARH;AASVM,cAAUf,GAAGS,MATH;AAUVO,cAAUhB,GAAGiB,IAVH;AAWVC,cAAUlB,GAAGiB,IAXH;AAYVE,cAAUnB,GAAGoB,KAZH;AAaVC,aAAQrB,GAAGiB;AAbD,GAHL;;AAmBP;;AAEAK,QArBO,oBAqBE;AAAA;;AACPtB,OAAGuB,GAAH,CAAO,UAAP,EAAkBxB,gBAAgByB,WAAhB,GAA8BC,oBAA9B,EAAlB;AACA,SAAKC,YAAL,GAAoB1B,GAAG2B,IAAH,CAAQ,kBAAR,EAA4BC,YAA5B,CAAyC,oBAAzC,CAApB;AACA,SAAKC,IAAL,GAAY7B,GAAG2B,IAAH,CAAQ,iCAAR,EAA2CC,YAA3C,CAAwD5B,GAAG8B,WAA3D,CAAZ;AACA,QAAIC,OAAOhC,gBAAgByB,WAAhB,GAA8BQ,OAA9B,EAAX;AACArC,WAAOsC,KAAP,GAAeF,IAAf;AACA,SAAKZ,QAAL,CAAce,MAAd,GAAuBvC,OAAOsC,KAA9B;AACA,SAAKE,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,YAAM;AAChC,YAAKC,WAAL;AACH,KAFC;AAGD,GA/BM;AAgCPA,aAhCO,yBAgCM;AACX,SAAKlB,QAAL,CAAce,MAAd,GAAuBvC,OAAOsC,KAA9B;AACD,GAlCM;AAmCPK,OAnCO,mBAmCC;AACN,SAAKtB,QAAL,CAAcuB,MAAd,GAAuB,KAAvB;AACA,SAAKrB,QAAL,CAAcqB,MAAd,GAAuB,KAAvB;AACC,SAAKC,SAAL;AACD,QAAIC,cAAc1C,gBAAgByB,WAAhB,GAA8BC,oBAA9B,EAAlB;AACA,SAAKiB,qBAAL,CAA2BD,WAA3B,EALM,CAKkC;AACzC,GAzCM;AA0CPC,uBA1CO,iCA0CeC,KA1Cf,EA0CsB;AAC3BC,YAAQrB,GAAR,CAAY,iBAAiBoB,KAAjB,GAAyB,QAAzB,GAAoChD,OAAOkD,OAAvD;;AAEA,QAAIC,aAAJ,EAAmB;AACjBC,aAAOC,EAAP,CAAUC,WAAV,CAAsB;AACpBC,qBAAa,CADO;AAEpBC,uBAAexD,OAAOkD,OAFF;AAGpBF,eAAOA;AAHa,OAAtB;AAKD,KAND,MAMO;AACLC,cAAQrB,GAAR,CAAY,gBAAgBoB,KAA5B;AACD;AACF,GAtDM;AAuDPS,QAvDO,kBAuDAC,EAvDA,EAuDI;AACT;AACD,GAzDM;AA0DPC,eA1DO,2BA0DS;AACd,SAAKC,SAAL;AACA;AACA;AACA5D,WAAOsC,KAAP,IAAc,EAAd;AACAlC,oBAAgByB,WAAhB,GAA8BgC,QAA9B,CAAuC7D,OAAOsC,KAA9C;AACI,SAAKE,IAAL,CAAUsB,IAAV,CAAe,aAAf;AACL,GAjEM;AAkEPC,kBAlEO,8BAkEW;AACnB/D,WAAOsC,KAAP,IAAc,EAAd;AACGlC,oBAAgByB,WAAhB,GAA8BgC,QAA9B,CAAuC7D,OAAOsC,KAA9C;AACI,SAAKE,IAAL,CAAUsB,IAAV,CAAe,aAAf;AACL,GAtEM;AAuEPE,gBAvEO,4BAuEU;AACf,SAAKJ,SAAL;AACA,QAAI5D,OAAOiE,KAAP,IAAgB,IAApB,EAA0B;AACxBjE,aAAOiE,KAAP,GAAe,KAAf;AACA,WAAK/B,IAAL,CAAUgC,MAAV,GAAmB,CAAnB;AACA,UAAIC,OAAO,IAAX;AACA,UAAIC,UAAW,MAAf;AACA/D,SAAGgE,MAAH,CAAUC,OAAV,CAAkBF,OAAlB,EAA2B/D,GAAGkE,WAA9B,EAA2C,UAAUC,GAAV,EAAeC,WAAf,EAA4B;AACrEN,aAAKpD,SAAL,CAAe2D,YAAf,GAA8BD,WAA9B;AACEN,aAAKpD,SAAL,CAAe4D,aAAf,GAA+BF,WAA/B;AACAN,aAAKpD,SAAL,CAAe6D,WAAf,GAA6BH,WAA7B;AACH,OAJD;AAKD,KAVD,MAUO;AACLzE,aAAOiE,KAAP,GAAe,IAAf;AACA,WAAK/B,IAAL,CAAUgC,MAAV,GAAmB,CAAnB;AACA,UAAIC,OAAO,IAAX;AACA,UAAIC,UAAW,OAAf;AACA/D,SAAGgE,MAAH,CAAUC,OAAV,CAAkBF,OAAlB,EAA2B/D,GAAGkE,WAA9B,EAA2C,UAAUC,GAAV,EAAeC,WAAf,EAA4B;AACrE,YAAID,GAAJ,EACEnE,GAAGuB,GAAH,CAAO,oBAAoB4C,IAAIK,MAAxB,GAAiC,SAAxC,EADF,KAEK;AACHV,eAAKpD,SAAL,CAAe2D,YAAf,GAA8BD,WAA9B,CADG,CACuC;AAC1CN,eAAKpD,SAAL,CAAe4D,aAAf,GAA+BF,WAA/B,CAFG,CAEwC;AAC3CN,eAAKpD,SAAL,CAAe6D,WAAf,GAA6BH,WAA7B,CAHG,CAGsC;AAE1C;AACF,OATD;AAWD;AACF,GApGM;AAqGPK,gBArGO,4BAqGU;AACf,SAAKlB,SAAL;AACD,GAvGM;AAwGPmB,mBAxGO,+BAwGa;AACjB,SAAKnB,SAAL;AACD;AACA;AACA;AACA;AACD,GA9GM;AA+GPoB,gBA/GO,4BA+GU;AACf,SAAKpB,SAAL;AACA;AACAvD,OAAG4E,QAAH,CAAYC,SAAZ,CAAsB,kBAAtB;AACD,GAnHM;AAoHPC,gBApHO,4BAoHU;AACf,SAAKvB,SAAL;AACA,SAAKwB,IAAL,GAAY/E,GAAG2B,IAAH,CAAQ,aAAR,CAAZ;AACA;AACA,QAAIqD,OAAOjF,gBAAgByB,WAAhB,GAA8ByD,WAA9B,CAA0C,EAA1C,CAAX;AACAnF,iBAAa0B,WAAb,GAA2B0D,WAA3B,CAAuC,UAAvC;AAED,GA3HM;AA6HPC,eA7HO,2BA6HS;AACd,SAAK5B,SAAL;AACA,SAAKwB,IAAL,GAAY/E,GAAG2B,IAAH,CAAQ,aAAR,CAAZ;AACA,SAAKoD,IAAL,CAAUxC,MAAV,GAAmB,KAAnB;AACA,SAAK6C,IAAL,GAAYpF,GAAG2B,IAAH,CAAQ,iBAAR,CAAZ;AACA,SAAKyD,IAAL,CAAU7C,MAAV,GAAmB,IAAnB;AACD,GAnIM;AAoIP8C,eApIO,2BAoIS;AACd,SAAKN,IAAL,GAAY/E,GAAG2B,IAAH,CAAQ,aAAR,CAAZ;AACA,SAAKoD,IAAL,CAAUxC,MAAV,GAAmB,KAAnB;AACA,SAAK+C,IAAL,GAAYtF,GAAG2B,IAAH,CAAQ,iBAAR,CAAZ;AACA,SAAK2D,IAAL,CAAU/C,MAAV,GAAmB,IAAnB;AACA,SAAKgB,SAAL;AACD,GA1IM;AA2IPgC,eA3IO,2BA2IS;AACdvF,OAAG4E,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACA,SAAKtB,SAAL;AACD,GA9IM;;AA+IPA,aAAW,qBAAY;AACrB,QAAI,KAAK7B,YAAT,EAAuB;AACrB,WAAKA,YAAL,CAAkB6B,SAAlB;AACD;AACD;AACD,GApJM;AAqJPf,aAAW,qBAAY;AACrB,QAAI,KAAKd,YAAT,EAAuB;AACrB,WAAKA,YAAL,CAAkBc,SAAlB;AACD;AACF;;AAzJM,CAAT","file":"main.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar AdsManager = require(\"AdsManagerJS\");\nvar ShareManager = require(\"ShareManagerJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    background: cc.Sprite,\n    title_bg: cc.Sprite,\n    gold_btn: cc.Button,\n    audio_btn: cc.Button,\n    share_btn: cc.Button,\n    moregame_btn: cc.Button,\n    begin_btn: cc.Button,\n    rank_btn: cc.Button,\n    skin_btn: cc.Button,\n    rankNode: cc.Node,\n    skinNode: cc.Node,\n    gold_lab: cc.Label,\n    gameBox:cc.Node,\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    cc.log(\"________\",GameDataManager.getInstance().getGameCompleteStars())\n    this.audioControl = cc.find('AudioControlNode').getComponent('AudioSourceControl');\n    this.mute = cc.find('AudioControlNode/AudioRes/audio').getComponent(cc.AudioSource);\n    let coin = GameDataManager.getInstance().getgold();\n    define.money = coin;\n    this.gold_lab.string = define.money;\n    this.node.on(\"updatemoney\", () => {\n      this.updatemoney();\n  });\n  },\n  updatemoney(){\n    this.gold_lab.string = define.money;\n  },\n  start() {\n    this.rankNode.active = false;\n    this.skinNode.active = false;\n     this.playAudio();\n    var playerStart = GameDataManager.getInstance().getGameCompleteStars();\n    this.submitScoreButtonFunc(playerStart);//提交分数\n  },\n  submitScoreButtonFunc(score) {\n    console.log(\" main  提交 : \" + score + \" key= \" + define.RankKey)\n\n    if (CC_WECHATGAME) {\n      window.wx.postMessage({\n        messageType: 3,\n        MAIN_MENU_NUM: define.RankKey,\n        score: score,\n      });\n    } else {\n      console.log(\"不支持 提交得分 : \" + score)\n    }\n  },\n  update(dt) {\n    // this.gold_lab.string = define.money;\n  },\n  gold_btnClick() {\n    this.playClick();\n    //去看视频\n    // AdsManager.getInstance().showmainRewardedGold();\n    define.money+=50;\n    GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n  },\n  gold_btnCallback(){\n define.money+=50;\n    GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n  },\n  audio_btnClick() {\n    this.playClick();\n    if (define.music == true) {\n      define.music = false;\n      this.mute.volume = 0;\n      var self = this;\n      var urlPath = (\"mute\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n        self.audio_btn.normalSprite = spriteFrame;\n          self.audio_btn.pressedSprite = spriteFrame;\n          self.audio_btn.hoverSprite = spriteFrame; \n      });\n    } else {\n      define.music = true;\n      this.mute.volume = 1;\n      var self = this;\n      var urlPath = (\"music\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n        if (err)\n          cc.log('Completed with ' + err.length + ' errors');\n        else {\n          self.audio_btn.normalSprite = spriteFrame;//传图\n          self.audio_btn.pressedSprite = spriteFrame;//\n          self.audio_btn.hoverSprite = spriteFrame;//\n\n        }\n      });\n\n    }\n  },\n  other_btnClick() {\n    this.playClick();\n  },\n  moregame_btnClick() {\n     this.playClick();\n    // ShareManager.getInstance().NavigateTo7cGameBox();\n    // this.gameBox.runAction(cc.moveBy(0.5,cc.v2(0,0)));\n    // this.box=cc.find(\"Canvas/gameBox\").getComponent(\"exported-GameBoxInterface\");\n    // this.box.show();\n  },\n  begin_btnClick() {\n    this.playClick();\n    // cc.director.loadScene('SelectDifficultScene');\n    cc.director.loadScene('ChooseStageScene');\n  },\n  share_btnClick() {\n    this.playClick();  \n    this.main = cc.find('Canvas/main');\n    // this.main.active = false;\n    var text = GameDataManager.getInstance().getTextById(17)\n    ShareManager.getInstance().onShareGame(\"sharePic\");\n  \n  },\n\n  rank_btnClick() {\n    this.playClick();\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.rank = cc.find('Canvas/rankNode');\n    this.rank.active = true;\n  },\n  skin_btnClick() {\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.skin = cc.find('Canvas/skinNode');\n    this.skin.active = true;\n    this.playClick();\n  },\n  back_btnClick() {\n    cc.director.loadScene('main')\n    this.playClick();\n  },\n  playClick: function () {\n    if (this.audioControl) {\n      this.audioControl.playClick();\n    }\n    // AdsManager.getInstance().hideBannerAD();\n  },\n  playAudio: function () {\n    if (this.audioControl) {\n      this.audioControl.playAudio();\n    }\n  },\n\n\n});\n"]}