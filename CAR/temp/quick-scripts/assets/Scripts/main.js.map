{"version":3,"sources":["main.js"],"names":["define","require","AdsManager","ShareManager","GameDataManager","cc","Class","extends","Component","properties","background","Sprite","title_bg","gold_btn","Button","audio_btn","share_btn","moregame_btn","begin_btn","rank_btn","skin_btn","rankNode","Node","skinNode","gold_lab","Label","gameBox","onLoad","log","carskin","getInstance","getcarskin","DesignResolutionSize","view","getDesignResolutionSize","WinSize","director","getWinSize","nodeX","width","nodeY","height","visibleRect","getVisibleSize","kWH","kMoveHight","console","offsetk","node","getPosition","y","setPosition","audioControl","find","getComponent","mute","AudioSource","coin","getgold","money","string","on","updatemoney","start","active","playAudio","playerStart","getGameCompleteStars","submitScoreButtonFunc","score","RankKey","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","update","dt","gold_btnClick","playClick","savegold","emit","gold_btnCallback","audio_btnClick","music","volume","self","urlPath","loader","loadRes","SpriteFrame","err","spriteFrame","normalSprite","pressedSprite","hoverSprite","length","other_btnClick","moregame_btnClick","begin_btnClick","loadScene","share_btnClick","main","text","getTextById","onShareGame","rank_btnClick","rank","skin_btnClick","skin","back_btnClick"],"mappings":"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","file":"main.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar AdsManager = require(\"AdsManagerJS\");\nvar ShareManager = require(\"ShareManagerJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\n\ncc.Class({\n  extends: cc.Component,\n\n  properties: {\n    background: cc.Sprite,\n    title_bg: cc.Sprite,\n    gold_btn: cc.Button,\n    audio_btn: cc.Button,\n    share_btn: cc.Button,\n    moregame_btn: cc.Button,\n    begin_btn: cc.Button,\n    rank_btn: cc.Button,\n    skin_btn: cc.Button,\n    rankNode: cc.Node,\n    skinNode: cc.Node,\n    gold_lab: cc.Label,\n    gameBox: cc.Node,\n  },\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    cc.log(\"======first=\",define.carskin)\n    define.carskin=GameDataManager.getInstance().getcarskin();\n    cc.log(\"=======seconed\",define.carskin)\n    var DesignResolutionSize = cc.view.getDesignResolutionSize();\n    var WinSize = cc.director.getWinSize();\n    var nodeX = WinSize.width / DesignResolutionSize.width;\n    var nodeY = WinSize.height / DesignResolutionSize.height;\n\n    var visibleRect = cc.view.getVisibleSize();\n    var kWH = visibleRect.width / visibleRect.height;\n    var kMoveHight = (kWH - 750 / 1334)\n    console.log(\"  k= \" + 750 / 1334 + \" kWH= \" + kWH);\n    if (kMoveHight > 0) {\n      //    data.TitlePos = cc.p(width * 0.5, height * 0.9);\n    } else {\n      var offsetk = 400;\n      var begin_btn = this.begin_btn.node.getPosition();\n      begin_btn.y -= (-kMoveHight) * offsetk;\n      this.begin_btn.node.setPosition(begin_btn);\n      console.log(\"begin_btn - \" + (-kMoveHight) * offsetk);\n    }\n    this.audioControl = cc.find('AudioControlNode').getComponent('AudioSourceControl');\n    this.mute = cc.find('AudioControlNode/AudioRes/audio').getComponent(cc.AudioSource);\n    let carskin=GameDataManager.getInstance().getcarskin();\n    define.carskin=carskin;\n    let coin = GameDataManager.getInstance().getgold();\n    define.money = coin;\n    this.gold_lab.string = define.money;\n    this.node.on(\"updatemoney\", () => {\n      this.updatemoney();\n    });\n  },\n  updatemoney() {\n    this.gold_lab.string = define.money;\n  },\n  start() {\n    this.rankNode.active = false;\n    this.skinNode.active = false;\n    this.playAudio();\n    var playerStart = GameDataManager.getInstance().getGameCompleteStars();\n    this.submitScoreButtonFunc(playerStart);//提交分数\n  },\n  submitScoreButtonFunc(score) {\n    console.log(\" main  提交 : \" + score + \" key= \" + define.RankKey)\n\n    if (CC_WECHATGAME) {\n      window.wx.postMessage({\n        messageType: 3,\n        MAIN_MENU_NUM: define.RankKey,\n        score: score,\n      });\n    } else {\n      console.log(\"不支持 提交得分 : \" + score)\n    }\n  },\n  update(dt) {\n    // this.gold_lab.string = define.money;\n  },\n  gold_btnClick() {\n    this.playClick();\n    //去看视频\n    // AdsManager.getInstance().showmainRewardedGold();\n    define.money += 50;\n    GameDataManager.getInstance().savegold(define.money);\n    this.node.emit(\"updatemoney\");\n  },\n  gold_btnCallback() {\n    define.money += 50;\n    GameDataManager.getInstance().savegold(define.money);\n    this.node.emit(\"updatemoney\");\n  },\n  audio_btnClick() {\n    this.playClick();\n    if (define.music == true) {\n      define.music = false;\n      this.mute.volume = 0;\n      var self = this;\n      var urlPath = (\"mute\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n        self.audio_btn.normalSprite = spriteFrame;\n        self.audio_btn.pressedSprite = spriteFrame;\n        self.audio_btn.hoverSprite = spriteFrame;\n      });\n    } else {\n      define.music = true;\n      this.mute.volume = 1;\n      var self = this;\n      var urlPath = (\"music\");\n      cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n        if (err)\n          cc.log('Completed with ' + err.length + ' errors');\n        else {\n          self.audio_btn.normalSprite = spriteFrame;//传图\n          self.audio_btn.pressedSprite = spriteFrame;//\n          self.audio_btn.hoverSprite = spriteFrame;//\n\n        }\n      });\n\n    }\n  },\n  other_btnClick() {\n    this.playClick();\n  },\n  moregame_btnClick() {\n    this.playClick();\n    // ShareManager.getInstance().NavigateTo7cGameBox();\n    // this.gameBox.runAction(cc.moveBy(0.5,cc.v2(0,0)));\n    // this.box=cc.find(\"Canvas/gameBox\").getComponent(\"exported-GameBoxInterface\");\n    // this.box.show();\n  },\n  begin_btnClick() {\n    this.playClick();\n    // cc.director.loadScene('SelectDifficultScene');\n    cc.director.loadScene('ChooseStageScene');\n  },\n  share_btnClick() {\n    this.playClick();\n    this.main = cc.find('Canvas/main');\n    // this.main.active = false;\n    var text = GameDataManager.getInstance().getTextById(17)\n    ShareManager.getInstance().onShareGame(\"sharePic\");\n\n  },\n\n  rank_btnClick() {\n    this.playClick();\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.rank = cc.find('Canvas/rankNode');\n    this.rank.active = true;\n  },\n  skin_btnClick() {\n    this.main = cc.find('Canvas/main');\n    this.main.active = false;\n    this.skin = cc.find('Canvas/skinNode');\n    this.skin.active = true;\n    this.playClick();\n  },\n  back_btnClick() {\n    cc.director.loadScene('main')\n    this.playClick();\n  },\n  playClick: function () {\n    if (this.audioControl) {\n      this.audioControl.playClick();\n    }\n    // AdsManager.getInstance().hideBannerAD();\n  },\n  playAudio: function () {\n    if (this.audioControl) {\n      this.audioControl.playAudio();\n    }\n  },\n\n\n});\n"]}