{"version":3,"sources":["GuessYouLike.js"],"names":["LOCAL_MINIGAME_LIST","LOCAL_NEXTINDEX","cc","Class","extends","Component","properties","iconImageArray","default","type","SpriteFrame","currentMiniGameList","nextIndex","moreGameList","settimeout","childIndex","start","initData","initYouLike","miniGameList","localMiniGameList","sys","localStorage","getItem","json_parse","JSON","parse","localNextIndex","parseInt","self","i","node","childrenCount","child","children","getComponent","Sprite","spriteFrame","hasEventListener","on","getSiblingIndex","clearTimeout","setTimeout","setTimeoutFun","bind","CC_WECHATGAME","wx","navigateToMiniProgram","appId","path","currentIndex","length","indexOf","setItem","stringify","toString"],"mappings":"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","file":"GuessYouLike.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["const LOCAL_MINIGAME_LIST = 'localMiniGameList_test15';\r\nconst LOCAL_NEXTINDEX = 'localNextIndex_test15'\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        iconImageArray: {\r\n            default: [],\r\n            type: cc.SpriteFrame,\r\n        },\r\n        currentMiniGameList: [],\r\n        nextIndex: 0,\r\n        moreGameList: [],\r\n        settimeout: null,\r\n        childIndex: -1,\r\n    },\r\n\r\n\r\n    start() {\r\n        this.initData();\r\n        this.initYouLike();\r\n    },\r\n\r\n    initData() {\r\n        this.miniGameList = [\r\n            \"wxd5a257d6ee2b8f91\",//飞机大作战\r\n            \"wx515f44394eab5985\",//切水果\r\n            \"wxf49b0a26d9405058\",//恋爱球球\r\n            \"wxea245f85c9673414\",//俄罗斯方块\r\n            \"wx08beeb18dc512c2f\",//消灭星星\r\n            \"wxc4e628aa7caa2c07\",//飞刀\r\n            \"wxd9589cd7117d0873\",//最囧\r\n            \"wx0af703a36035c60c\",//2048六角消除数字方块//\"wx40fb3563b8ac79b2\",//2048\r\n            \"wx6616ae605010e605\",//欢乐球球\r\n        ]\r\n\r\n        let localMiniGameList = cc.sys.localStorage.getItem(LOCAL_MINIGAME_LIST)\r\n        if (localMiniGameList) {\r\n            let json_parse = JSON.parse(localMiniGameList)\r\n            this.currentMiniGameList = json_parse;\r\n        } else {\r\n            this.currentMiniGameList = [0, 1, 2, 3];\r\n        }\r\n\r\n        let localNextIndex = cc.sys.localStorage.getItem(LOCAL_NEXTINDEX)\r\n        if (localNextIndex) {\r\n            this.nextIndex = parseInt(localNextIndex)\r\n        } else {\r\n            this.nextIndex = 4;\r\n        }\r\n    },\r\n\r\n    initYouLike() {\r\n        let self = this;\r\n        for (let i = 0; i < this.node.childrenCount; i++) {\r\n            let child = this.node.children[i];\r\n            child.getComponent(cc.Sprite).spriteFrame = this.iconImageArray[this.currentMiniGameList[i]];\r\n            if (child.hasEventListener('touchstart')) continue;\r\n            child.on('touchstart', function () {\r\n                self.childIndex = this.getSiblingIndex()\r\n                if (self.settimeout)\r\n                    clearTimeout(self.settimeout)\r\n                self.settimeout = setTimeout(self.setTimeoutFun.bind(self), 2000)\r\n                if (CC_WECHATGAME) {\r\n                    if (wx.navigateToMiniProgram) {\r\n                        wx.navigateToMiniProgram({\r\n                            appId: self.miniGameList[self.currentMiniGameList[self.childIndex]],\r\n                            path: '',\r\n                        })\r\n                    }\r\n                }\r\n            }, child)\r\n        }\r\n    },\r\n\r\n    setTimeoutFun() {\r\n        this.currentIndex = this.nextIndex % this.miniGameList.length;\r\n        for (let i = 0; i < this.currentMiniGameList.length; i++) {\r\n            if (this.currentMiniGameList.indexOf(this.currentIndex) >= 0) {\r\n                this.nextIndex++;\r\n                this.currentIndex = this.nextIndex % this.miniGameList.length;\r\n            }\r\n        }\r\n        this.currentMiniGameList[this.childIndex] = this.currentIndex;\r\n        this.initYouLike();\r\n        cc.sys.localStorage.setItem(LOCAL_MINIGAME_LIST, JSON.stringify(this.currentMiniGameList))\r\n        cc.sys.localStorage.setItem(LOCAL_NEXTINDEX, this.nextIndex.toString())\r\n    },\r\n});\r\n"]}