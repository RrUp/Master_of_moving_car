{"version":3,"sources":["RankJS.js"],"names":["define","require","AdsManager","GameDataManager","cc","Class","extends","Component","name","properties","rankingScrollView","Sprite","mainNode","Node","onLoad","can","find","getComponent","Canvas","winSize","width","height","designScreen","fitHeight","fitWidth","alignWithScreen","sys","isNative","platform","IPHONE","size","view","getFrameSize","isIphoneX","cvs","node","start","friendButtonFunc","event","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","RankKey","update","dt","_updateSubDomainCanvas","tex","sharedCanvas","undefined","getOpenDataContext","openDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,aAAaD,QAAQ,cAAR,CAAjB;AACA,IAAIE,kBAAkBF,QAAQ,mBAAR,CAAtB;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAM,QAFD;AAGLC,gBAAY;AACRC,2BAAmBN,GAAGO,MADd,EACqB;AAC7BC,kBAAUR,GAAGS;AAFL,KAHP;;AAQL;;AAEAC,UAVK,oBAUI;AACL,YAAIC,MAAMX,GAAGY,IAAH,CAAQ,QAAR,EAAkBC,YAAlB,CAA+Bb,GAAGc,MAAlC,CAAV;AACJd,WAAGe,OAAH,CAAWC,KAAX,GAAmBhB,GAAGe,OAAH,CAAWE,MAA9B,IAAwC,CAAC,MAAM,IAAP,EAAaC,YAArD,IAAqEP,IAAIQ,SAAJ,GAAgB,KAAhB,EAAuBR,IAAIS,QAAJ,GAAe,IAA3G,KAAoHT,IAAIQ,SAAJ,GAAgB,IAAhB,EAAsBR,IAAIS,QAAJ,GAAe,KAAzJ;AACAT,YAAIU,eAAJ;AACK;AACA,YAAGrB,GAAGsB,GAAH,CAAOC,QAAP,IAAmBvB,GAAGsB,GAAH,CAAOE,QAAP,IAAmBxB,GAAGsB,GAAH,CAAOG,MAAhD,EAAuD;AACpD,gBAAIC,OAAO1B,GAAG2B,IAAH,CAAQC,YAAR,EAAX;AACA,gBAAIC,YAAaH,KAAKV,KAAL,IAAc,IAAd,IAAsBU,KAAKT,MAAL,IAAe,IAAtC,IACNS,KAAKV,KAAL,IAAc,IAAd,IAAsBU,KAAKT,MAAL,IAAe,IAD/C;AAEA,gBAAGY,SAAH,EAAa;AACT,oBAAIC,MAAM,KAAKC,IAAL,CAAUlB,YAAV,CAAuBb,GAAGc,MAA1B,CAAV;AACAgB,oBAAIX,SAAJ,GAAgB,IAAhB;AACAW,oBAAIV,QAAJ,GAAe,IAAf;AACH;AACH;AACL,KAzBI;AA0BLY,SA1BK,mBA0BG,CAAE,CA1BL;AA2BLC,oBA3BK,4BA2BYC,KA3BZ,EA2BmB;AACpB,YAAIC,aAAJ,EAAmB;AACfC,mBAAOC,EAAP,CAAUC,WAAV,CAAsB;AAClBC,6BAAa,CADK;AAElBC,+BAAe5C,OAAO6C;AAFJ,aAAtB;AAIH,SALD,MAKO,CACN;AACJ,KAnCI;;AAoCL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,UAjDK,kBAiDEC,EAjDF,EAiDM;AACP,aAAKC,sBAAL;AACH,KAnDI;;AAoDL;AACAA,0BArDK,oCAqDoB;AACrB,YAAI,CAAC,KAAKC,GAAV,EAAe;AACX;AACH;AACD,YAAIT,OAAOU,YAAP,IAAuBC,SAA3B,EAAsC;AAClC,gBAAIV,GAAGW,kBAAP,EAA2B;AACvB,oBAAIC,kBAAkBZ,GAAGW,kBAAH,EAAtB;AACA,oBAAIF,eAAeG,gBAAgBC,MAAnC;AACA,qBAAKL,GAAL,CAASM,eAAT,CAAyBL,YAAzB;AACA,qBAAKD,GAAL,CAASO,mBAAT;AACA,qBAAK9C,iBAAL,CAAuB+C,WAAvB,GAAqC,IAAIrD,GAAGsD,WAAP,CAAmB,KAAKT,GAAxB,CAArC;AACH;AACJ;AACJ;AAlEI,CAAT","file":"RankJS.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar AdsManager = require(\"AdsManagerJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\ncc.Class({\n    extends: cc.Component,\n    name: \"RankJS\",\n    properties: {\n        rankingScrollView: cc.Sprite,//显示排行榜\n        mainNode: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        let can = cc.find(\"Canvas\").getComponent(cc.Canvas);\n    cc.winSize.width / cc.winSize.height <= (750 / 1334).designScreen ? (can.fitHeight = false, can.fitWidth = true) : (can.fitHeight = true, can.fitWidth = false);\n    can.alignWithScreen();\n         //iPhoneX适配\n         if(cc.sys.isNative && cc.sys.platform == cc.sys.IPHONE){\n            var size = cc.view.getFrameSize();\n            var isIphoneX = (size.width == 2436 && size.height == 1125) \n                   ||(size.width == 1125 && size.height == 2436);\n            if(isIphoneX){\n                var cvs = this.node.getComponent(cc.Canvas);\n                cvs.fitHeight = true;\n                cvs.fitWidth = true;\n            }\n         }\n    },\n    start() {},\n    friendButtonFunc(event) {\n        if (CC_WECHATGAME) {\n            window.wx.postMessage({\n                messageType: 1,\n                MAIN_MENU_NUM: define.RankKey\n            });\n        } else {\n        }\n    },\n    // submitScoreButtonFunc() {\n    //    let goals = GameDataManager.getInstance().getGoals();\n    //     console.log(\"得分 : \" + goals)\n    //     if (CC_WECHATGAME) {\n    //         window.wx.postMessage({\n    //             messageType: 3,\n    //             MAIN_MENU_NUM: define.RankKey,\n    //             score: goals,\n    //         });\n    //     } else {\n    //         console.log(\"fail 提交得分 : \" + goals)\n    //     }\n    // },\n    update(dt) {\n        this._updateSubDomainCanvas();\n    },\n    // 刷新子域的纹理\n    _updateSubDomainCanvas() {\n        if (!this.tex) {\n            return;\n        }\n        if (window.sharedCanvas != undefined) {\n            if (wx.getOpenDataContext) {\n                var openDataContext = wx.getOpenDataContext();\n                var sharedCanvas = openDataContext.canvas;\n                this.tex.initWithElement(sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.rankingScrollView.spriteFrame = new cc.SpriteFrame(this.tex);\n            }\n        }\n    }\n});\n"]}