{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/gameplay.js"],"names":["define","require","Block","GameDataManager","MyLayoutManager","ShareManager","AdsManager","HintNode","cc","Class","properties","position","move","prev","index","statics","count","ctor","extends","Component","m_Gridiron","m_pPanda","Node","m_pBlocks","m_History","m_GridironSize","m_GameScaleY","m_GridSize","Size","curDate","m_MinSteps","m_Package","m_stage","m_HintBlockDestCoordinate","m_CurrentHintIndex","m_lastHints","m_HintMode","m_SolutionMoves","m_pHintBlock","default","type","bg_sprite","Sprite","menu_btn","Button","back_menu_btn","stage_btn","main_btn","sub_gameTitle","stageIdLab","Label","stageTitleLab","gold_btn","time","node","timeLab","gamepass","gameCenter","gameBtnNode","m_pHint","m_pVideoHint","m_pRetry","m_pGuideHintDest","m_pGuideHintPointer","audio","AudioSource","audioClick","audioMove","audioComplete","audioControl","m_kOffsetScale","m_DraggedMinX","m_DraggedMaxX","m_DraggedMinY","m_DraggedMaxY","gold_lab","onLoad","Date","find","getComponent","init","on","updatemoney","i","string","money","getInstance","getLatestPackage","getGameCurLevelNum","getTextById","getGridironSize","visibleRect","getVisibleRect","visibleCenter","origin","size","kWH","width","height","kHW","scaleY","kOffsetHW","gameRectWidth","getHorizontalGridironPadding","gameRectHeight","GRIDIRON_WIDTH","setGridSize","rectX","x","getPosition","rectY","y","m_GameRect","Rect","curLevelData","getStageData","minmove","m_BlockData","length","coordinate","state","addBlock","kOrientation_Horizontal","kOrientation_Vertical","orientation","panda","id","urlPath","blockNode","addComponent","gameLayout","addChild","pBlock","data","setId","gPosition","Vec2","isOccupiedBlock","push","setOnBlockListener","setPosition","setGPosition","updateGridiron","isOccupiedPos","isOccupiedGpos","gpos","getOrientation","t","getLength","getGPosition","j","parseInt","DEBUG_MODE","DEBUG_SHOW_MAP","console","log","res","Array","temp","pos","Math","min","max","onDragged","event","minX","maxX","getAbsolutePosition","minY","maxY","newGpos","DEBUG_SHOW_POS","touches","getTouches","touchLoc","getLocation","getId","onMove","touch","newPosition","movePosition","getTouchBeganPosition","getStartLocation","getContentSize","s_CurrentTouchedBlock","m_State","kBlockState_Grabbed","kBlockState_Ungrabbed","m_OnBlockListener","onDrop","setBlockPosition","diff","getTouchBeganGPosition","unshift","steps","showHint","updateHint","playMove","checkComplete","playComplete","onGameComplete","getLastGPosition","stopActionByTag","kMoveActionTag","stopAllActions","active","savegold","emit","getGameState","m_Mode","GameMode_Relax","winStarNum","lastStars","saveGameState","showCompleteView","addGoals","goals","dialogGamePass","showDialog","start","getIsFistPlay","getGamePlaySceneReload","setGamePlaySceneReload","director","loadScene","scheduleOnce","startFindSolution","queue","record","Set","gridironW","gridironH","current","solutionIndex","base","EXIT_Flag","newNode","add","gridiron","lastMoveBlockId","p","offset","maxRightStep","step","b1","b2","has","tempNode","encodeMove","kDirection_Right","kDirection_Left","kDirection_Up","kDirection_Down","tempArr","startShowHints","direction","clear","dest","spriteFrame","action","blink","setTag","kBlinkActionTag","runAction","repeatForever","setScale","designSize","self","loader","loadRes","SpriteFrame","err","getHintDestFrameName","gpDest","pointerRotation","offsetResolutionSize","view","getVisibleSize","hideAction","hide","positionDest","centerOffset","getScaleX","getScaleY","Scale","getGridSize","showAction","show","actionBlick","guideHintPointerPos","clone","setRotation","opacity","action1","moveTo","action2","fadeOut","action3","fadeIn","action4","sequence","getHintCallback","playClick","getCurrentTouchedBlock","getgold","gold_btnClick","gold_btnCallback","videohint_btnClick","videohint_btnCallback","add_touch_listeners","canvas","EventType","TOUCH_START","TOUCH_MOVE","TOUCH_END","update","dt","secondTime","getPassTime","minuteTime","hourTime","getNowTime","testDate","getTime","nowDate","passTime","passtime","menu_btnClick","back_menu_btnClick","stage_btnClick","main_btnClick","retryCallback"],"mappings":"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","file":"gameplay.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar Block = require(\"BlockJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\nvar MyLayoutManager = require(\"MyLayoutManagerJS\");\nvar ShareManager = require(\"ShareManagerJS\");\nvar AdsManager = require(\"AdsManagerJS\");\n\nvar HintNode = cc.Class({\n    properties: {\n        position: 0,\n        move: 0,\n        prev: 0,\n        index: 0,\n    },\n    statics: {\n        count: 0,\n    },\n    ctor(position, move, prev) {\n        this.position = position;\n        this.move = move;\n        this.prev = prev;\n        this.index = HintNode.count++;\n    },\n\n});\n\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        m_Gridiron: [0],\n        m_pPanda: cc.Node,\n        m_pBlocks: [cc.Node],\n        m_History: [0],\n\n        m_GridironSize: 0,\n        m_GameScaleY: 1,\n        m_GridSize: cc.Size,\n\n        curDate: 0,\n        m_MinSteps: 1,\n        m_Package: 0,\n        m_stage: 0,\n        m_HintBlockDestCoordinate: 0,\n        m_CurrentHintIndex: -1,\n        m_lastHints: 0,\n\n        m_HintMode: false,\n        m_SolutionMoves: [0],\n\n        m_pHintBlock: {\n            default: null,\n            type: cc.Block\n        },\n        bg_sprite: cc.Sprite,\n        menu_btn: cc.Button,\n        back_menu_btn: cc.Button,\n        stage_btn: cc.Button,\n        main_btn: cc.Button,\n        sub_gameTitle: cc.Sprite,\n        stageIdLab: cc.Label,\n        stageTitleLab: cc.Label,\n        gold_btn: cc.Button,\n\n        time: cc.node,\n        timeLab: cc.Label,\n\n        gamepass: cc.Node,\n        gameCenter: cc.Node,\n\n        gameBtnNode: cc.Node,\n        m_pHint: cc.Button,\n        m_pVideoHint: cc.Button,\n        m_pRetry: cc.Button,\n        // m_share_btn: cc.Button,\n\n        m_pGuideHintDest: cc.Sprite,\n        m_pGuideHintPointer: cc.Sprite,\n\n        audio: {\n            type: cc.AudioSource,\n            default: null\n        },\n        audioClick: {\n            type: cc.AudioSource,\n            default: null\n        },\n        audioMove: {\n            type: cc.AudioSource,\n            default: null\n        },\n        audioComplete: {\n            type: cc.AudioSource,\n            default: null\n        },\n        audioControl:\n        {\n            default: null,\n        },\n        m_kOffsetScale: 1,\n\n        m_DraggedMinX: 0.0,\n        m_DraggedMaxX: 0.0,\n        m_DraggedMinY: 0.0,\n        m_DraggedMaxY: 0.0,\n\n        gold_lab: cc.Label,\n\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.curDate = new Date();\n        this.audioControl = cc.find('AudioControlNode').getComponent('AudioSourceControl');\n        this.init();\n        this.node.on(\"updatemoney\", () => {\n            this.updatemoney();\n        });\n\n    },\n    init() {\n        for (var i = 0; i < 8; ++i) {\n            this.m_Gridiron[i] = 0;\n        }\n        this.gold_lab.string = define.money;\n        this.m_Package = GameDataManager.getInstance().getLatestPackage();\n        this.m_stage = GameDataManager.getInstance().getGameCurLevelNum();\n        this.stageIdLab.string = GameDataManager.getInstance().getTextById(12) + (this.m_stage + 1);//关卡1\n        this.m_GridironSize = MyLayoutManager.getInstance().getGridironSize();\n        var visibleRect = MyLayoutManager.getInstance().getVisibleRect();\n        var visibleCenter = visibleRect.origin + visibleRect.size / 2;\n        var kWH = visibleRect.size.width / visibleRect.size.height;\n        var kHW = visibleRect.size.height / visibleRect.size.width;\n        var scaleY = visibleRect.size.height / 1334;\n        var kOffsetHW = kHW / (1334 / 750.0)\n        var gameRectWidth = visibleRect.size.width - MyLayoutManager.getInstance().getHorizontalGridironPadding() * 2;// visibleRect.size.width - MyLayoutManager.getInstance().getHorizontalGridironPadding() * 2;\n        var gameRectHeight = gameRectWidth;\n        this.m_GridironSize.width = this.m_GridironSize.height = define.GRIDIRON_WIDTH;\n        this.m_GridSize.width = gameRectWidth / this.m_GridironSize.width;\n        this.m_GridSize.height = gameRectHeight / this.m_GridironSize.height;\n        MyLayoutManager.getInstance().setGridSize(this.m_GridSize);\n        var rectX = visibleRect.origin.x + visibleRect.size.width * 0.5 + this.gameCenter.getPosition().x - gameRectWidth * 0.5\n        var rectY = visibleRect.origin.y + visibleRect.size.height * 0.5 + this.gameCenter.getPosition().y - gameRectHeight * 0.5 - 10\n        this.m_GameRect = new cc.Rect(rectX, rectY, gameRectWidth, gameRectHeight);\n        var curLevelData = GameDataManager.getInstance().getStageData(this.m_Package, this.m_stage);\n        this.m_MinSteps = curLevelData.minmove;\n        for (var i = 0; i < curLevelData.m_BlockData.length; i++) {\n            var coordinate = curLevelData.m_BlockData[i].coordinate;\n            var state = curLevelData.m_BlockData[i].state;\n            this.addBlock((coordinate & 0xF0) >> 4, coordinate & 0x0F, (state & 0x20) ? define.kOrientation_Horizontal : define.kOrientation_Vertical, state & 0x0F, (state & 0x10) != 0);\n        }\n    },\n    addBlock(x, y, orientation, length, panda) {\n        var id = 0;\n        if (orientation == define.kOrientation_Horizontal) {\n            y = this.m_GridironSize.height - 1 - y;\n        }\n        else if (orientation == define.kOrientation_Vertical) {\n            y = this.m_GridironSize.height - length - y;\n        }\n        if (id <= 0) {\n            id = this.m_pBlocks.length + 1;\n        }\n        var urlPath = (\"resources/car1.png\");\n        var blockNode = new cc.Node('Sprite');\n        blockNode.addComponent(cc.Sprite);\n        var gameLayout = cc.find(\"Canvas/gameplay/gameCenterNode\");\n        gameLayout.addChild(blockNode);\n\n        var pBlock = blockNode.addComponent('BlockJS');\n        var data = { orientation: 0, length: 0, panda: true };\n        data.orientation = orientation;\n        data.length = length;\n        data.panda = panda;\n\n        blockNode.getComponent('BlockJS').init(data);\n        blockNode.getComponent('BlockJS').setId(id);\n        var gPosition = new cc.Vec2(x, y);\n        if (!this.isOccupiedBlock(pBlock, gPosition)) {\n            this.m_pBlocks.push(blockNode);\n            blockNode.getComponent('BlockJS').setOnBlockListener(this);\n            blockNode.getComponent('BlockJS').setPosition(this.getPosition(gPosition));\n            blockNode.getComponent('BlockJS').setGPosition(gPosition);\n            this.updateGridiron();\n            if (panda) {\n                this.m_pPanda = blockNode.getComponent(\"BlockJS\");\n            }\n            return true;\n        }\n        return false;\n    },\n    isOccupiedPos: function (x, y) {\n        if (x >= 0 && y >= 0 && x < this.m_GridironSize.width && y < this.m_GridironSize.height) {\n            return ((this.m_Gridiron[y] & (0x1 << x)) != 0);\n        }\n        else {\n            return true;\n        }\n    },\n    isOccupiedGpos: function (gpos) {\n        return this.isOccupiedPos(gpos.x, gpos.y);\n    },\n    isOccupiedBlock: function (pBlock, gpos) {\n        var orientation = pBlock.getOrientation();\n        if (orientation == define.kOrientation_Horizontal) {\n            var t = new cc.Vec2(gpos.x, gpos.y);\n            for (var i = 0; i < pBlock.getLength(); i++ , t.x++) {\n                if (this.isOccupiedGpos(t)) {\n                    return true;\n                }\n            }\n        } else if (orientation == define.kOrientation_Vertical) {\n            var t = new cc.Vec2(gpos.x, gpos.y);\n            for (var i = 0; i < pBlock.getLength(); i++ , t.y++) {\n                if (this.isOccupiedGpos(t)) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n    updateGridiron: function () {\n        for (var i = 0; i < this.m_Gridiron.length; i++) {\n            this.m_Gridiron[i] = 0;\n        }\n\n        for (var i = 0; i < this.m_pBlocks.length; i++) {\n            var blockNode = this.m_pBlocks[i];\n            var pBlock = blockNode.getComponent('BlockJS')\n\n            var orientation = pBlock.getOrientation();\n            var gPosition = pBlock.getGPosition();\n\n            if (gPosition.x >= 0 && gPosition.y >= 0) {\n                if (orientation == define.kOrientation_Horizontal) {\n                    for (var j = 0; j < pBlock.getLength(); j++) {\n                        this.m_Gridiron[parseInt(gPosition.y)] |= (0x1 << parseInt(gPosition.x + j))\n                    }\n                }\n                else if (orientation == define.kOrientation_Vertical) {\n                    for (var j = 0; j < pBlock.getLength(); j++) {\n                        this.m_Gridiron[parseInt(gPosition.y + j)] |= (0x1 << parseInt(gPosition.x));\n                    }\n                }\n            }\n        }\n\n        if (define.DEBUG_MODE && define.DEBUG_SHOW_MAP) {\n            console.log(\"*************begin to print*************\\n\");\n            var res = new Array();\n            for (var i = this.m_GridironSize.height - 1; i >= 0; i--) {\n                for (var j = 0; j < this.m_GridironSize.width; j++) {\n                    res[j] = (this.m_Gridiron[i] & (0x1 << j)) ? 'x' : '.';\n                }\n                res[parseInt(this.m_GridironSize.width)] = 0;\n\n                var temp = new Array();\n                for (var j = 0; j < this.m_GridironSize.width; j++) {\n                    temp += res[j];\n                }\n                console.log(i + \" \" + temp);\n            }\n            console.log(\"*************end print*************\\n\");\n        }\n    },\n    getPosition: function (gPosition) {\n        var pos = new cc.Vec2(this.m_GameRect.origin.x + gPosition.x * this.m_GridSize.width, this.m_GameRect.origin.y + gPosition.y * this.m_GridSize.height);\n        return pos;\n    },\n\n    getGPosition: function (position) {\n        var x = (position.x - this.m_GameRect.origin.x) / this.m_GridSize.width;//在第x个格子\n        x = parseInt(x + (x > 0 ? 0.5 : -0.5));\n        x = Math.min(Math.max(0, x), this.m_GridironSize.width - 1);\n\n        var y = (position.y - this.m_GameRect.origin.y) / this.m_GridSize.height;\n        y = parseInt(y + (y > 0 ? 0.5 : -0.5));\n        y = Math.min(Math.max(0, y), this.m_GridironSize.height - 1);\n\n        return new cc.Vec2(x, y);\n    },\n    onDragged: function (pBlock, event) {\n\n        if (this.m_pHintBlock && this.m_pHintBlock != pBlock) {\n            return false;\n        }\n\n        var gPosition = pBlock.getGPosition();\n        var orientation = pBlock.getOrientation();\n        if (orientation == define.kOrientation_Horizontal) {\n            var minX = gPosition.x;\n            var maxX = gPosition.x;\n\n            while (!this.isOccupiedPos(minX - 1, gPosition.y)) {\n                minX--;\n            }\n            while (!this.isOccupiedPos(maxX + pBlock.getLength(), gPosition.y)) {\n                maxX++;\n            }\n\n            this.m_DraggedMinX = this.m_GameRect.origin.x + minX * this.m_GridSize.width;\n            this.m_DraggedMaxX = this.m_GameRect.origin.x + maxX * this.m_GridSize.width;\n            this.m_DraggedMinY = this.m_DraggedMaxY = pBlock.getAbsolutePosition().y;\n        } else if (orientation == define.kOrientation_Vertical) {\n            var minY = gPosition.y;\n            var maxY = gPosition.y;\n\n            while (!this.isOccupiedPos(gPosition.x, minY - 1)) {\n                minY--;\n            }\n            while (!this.isOccupiedPos(gPosition.x, maxY + pBlock.getLength())) {\n                maxY++;\n            }\n\n            this.m_DraggedMinX = this.m_DraggedMaxX = pBlock.getAbsolutePosition().x;\n            this.m_DraggedMinY = this.m_GameRect.origin.y + minY * this.m_GridSize.height;\n            this.m_DraggedMaxY = this.m_GameRect.origin.y + maxY * this.m_GridSize.height;\n        }\n\n        var newGpos = new cc.Vec2(-1, -1);\n        pBlock.setGPosition(newGpos);\n\n        this.updateGridiron();\n\n        if (define.DEBUG_MODE && define.DEBUG_SHOW_POS) {\n            var touches = event.getTouches();\n            var touchLoc = touches[0].getLocation();\n            console.log(\"  car \" + pBlock.getId() + \" start\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n            console.log(\" game onDragged =\");\n        }\n        return true;\n    },\n\n    onMove: function (pBlock, event) {\n        var touches = event.getTouches();\n        var touch = touches[0];\n        var touchLoc = touches[0].getLocation();\n        //最后终点位置\n        var newPosition = new cc.Vec2;\n        //移动\n        var movePosition = new cc.Vec2;\n        movePosition.x = pBlock.getTouchBeganPosition().x + touch.getLocation().x - touch.getStartLocation().x;\n        movePosition.y = pBlock.getTouchBeganPosition().y + touch.getLocation().y - touch.getStartLocation().y;\n\n        newPosition = new cc.Vec2(Math.min(Math.max(this.m_DraggedMinX, movePosition.x), this.m_DraggedMaxX), Math.min(Math.max(this.m_DraggedMinY, movePosition.y), this.m_DraggedMaxY))\n        //屏幕绝对坐标\n        pBlock.setPosition(newPosition);\n\n        if (define.DEBUG_MODE && define.DEBUG_SHOW_POS) {\n            console.log(\" game onMove =\");\n\n            console.log(\"  car \" + pBlock.getId() + \" move\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n        }\n\n        if (((touchLoc.x > pBlock.getAbsolutePosition().x) && (touchLoc.x < pBlock.getAbsolutePosition().x + pBlock.getContentSize().width * 1.3)) &&\n            ((touchLoc.y > pBlock.getAbsolutePosition().y) && (touchLoc.y < pBlock.getAbsolutePosition().y + pBlock.getContentSize().height * 1.3))) {\n        } else {\n            console.log(\"  超出矩形范围  \" + touchLoc.x + \" ，\" + touchLoc.y);\n            if (Block.s_CurrentTouchedBlock != pBlock)\n                return;\n            if (pBlock.m_State == define.kBlockState_Grabbed) {\n                pBlock.m_State = define.kBlockState_Ungrabbed;\n                if (pBlock.m_OnBlockListener) {\n                    this.onDrop(pBlock, event);\n                }\n            }\n            Block.s_CurrentTouchedBlock = null;\n        }\n    },\n\n    onDrop: function (pBlock, event) {\n\n        this.setBlockPosition(pBlock, pBlock.getAbsolutePosition());\n        var diff = new cc.Vec2;\n        diff.x = pBlock.getGPosition().x - pBlock.getTouchBeganGPosition().x;\n        diff.y = pBlock.getGPosition().y - pBlock.getTouchBeganGPosition().y;\n\n        if (diff.x || diff.y) {\n            var temp = (pBlock.getId() << 24) | ((pBlock.getOrientation() == define.kOrientation_Horizontal ? parseInt(diff.x + 10) : parseInt(diff.y + 10)) << 16) | (this.m_CurrentHintIndex + 1);\n            this.m_History.unshift(temp);\n\n            var steps = this.m_History.length;\n\n            if (define.DEBUG_MODE) {\n                console.log(\" getId=  \" + pBlock.getId() + \" x= \" + diff.x + \" y= \" + diff.y + \" m_CurrentHintIndex=\" + this.m_CurrentHintIndex);\n                console.log(\" temp=  \" + temp);\n            }\n            if (this.m_pHintBlock && this.m_pHintBlock == pBlock) {\n                var coordinate = this.m_pHintBlock.getOrientation() == define.kOrientation_Horizontal ? this.m_pHintBlock.getGPosition().x : this.m_pHintBlock.getGPosition().y;\n                if (coordinate == this.m_HintBlockDestCoordinate) {\n                    this.showHint(this.m_CurrentHintIndex + 1);\n                }\n                else {\n                    this.updateHint();\n                }\n            }\n        }\n\n        this.playMove();\n\n        // AudioManager::getInstance()->playEffect(MOVE_EFFECT_FILE);\n        if (this.m_pPanda && pBlock == this.m_pPanda) {\n            if (this.checkComplete()) {\n                this.playComplete();\n                this.onGameComplete();\n            }\n        }\n\n        if (define.DEBUG_MODE && define.DEBUG_SHOW_POS) {\n            console.log(\" game onDrop =\");\n            var touches = event.getTouches();\n            var touchLoc = touches[0].getLocation();\n            console.log(\"  car \" + pBlock.getId() + \" end\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n        }\n    },\n    setBlockPosition: function (pBlock, position) {\n        if (define.DEBUG_MODE && define.DEBUG_SHOW_POS) {\n            console.log(\"  setBlockPosition= \" + parseInt(position.x) + \",\" + parseInt(position.y));\n        }\n        var gPosition = this.getGPosition(position);\n        if (!this.isOccupiedBlock(pBlock, gPosition)) {\n            pBlock.setPosition(this.getPosition(gPosition));\n            pBlock.setGPosition(gPosition);\n            this.updateGridiron();\n        } else {\n            pBlock.setPosition(this.getPosition(pBlock.getLastGPosition()));\n        }\n    },\n    //目标车位置判断过关\n    checkComplete: function () {\n        if (this.m_pPanda && this.m_pPanda.getGPosition().x + this.m_pPanda.getLength() == this.m_GridironSize.width) {\n            return true;\n        }\n        return false;\n    },\n    onGameComplete: function () {\n        // 如果有提示，则删除提示\n        if (this.m_HintMode) {\n            this.m_pGuideHintPointer.node.stopActionByTag(define.kMoveActionTag);\n            this.m_pGuideHintDest.node.stopAllActions();\n            this.m_pGuideHintDest.node.active = false;\n            this.m_pGuideHintPointer.node.active = false;\n            this.m_HintMode = false;\n        }\n        define.money+=5;\n        GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n        var state = GameDataManager.getInstance().getGameState(this.m_Package, this.m_stage);\n        var steps = this.m_History.length;\n        var m_Mode = define.GameMode_Relax;\n        if (m_Mode == define.GameMode_Relax) {\n            // stars\n            var winStarNum = steps <= (this.m_MinSteps + 3) ? 3 : (steps <= (this.m_MinSteps + 10) ? 2 : 1);\n            var lastStars = state;\n            if (define.DEBUG_MODE) {\n                console.log(\"winStarNum = \" + winStarNum);\n            }\n\n            if (winStarNum > lastStars) {\n                //更新星星数目\n                GameDataManager.getInstance().saveGameState(this.m_Package, this.m_stage, winStarNum);\n                // AudioManager::getInstance()->playEffect(ADD_STAR);\n            }\n        }\n        // AudioManager::getInstance()->playEffect(COMPLETE_EFFECT_FILE);\n        this.showCompleteView(winStarNum);\n\n        GameDataManager.getInstance().addGoals()\n        // define.goals = GameDataManager.getInstance().getGoals()\n        if (define.DEBUG_MODE) {\n            console.log(\"play counts = \" + define.goals);\n        }\n    },\n    showCompleteView: function (winStarNum) {\n        this.playComplete();\n        var dialogGamePass = cc.find(\"Canvas/DialogGamePass\").getComponent('DialogGamePassJS');\n        dialogGamePass.showDialog(winStarNum)\n\n        console.log(\"popGamePassDialog \");\n    },\n\n\n    // 第一次玩  启动提示\n    start() {\n\n        if (GameDataManager.getInstance().getIsFistPlay() == true) {\n            cc.log(\"第一次玩\")\n            if (GameDataManager.getInstance().getGamePlaySceneReload() == false) {\n                GameDataManager.getInstance().setGamePlaySceneReload(true);\n                cc.director.loadScene(\"game\");\n            } else {\n                this.scheduleOnce(function () {\n                    this.startFindSolution();\n                }, 0.5);\n            }\n        }\n    },\n\n    startFindSolution() {\n        var queue = new Array();\n        var record = new Set();\n        this.m_SolutionMoves = new Array();\n        var gridironW = this.m_GridironSize.width\n        var gridironH = this.m_GridironSize.height;\n        var current = 0;\n        var solutionIndex = 0;\n        var size = this.m_pBlocks.length;\n        var position = 0;\n        var base = 1;\n\n        var EXIT_Flag = false;\n\n        for (var index = 0; index < size; index++ , base *= gridironW) {\n            var blockNode = this.m_pBlocks[index];\n            var pBlock = blockNode.getComponent('BlockJS')\n\n            position += (pBlock.getOrientation() == define.kOrientation_Horizontal ? parseInt(pBlock.getGPosition().x) : parseInt(pBlock.getGPosition().y)) * base;\n        }\n\n        var newNode = new HintNode(position, 0, null)\n        queue.push(newNode);\n        record.add(position);\n\n        var gridiron = new Array();\n\n        while (current < queue.length) {\n            var node = queue[current++];\n            var lastMoveBlockId = node.move > 0 ? node.move / 1000 : -1;\n\n            for (var i = 0; i < gridironW * gridironH; i++) {\n                gridiron[i] = 0;\n            }\n\n            // resolve position information from long int position\n            base = 1;\n\n            for (var index = 0; index < size; index++ , base *= gridironW) {\n                var blockNode = this.m_pBlocks[index];\n                var pBlock = blockNode.getComponent('BlockJS')\n\n                var p = parseInt(node.position % (base * gridironW) / base);\n\n                if (pBlock.getOrientation() == define.kOrientation_Horizontal) {\n                    var offset = pBlock.getGPosition().y * gridironW;\n                    for (var j = p; j <= p + pBlock.getLength() - 1; j++) {\n                        //  CC_ASSERT(offset + j >= 0);\n                        gridiron[offset + j] = pBlock.getId();\n                    }\n                } else {\n                    for (var j = p; j <= p + pBlock.getLength() - 1; j++) {\n                        //CC_ASSERT((int )pBlock.getGPosition().x + j * gridironH >= 0);\n                        gridiron[parseInt(pBlock.getGPosition().x + j * gridironW)] = pBlock.getId();\n                    }\n                }\n            }\n\n            base = 1;\n\n            for (var index = 0; index < size; index++ , base *= gridironW) {\n                var blockNode = this.m_pBlocks[index];\n                var pBlock = blockNode.getComponent('BlockJS')\n\n                if (pBlock.getId() == lastMoveBlockId) {\n                    continue;\n                }\n\n                var x, y;\n                if (pBlock.getOrientation() == define.kOrientation_Horizontal) {\n                    x = parseInt(node.position % (base * gridironW) / base);\n                    y = parseInt(pBlock.getGPosition().y);\n                }\n                else {\n                    x = parseInt(pBlock.getGPosition().x);\n                    y = parseInt(node.position % (base * gridironW) / base);\n                }\n\n                if (pBlock.getOrientation() == define.kOrientation_Horizontal) {\n                    var offset = y * gridironW + x;\n                    // Move Right\n                    var maxRightStep = 0;\n                    for (var step = 1; x + step + pBlock.getLength() - 1 < gridironW && gridiron[offset + step + pBlock.getLength() - 1] == 0; step++) {\n\n                        var b1 = x + step + pBlock.getLength() - 1 < gridironW;\n                        var b2 = (gridiron[offset + step + pBlock.getLength() - 1] == 0);\n                        //CC_ASSERT(offset + step + pBlock.getLength() - 1 >= 0);\n                        var newPosition = node.position + base * step;\n                        if (record.has(newPosition) == false) {\n                            var tempNode = new HintNode(newPosition, this.encodeMove(pBlock.getId(), define.kDirection_Right, x + step), node);\n                            queue.push(tempNode);\n                            record.add(newPosition);\n\n                            maxRightStep = step;\n                        }\n                    }\n                    if (this.m_pPanda && pBlock == this.m_pPanda && x + maxRightStep + pBlock.getLength() == gridironW) {\n                        solutionIndex = queue.length - 1;\n                        // goto EXIT;\n                        EXIT_Flag = true;\n                        break;\n                    }\n\n                    // Move Left\n                    for (var step = -1; x + step >= 0 && gridiron[offset + step] == 0; step--) {\n                        //    CC_ASSERT(offset + step >= 0);\n                        var newPosition = node.position + base * step;\n                        if (record.has(newPosition) == false) {\n                            var tempNode = new HintNode(newPosition, this.encodeMove(pBlock.getId(), define.kDirection_Left, x + step), node);\n                            queue.push(tempNode);\n                            record.add(newPosition);\n                        }\n                    }\n                }\n\n                else {\n                    var offset = y * gridironW + x;\n                    // Move Up\n                    for (var step = 1; y + step + pBlock.getLength() - 1 < gridironH && gridiron[offset + (step + pBlock.getLength() - 1) * gridironW] == 0; step++) {\n                        //    CC_ASSERT(offset + (step + pBlock.getLength() - 1) * gridironW >= 0);\n                        var newPosition = node.position + base * step;\n                        if (record.has(newPosition) == false) {\n                            var tempNode = new HintNode(newPosition, this.encodeMove(pBlock.getId(), define.kDirection_Up, y + step), node);\n                            queue.push(tempNode);\n                            record.add(newPosition);\n                        }\n                    }\n\n                    // Move Down\n                    for (var step = -1; y + step >= 0 && gridiron[offset + step * gridironW] == 0; step--) {\n                        //    CC_ASSERT(offset + step * gridironW >= 0);\n                        var newPosition = node.position + base * step;\n                        if (record.has(newPosition) == false) {\n                            var tempNode = new HintNode(newPosition, this.encodeMove(pBlock.getId(), define.kDirection_Down, y + step), node)\n                            queue.push(tempNode);\n                            record.add(newPosition);\n                        }\n                    }\n                }\n            }\n\n            if (EXIT_Flag == true) {\n                break;\n            }\n        }\n        // EXIT:\n        var tempArr = new Array();\n        if (solutionIndex >= 0) {\n            var node = queue[solutionIndex];\n            while (node) {\n                if (node.move != 0) {\n                    tempArr.push(node.move)\n                    this.m_SolutionMoves.unshift(node.move);\n                }\n                node = node.prev;\n            }\n\n            tempArr.length;\n            for (var i = 0; i < this.m_SolutionMoves.length; ++i) {\n            }\n\n            if (this.m_SolutionMoves.length > 0) {\n\n                this.scheduleOnce(function () {\n                    this.startShowHints();\n                }, 0);\n            }\n        }\n\n    },\n    encodeMove: function (id, direction, step) {\n        return id * 1000 + direction * 100 + step;\n    },\n\n    updatemoney() {\n        this.gold_lab.string = define.money;\n    },\n    startShowHints: function (index) {\n        this.showHint(0);\n    },\n\n    showHint: function (index) {\n        if (index < 0) {\n            this.m_HintMode = false;\n            if (this.m_pGuideHintDest) {\n                this.m_pGuideHintDest.node.active = false;\n                this.m_pGuideHintPointer = null;\n                //     removeChild(m_pGuideHintDest);\n            }\n            if (this.m_pGuideHintPointer) {\n                //     removeChild(m_pGuideHintPointer);\n                this.m_pGuideHintPointer.node.active = false;\n                this.m_pGuideHintPointer = null;\n            }\n            this.m_SolutionMoves.clear();\n            this.m_HintBlockDestCoordinate = 0;\n            this.m_CurrentHintIndex = index;\n\n            return;\n        }\n        this.m_HintMode = true;\n\n        // var iter = this.m_SolutionMoves[0];\n\n        if (index < parseInt(this.m_SolutionMoves.length)) {\n            var move = this.m_SolutionMoves[index];\n            var id = parseInt(move / 1000);\n            var dest = parseInt(move % 100);\n\n            for (var i = 0; i < this.m_pBlocks.length; i++) {\n                var blockNode = this.m_pBlocks[i];\n                var pBlock = blockNode.getComponent('BlockJS')\n\n                if (pBlock.getId() == id) {\n                    // if (this.m_pHintBlock)\n                    // {\n                    //     this.m_pHintBlock.clearHint();\n                    // }\n                    this.m_pHintBlock = pBlock;\n\n                    this.m_HintBlockDestCoordinate = dest;\n                    this.m_CurrentHintIndex = index;\n\n                    this.m_pGuideHintPointer.node.active = true;\n                    this.m_pGuideHintDest.node.active = true;\n                    if (this.m_pGuideHintPointer.spriteFrame == null) {\n                        var action = new cc.blink(1, 1)\n                        action.setTag(define.kBlinkActionTag);\n                        this.m_pGuideHintDest.node.runAction(new cc.repeatForever(action));\n\n                        // var urlPath = cc.url.raw(\"resources/playGamePic/hint_pointer.png\");\n                        // this.m_pGuideHintPointer.spriteFrame = new cc.SpriteFrame(urlPath);\n                        this.m_pGuideHintPointer.node.setScale(1, MyLayoutManager.getInstance().getVisibleRect().size.height / define.designSize.height);\n                        var self = this;\n                        var urlPath = (\"playGamePic/hint_pointer\");\n                        cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n                            self.m_pGuideHintPointer.spriteFrame = spriteFrame;\n                        });\n                    }\n\n                    this.updateHint();\n                    break;\n                }\n            }\n        }\n    },\n    //展现提示框图片\n    getHintDestFrameName: function (orientation, length) {\n        if (orientation == define.kOrientation_Horizontal) {\n            return length == 2 ? \"bk_hint_dest2h\" : \"bk_hint_dest3h\";\n        }\n        else {\n            return length == 2 ? \"bk_hint_dest2v\" : \"bk_hint_dest3v\";\n        }\n    },\n\n    updateHint: function () {\n        var step = parseInt(this.m_pHintBlock.getOrientation() == define.kOrientation_Horizontal ? this.m_HintBlockDestCoordinate - this.m_pHintBlock.getGPosition().x : this.m_HintBlockDestCoordinate - this.m_pHintBlock.getGPosition().y);\n        var gpDest = this.m_pHintBlock.getGPosition();\n\n        var pointerRotation = 0;\n        if (this.m_pHintBlock.getOrientation() == define.kOrientation_Horizontal) {\n            gpDest.x += step;\n            pointerRotation = step > 0 ? 0 : 180;\n        }\n        else {\n            gpDest.y += step;\n            pointerRotation = step > 0 ? 270 : 90;\n        }\n        var offsetResolutionSize = cc.view.getVisibleSize();\n        this.m_pGuideHintDest.node.stopActionByTag(define.kBlinkActionTag);\n        var hideAction = cc.hide();\n        this.m_pGuideHintDest.node.runAction(hideAction);\n\n        var positionDest = this.getPosition(gpDest);\n        var centerOffset = new cc.Vec2(this.m_pHintBlock.getContentSize().width * this.m_pHintBlock.getScaleX() / 2, this.m_pHintBlock.getContentSize().height * this.m_pHintBlock.getScaleY() / 2);\n\n        // var urlPath = cc.url.raw(\"playGamePic/\" + this.getHintDestFrameName(this.m_pHintBlock.getOrientation(), this.m_pHintBlock.getLength()));\n\n        // this.m_pGuideHintDest.spriteFrame = new cc.SpriteFrame(urlPath);\n        var urlPath = (\"playGamePic/\" + this.getHintDestFrameName(this.m_pHintBlock.getOrientation(), this.m_pHintBlock.getLength()));\n        var self = this;\n        cc.loader.loadRes(urlPath, cc.SpriteFrame, function (err, spriteFrame) {\n            self.m_pGuideHintDest.spriteFrame = spriteFrame;\n        });\n\n        var Scale = new cc.Vec2(MyLayoutManager.getInstance().getGridSize().width / (91 + 4), MyLayoutManager.getInstance().getGridSize().height / (91 + 4));\n        this.m_pGuideHintDest.node.setScale(Scale)\n        this.m_pGuideHintDest.node.setPosition(new cc.Vec2(positionDest.x + centerOffset.x - offsetResolutionSize.width * 0.5, positionDest.y + centerOffset.y - offsetResolutionSize.height * 0.5));\n\n        var showAction = cc.show();\n        this.m_pGuideHintDest.node.runAction(showAction);\n        var actionBlick = new cc.blink(1, 1)\n        actionBlick.setTag(define.kBlinkActionTag);\n        this.m_pGuideHintDest.node.runAction(new cc.repeatForever(actionBlick));\n\n        var guideHintPointerPos = new cc.Vec2(this.m_pHintBlock.getAbsolutePosition().x + centerOffset.x - offsetResolutionSize.width * 0.5, this.m_pHintBlock.getAbsolutePosition().y + centerOffset.y - offsetResolutionSize.height * 0.5)\n        this.m_pGuideHintPointer.node.runAction(showAction.clone());\n\n        this.m_pGuideHintPointer.node.setPosition(guideHintPointerPos);\n        this.m_pGuideHintPointer.node.setRotation(pointerRotation);\n\n        // var dest_pos=this.m_pGuideHintDest.node.getPosition()\n        // this.m_pGuideHintPointer.node.setPosition(dest_pos);\n        // this.m_pGuideHintPointer.node.active=true;\n        this.m_pGuideHintPointer.node.stopActionByTag(define.kMoveActionTag);\n        this.m_pGuideHintPointer.node.opacity = 255;\n\n        var action1 = new cc.moveTo(0.7, this.m_pGuideHintDest.node.getPosition());\n        var action2 = new cc.fadeOut(0.5);\n        var action3 = new cc.fadeIn(0.0);\n        var action4 = new cc.moveTo(0.0, this.m_pGuideHintPointer.node.getPosition());\n        var action = new cc.repeatForever(cc.sequence(action1, action2, action3, action4));\n        action.setTag(define.kMoveActionTag);\n        this.m_pGuideHintPointer.node.runAction(action);\n\n    },\n    //金币提示按钮事件\n    getHintCallback() { \n        this.playClick();\n        if (Block.getCurrentTouchedBlock()) {\n            return;\n        };\n       \n        if (this.m_HintMode) { }\n        else if (!GameDataManager.getInstance().getgold() > 0) {\n        }\n        else {\n            this.scheduleOnce(function () {\n                this.startFindSolution();\n            }, 0);\n            define.money -= 50;\n            GameDataManager.getInstance().savegold(define.money);\n            this.node.emit(\"updatemoney\");\n        }\n\n    },\n    gold_btnClick() {\n        this.playClick();\n        //去看视频\n        // AdsManager.getInstance().showRewardedGold();\n        define.money += 50;\n        GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n    },\n    gold_btnCallback(){\n        define.money += 50;\n        // cc.sys.localStorage.setItem(\"gold\",define.money)\n        GameDataManager.getInstance().savegold(define.money);\n        this.node.emit(\"updatemoney\");\n    },\n    videohint_btnClick() {\n        this.playClick();\n        //去看视频\n        // AdsManager.getInstance().showRewardedVideo();\n        this.scheduleOnce(function () {\n            this.startFindSolution();\n        }, 0);\n    },\n   videohint_btnCallback(){\n        this.scheduleOnce(function () {\n            this.startFindSolution();\n        }, 0);\n    },\n    //触摸监听\n    add_touch_listeners: function () {\n        var self = this;\n        var canvas = cc.find(\"Canvas\");\n\n        canvas.on(cc.Node.EventType.TOUCH_START, function (event) {\n            var touches = event.getTouches();     //touches获取触控数组\n            var touchLoc = touches[0].getLocation();//touchLoc第一个触控点的世界地图坐标（node.convertToNodeSpaceAR()可以将世界地图坐标转换为node的局部坐标）\n\n            console.log(\"  touch  start\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n\n        }, self.node);\n\n        canvas.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n            var touches = event.getTouches();\n            var touchLoc = touches[0].getLocation();\n\n            console.log(\"  touch  move\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n        }, self.node);\n\n        canvas.on(cc.Node.EventType.TOUCH_END, function (event) {\n            var touches = event.getTouches();\n            var touchLoc = touches[0].getLocation();\n\n            console.log(\"  touch  end\" + \"=\" + touchLoc.x + \",\" + touchLoc.y);\n        }, self.node);\n\n    },\n    //记录游戏开始时间  \n    update(dt) {\n        // this.gold_lab.string=define.money;\n        {\n            var secondTime = parseInt(this.getPassTime()); // 秒\n            var minuteTime = 0;// 分\n            var hourTime = 0;// 时\n            // var dayTime = 0;// 天\n            if (secondTime < 60) {\n                secondTime = secondTime > 9 ? secondTime : \"0\" + secondTime;\n                this.timeLab.getComponent(cc.Label).string = \"00:\" + secondTime;\n            }\n            else {\n                if (secondTime >= 60 & secondTime < 3600) {\n                    minuteTime = parseInt(secondTime / 60)\n                    secondTime = parseInt(secondTime % 60)\n                    secondTime = secondTime > 9 ? secondTime : \"0\" + secondTime;\n                    minuteTime = minuteTime > 9 ? minuteTime : \"0\" + minuteTime;\n                    this.timeLab.getComponent(cc.Label).string = minuteTime + \":\" + secondTime;\n                }\n                else if (secondTime >= 3600) {\n                    hourTime = parseInt(secondTime / 3600)\n                    minuteTime = parseInt((secondTime % 3600) / 60)\n                    secondTime = parseInt((secondTime % 3600) % 60)\n                    secondTime = secondTime > 9 ? secondTime : \"0\" + secondTime;\n                    minuteTime = minuteTime > 9 ? minuteTime : \"0\" + minuteTime;\n                    hourTime = hourTime > 9 ? hourTime : \"0\" + hourTime;\n                    this.timeLab.getComponent(cc.Label).string = hourTime + \":\" + minuteTime + \":\" + secondTime;\n                }\n            }\n        }\n    },\n    //获取当前时间\n    getNowTime() {\n        var testDate = new Date();\n        //获取当前时间(从1970.1.1开始的毫秒数)\n        cc.log(testDate);\n        return testDate.getTime();\n    },\n    //获取过去的秒数\n    getPassTime: function () {\n        var nowDate = new Date();\n        var passTime = nowDate - this.curDate;\n        // this.curDate = nowDate;\n        var passtime = passTime / 1000;\n        return passtime;\n    },\n    //菜单按钮\n    menu_btnClick() {\n        this.playClick();\n        this.menu_btn.node.active = false;\n        this.back_menu_btn.node.active = true;\n        this.main_btn.node.active = true;\n        this.stage_btn.node.active = true;\n        this.sub_gameTitle.node.active = false;\n    },\n    //返回菜单按钮\n    back_menu_btnClick() {\n        this.playClick();\n        this.menu_btn.node.active = true;\n        this.sub_gameTitle.node.active = true;\n        this.back_menu_btn.node.active = false;\n        this.main_btn.node.active = false;\n        this.stage_btn.node.active = false;\n    },\n    //进入关卡界面按钮\n    stage_btnClick() {\n        this.playClick();\n        cc.director.loadScene(\"ChooseStageScene\");\n    },\n    //进入主界面按钮\n    main_btnClick() {\n        this.playClick();\n        cc.director.loadScene(\"main\");\n\n    },\n    //重试\n    retryCallback: function () {\n        this.playClick();\n        cc.director.loadScene(\"game\");\n    },\n    //音频\n    playClick: function () {\n        if (this.audioControl) {\n            this.audioControl.playClick();\n        } else {\n        }\n    },\n    playMove: function () {\n        if (this.audioControl) {\n            this.audioControl.playMove();\n        }\n    },\n    playComplete: function () {\n        if (this.audioControl) {\n            this.audioControl.playComplete();\n        }\n    },\n\n});\n"]}