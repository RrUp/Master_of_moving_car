{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/RankJS.js"],"names":["define","require","AdsManager","GameDataManager","cc","Class","extends","Component","name","properties","rankingScrollView","Sprite","mainNode","Node","onLoad","start","friendButtonFunc","event","CC_WECHATGAME","window","wx","postMessage","messageType","MAIN_MENU_NUM","RankKey","update","dt","_updateSubDomainCanvas","tex","sharedCanvas","undefined","getOpenDataContext","openDataContext","canvas","initWithElement","handleLoadedTexture","spriteFrame","SpriteFrame"],"mappings":";;;;;;AAAA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,aAAaD,QAAQ,cAAR,CAAjB;AACA,IAAIE,kBAAkBF,QAAQ,mBAAR,CAAtB;AACAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,UAAM,QAFD;AAGLC,gBAAY;AACRC,2BAAmBN,GAAGO,MADd,EACqB;AAC7BC,kBAAUR,GAAGS;AAFL,KAHP;;AAQL;;AAEAC,UAVK,oBAUI,CACR,CAXI;AAYLC,SAZK,mBAYG,CAAE,CAZL;AAaLC,oBAbK,4BAaYC,KAbZ,EAamB;AACpB,YAAIC,aAAJ,EAAmB;AACfC,mBAAOC,EAAP,CAAUC,WAAV,CAAsB;AAClBC,6BAAa,CADK;AAElBC,+BAAevB,OAAOwB;AAFJ,aAAtB;AAIH,SALD,MAKO,CACN;AACJ,KArBI;;AAsBL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,UAnCK,kBAmCEC,EAnCF,EAmCM;AACP,aAAKC,sBAAL;AACH,KArCI;;AAsCL;AACAA,0BAvCK,oCAuCoB;AACrB,YAAI,CAAC,KAAKC,GAAV,EAAe;AACX;AACH;AACD,YAAIT,OAAOU,YAAP,IAAuBC,SAA3B,EAAsC;AAClC,gBAAIV,GAAGW,kBAAP,EAA2B;AACvB,oBAAIC,kBAAkBZ,GAAGW,kBAAH,EAAtB;AACA,oBAAIF,eAAeG,gBAAgBC,MAAnC;AACA,qBAAKL,GAAL,CAASM,eAAT,CAAyBL,YAAzB;AACA,qBAAKD,GAAL,CAASO,mBAAT;AACA,qBAAKzB,iBAAL,CAAuB0B,WAAvB,GAAqC,IAAIhC,GAAGiC,WAAP,CAAmB,KAAKT,GAAxB,CAArC;AACH;AACJ;AACJ;AApDI,CAAT","file":"RankJS.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["var define = require(\"define\");\nvar AdsManager = require(\"AdsManagerJS\");\nvar GameDataManager = require(\"GameDataManagerJS\");\ncc.Class({\n    extends: cc.Component,\n    name: \"RankJS\",\n    properties: {\n        rankingScrollView: cc.Sprite,//显示排行榜\n        mainNode: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n    },\n    start() {},\n    friendButtonFunc(event) {\n        if (CC_WECHATGAME) {\n            window.wx.postMessage({\n                messageType: 1,\n                MAIN_MENU_NUM: define.RankKey\n            });\n        } else {\n        }\n    },\n    // submitScoreButtonFunc() {\n    //    let goals = GameDataManager.getInstance().getGoals();\n    //     console.log(\"得分 : \" + goals)\n    //     if (CC_WECHATGAME) {\n    //         window.wx.postMessage({\n    //             messageType: 3,\n    //             MAIN_MENU_NUM: define.RankKey,\n    //             score: goals,\n    //         });\n    //     } else {\n    //         console.log(\"fail 提交得分 : \" + goals)\n    //     }\n    // },\n    update(dt) {\n        this._updateSubDomainCanvas();\n    },\n    // 刷新子域的纹理\n    _updateSubDomainCanvas() {\n        if (!this.tex) {\n            return;\n        }\n        if (window.sharedCanvas != undefined) {\n            if (wx.getOpenDataContext) {\n                var openDataContext = wx.getOpenDataContext();\n                var sharedCanvas = openDataContext.canvas;\n                this.tex.initWithElement(sharedCanvas);\n                this.tex.handleLoadedTexture();\n                this.rankingScrollView.spriteFrame = new cc.SpriteFrame(this.tex);\n            }\n        }\n    }\n});\n"]}